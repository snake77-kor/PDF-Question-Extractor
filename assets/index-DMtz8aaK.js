var KR=Object.defineProperty;var sC=p=>{throw TypeError(p)};var $R=(p,t,e)=>t in p?KR(p,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):p[t]=e;var et=(p,t,e)=>$R(p,typeof t!="symbol"?t+"":t,e),Wv=(p,t,e)=>t.has(p)||sC("Cannot "+e);var o=(p,t,e)=>(Wv(p,t,"read from private field"),e?e.call(p):t.get(p)),w=(p,t,e)=>t.has(p)?sC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(p):t.set(p,e),A=(p,t,e,n)=>(Wv(p,t,"write to private field"),n?n.call(p,e):t.set(p,e),e),_=(p,t,e)=>(Wv(p,t,"access private method"),e);var Qe=(p,t,e,n)=>({set _(a){A(p,t,a,e)},get _(){return o(p,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function rT(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var Zv={exports:{}},cf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC;function QR(){if(aC)return cf;aC=1;var p=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:p,type:n,key:u,ref:a!==void 0?a:null,props:l}}return cf.Fragment=t,cf.jsx=e,cf.jsxs=e,cf}var rC;function WR(){return rC||(rC=1,Zv.exports=QR()),Zv.exports}var tt=WR(),Jv={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function ZR(){if(oC)return _t;oC=1;var p=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function M(B,V,Z){this.props=B,this.context=V,this.refs=R,this.updater=Z||T}M.prototype.isReactComponent={},M.prototype.setState=function(B,V){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,V,"setState")},M.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function O(){}O.prototype=M.prototype;function D(B,V,Z){this.props=B,this.context=V,this.refs=R,this.updater=Z||T}var L=D.prototype=new O;L.constructor=D,C(L,M.prototype),L.isPureReactComponent=!0;var k=Array.isArray;function z(){}var F={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function Y(B,V,Z){var at=Z.ref;return{$$typeof:p,type:B,key:V,ref:at!==void 0?at:null,props:Z}}function it(B,V){return Y(B.type,V,B.props)}function J(B){return typeof B=="object"&&B!==null&&B.$$typeof===p}function ht(B){var V={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Z){return V[Z]})}var gt=/\/+/g;function mt(B,V){return typeof B=="object"&&B!==null&&B.key!=null?ht(""+B.key):V.toString(36)}function vt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(z,z):(B.status="pending",B.then(function(V){B.status==="pending"&&(B.status="fulfilled",B.value=V)},function(V){B.status==="pending"&&(B.status="rejected",B.reason=V)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function P(B,V,Z,at,ct){var yt=typeof B;(yt==="undefined"||yt==="boolean")&&(B=null);var bt=!1;if(B===null)bt=!0;else switch(yt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(B.$$typeof){case p:case t:bt=!0;break;case m:return bt=B._init,P(bt(B._payload),V,Z,at,ct)}}if(bt)return ct=ct(B),bt=at===""?"."+mt(B,0):at,k(ct)?(Z="",bt!=null&&(Z=bt.replace(gt,"$&/")+"/"),P(ct,V,Z,"",function(ys){return ys})):ct!=null&&(J(ct)&&(ct=it(ct,Z+(ct.key==null||B&&B.key===ct.key?"":(""+ct.key).replace(gt,"$&/")+"/")+bt)),V.push(ct)),1;bt=0;var Ke=at===""?".":at+":";if(k(B))for(var ye=0;ye<B.length;ye++)at=B[ye],yt=Ke+mt(at,ye),bt+=P(at,V,Z,yt,ct);else if(ye=E(B),typeof ye=="function")for(B=ye.call(B),ye=0;!(at=B.next()).done;)at=at.value,yt=Ke+mt(at,ye++),bt+=P(at,V,Z,yt,ct);else if(yt==="object"){if(typeof B.then=="function")return P(vt(B),V,Z,at,ct);throw V=String(B),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return bt}function X(B,V,Z){if(B==null)return B;var at=[],ct=0;return P(B,at,"","",function(yt){return V.call(Z,yt,ct++)}),at}function nt(B){if(B._status===-1){var V=B._result;V=V(),V.then(function(Z){(B._status===0||B._status===-1)&&(B._status=1,B._result=Z)},function(Z){(B._status===0||B._status===-1)&&(B._status=2,B._result=Z)}),B._status===-1&&(B._status=0,B._result=V)}if(B._status===1)return B._result.default;throw B._result}var Et=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},wt={map:X,forEach:function(B,V,Z){X(B,function(){V.apply(this,arguments)},Z)},count:function(B){var V=0;return X(B,function(){V++}),V},toArray:function(B){return X(B,function(V){return V})||[]},only:function(B){if(!J(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return _t.Activity=b,_t.Children=wt,_t.Component=M,_t.Fragment=e,_t.Profiler=a,_t.PureComponent=D,_t.StrictMode=n,_t.Suspense=d,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,_t.__COMPILER_RUNTIME={__proto__:null,c:function(B){return F.H.useMemoCache(B)}},_t.cache=function(B){return function(){return B.apply(null,arguments)}},_t.cacheSignal=function(){return null},_t.cloneElement=function(B,V,Z){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var at=C({},B.props),ct=B.key;if(V!=null)for(yt in V.key!==void 0&&(ct=""+V.key),V)!W.call(V,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&V.ref===void 0||(at[yt]=V[yt]);var yt=arguments.length-2;if(yt===1)at.children=Z;else if(1<yt){for(var bt=Array(yt),Ke=0;Ke<yt;Ke++)bt[Ke]=arguments[Ke+2];at.children=bt}return Y(B.type,ct,at)},_t.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},_t.createElement=function(B,V,Z){var at,ct={},yt=null;if(V!=null)for(at in V.key!==void 0&&(yt=""+V.key),V)W.call(V,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(ct[at]=V[at]);var bt=arguments.length-2;if(bt===1)ct.children=Z;else if(1<bt){for(var Ke=Array(bt),ye=0;ye<bt;ye++)Ke[ye]=arguments[ye+2];ct.children=Ke}if(B&&B.defaultProps)for(at in bt=B.defaultProps,bt)ct[at]===void 0&&(ct[at]=bt[at]);return Y(B,yt,ct)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(B){return{$$typeof:h,render:B}},_t.isValidElement=J,_t.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:nt}},_t.memo=function(B,V){return{$$typeof:f,type:B,compare:V===void 0?null:V}},_t.startTransition=function(B){var V=F.T,Z={};F.T=Z;try{var at=B(),ct=F.S;ct!==null&&ct(Z,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(z,Et)}catch(yt){Et(yt)}finally{V!==null&&Z.types!==null&&(V.types=Z.types),F.T=V}},_t.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},_t.use=function(B){return F.H.use(B)},_t.useActionState=function(B,V,Z){return F.H.useActionState(B,V,Z)},_t.useCallback=function(B,V){return F.H.useCallback(B,V)},_t.useContext=function(B){return F.H.useContext(B)},_t.useDebugValue=function(){},_t.useDeferredValue=function(B,V){return F.H.useDeferredValue(B,V)},_t.useEffect=function(B,V){return F.H.useEffect(B,V)},_t.useEffectEvent=function(B){return F.H.useEffectEvent(B)},_t.useId=function(){return F.H.useId()},_t.useImperativeHandle=function(B,V,Z){return F.H.useImperativeHandle(B,V,Z)},_t.useInsertionEffect=function(B,V){return F.H.useInsertionEffect(B,V)},_t.useLayoutEffect=function(B,V){return F.H.useLayoutEffect(B,V)},_t.useMemo=function(B,V){return F.H.useMemo(B,V)},_t.useOptimistic=function(B,V){return F.H.useOptimistic(B,V)},_t.useReducer=function(B,V,Z){return F.H.useReducer(B,V,Z)},_t.useRef=function(B){return F.H.useRef(B)},_t.useState=function(B){return F.H.useState(B)},_t.useSyncExternalStore=function(B,V,Z){return F.H.useSyncExternalStore(B,V,Z)},_t.useTransition=function(){return F.H.useTransition()},_t.version="19.2.4",_t}var lC;function HS(){return lC||(lC=1,Jv.exports=ZR()),Jv.exports}var Gs=HS();const JR=rT(Gs);var tA={exports:{}},uf={},eA={exports:{}},iA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function tD(){return cC||(cC=1,(function(p){function t(P,X){var nt=P.length;P.push(X);t:for(;0<nt;){var Et=nt-1>>>1,wt=P[Et];if(0<a(wt,X))P[Et]=X,P[nt]=wt,nt=Et;else break t}}function e(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var X=P[0],nt=P.pop();if(nt!==X){P[0]=nt;t:for(var Et=0,wt=P.length,B=wt>>>1;Et<B;){var V=2*(Et+1)-1,Z=P[V],at=V+1,ct=P[at];if(0>a(Z,nt))at<wt&&0>a(ct,Z)?(P[Et]=ct,P[at]=nt,Et=at):(P[Et]=Z,P[V]=nt,Et=V);else if(at<wt&&0>a(ct,nt))P[Et]=ct,P[at]=nt,Et=at;else break t}}return X}function a(P,X){var nt=P.sortIndex-X.sortIndex;return nt!==0?nt:P.id-X.id}if(p.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;p.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();p.unstable_now=function(){return u.now()-h}}var d=[],f=[],m=1,b=null,v=3,E=!1,T=!1,C=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function L(P){for(var X=e(f);X!==null;){if(X.callback===null)n(f);else if(X.startTime<=P)n(f),X.sortIndex=X.expirationTime,t(d,X);else break;X=e(f)}}function k(P){if(C=!1,L(P),!T)if(e(d)!==null)T=!0,z||(z=!0,ht());else{var X=e(f);X!==null&&vt(k,X.startTime-P)}}var z=!1,F=-1,W=5,Y=-1;function it(){return R?!0:!(p.unstable_now()-Y<W)}function J(){if(R=!1,z){var P=p.unstable_now();Y=P;var X=!0;try{t:{T=!1,C&&(C=!1,O(F),F=-1),E=!0;var nt=v;try{e:{for(L(P),b=e(d);b!==null&&!(b.expirationTime>P&&it());){var Et=b.callback;if(typeof Et=="function"){b.callback=null,v=b.priorityLevel;var wt=Et(b.expirationTime<=P);if(P=p.unstable_now(),typeof wt=="function"){b.callback=wt,L(P),X=!0;break e}b===e(d)&&n(d),L(P)}else n(d);b=e(d)}if(b!==null)X=!0;else{var B=e(f);B!==null&&vt(k,B.startTime-P),X=!1}}break t}finally{b=null,v=nt,E=!1}X=void 0}}finally{X?ht():z=!1}}}var ht;if(typeof D=="function")ht=function(){D(J)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,mt=gt.port2;gt.port1.onmessage=J,ht=function(){mt.postMessage(null)}}else ht=function(){M(J,0)};function vt(P,X){F=M(function(){P(p.unstable_now())},X)}p.unstable_IdlePriority=5,p.unstable_ImmediatePriority=1,p.unstable_LowPriority=4,p.unstable_NormalPriority=3,p.unstable_Profiling=null,p.unstable_UserBlockingPriority=2,p.unstable_cancelCallback=function(P){P.callback=null},p.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<P?Math.floor(1e3/P):5},p.unstable_getCurrentPriorityLevel=function(){return v},p.unstable_next=function(P){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var nt=v;v=X;try{return P()}finally{v=nt}},p.unstable_requestPaint=function(){R=!0},p.unstable_runWithPriority=function(P,X){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var nt=v;v=P;try{return X()}finally{v=nt}},p.unstable_scheduleCallback=function(P,X,nt){var Et=p.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?Et+nt:Et):nt=Et,P){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=nt+wt,P={id:m++,callback:X,priorityLevel:P,startTime:nt,expirationTime:wt,sortIndex:-1},nt>Et?(P.sortIndex=nt,t(f,P),e(d)===null&&P===e(f)&&(C?(O(F),F=-1):C=!0,vt(k,nt-Et))):(P.sortIndex=wt,t(d,P),T||E||(T=!0,z||(z=!0,ht()))),P},p.unstable_shouldYield=it,p.unstable_wrapCallback=function(P){var X=v;return function(){var nt=v;v=X;try{return P.apply(this,arguments)}finally{v=nt}}}})(iA)),iA}var uC;function eD(){return uC||(uC=1,eA.exports=tD()),eA.exports}var nA={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function iD(){if(hC)return xi;hC=1;var p=HS();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:m}}var u=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xi.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,m)},xi.flushSync=function(d){var f=u.T,m=n.p;try{if(u.T=null,n.p=2,d)return d()}finally{u.T=f,n.p=m,n.d.f()}},xi.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},xi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xi.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:E}):m==="script"&&n.d.X(d,{crossOrigin:b,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xi.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=h(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},xi.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xi.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=h(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},xi.requestFormReset=function(d){n.d.r(d)},xi.unstable_batchedUpdates=function(d,f){return d(f)},xi.useFormState=function(d,f,m){return u.H.useFormState(d,f,m)},xi.useFormStatus=function(){return u.H.useHostTransitionStatus()},xi.version="19.2.4",xi}var dC;function nD(){if(dC)return nA.exports;dC=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(t){console.error(t)}}return p(),nA.exports=iD(),nA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function sD(){if(fC)return uf;fC=1;var p=eD(),t=HS(),e=nD();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(n(188))}function f(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(n(188));return s!==i?null:i}for(var r=i,c=s;;){var g=r.return;if(g===null)break;var y=g.alternate;if(y===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===r)return d(g),i;if(y===c)return d(g),s;y=y.sibling}throw Error(n(188))}if(r.return!==c.return)r=g,c=y;else{for(var S=!1,x=g.child;x;){if(x===r){S=!0,r=g,c=y;break}if(x===c){S=!0,c=g,r=y;break}x=x.sibling}if(!S){for(x=y.child;x;){if(x===r){S=!0,r=y,c=g;break}if(x===c){S=!0,c=y,r=g;break}x=x.sibling}if(!S)throw Error(n(189))}}if(r.alternate!==c)throw Error(n(190))}if(r.tag!==3)throw Error(n(188));return r.stateNode.current===r?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ht(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var gt=Symbol.for("react.client.reference");function mt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===gt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case k:return"Suspense";case z:return"SuspenseList";case Y:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case D:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case L:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return s=i.displayName||null,s!==null?s:mt(i.type)||"Memo";case W:s=i._payload,i=i._init;try{return mt(i(s))}catch{}}return null}var vt=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},Et=[],wt=-1;function B(i){return{current:i}}function V(i){0>wt||(i.current=Et[wt],Et[wt]=null,wt--)}function Z(i,s){wt++,Et[wt]=i.current,i.current=s}var at=B(null),ct=B(null),yt=B(null),bt=B(null);function Ke(i,s){switch(Z(yt,s),Z(ct,i),Z(at,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?x_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=x_(s),i=M_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(at),Z(at,i)}function ye(){V(at),V(ct),V(yt)}function ys(i){i.memoizedState!==null&&Z(bt,i);var s=at.current,r=M_(s,i.type);s!==r&&(Z(ct,i),Z(at,r))}function Gn(i){ct.current===i&&(V(at),V(ct)),bt.current===i&&(V(bt),af._currentValue=nt)}var $o,pd;function ma(i){if($o===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);$o=s&&s[1]||"",pd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$o+i+pd}var ky=!1;function By(i,s){if(!i||ky)return"";ky=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(q){var G=q}Reflect.construct(i,[],Q)}else{try{Q.call()}catch(q){G=q}i.call(Q.prototype)}}else{try{throw Error()}catch(q){G=q}(Q=i())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),S=y[0],x=y[1];if(S&&x){var N=S.split(`
`),j=x.split(`
`);for(g=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;if(c===N.length||g===j.length)for(c=N.length-1,g=j.length-1;1<=c&&0<=g&&N[c]!==j[g];)g--;for(;1<=c&&0<=g;c--,g--)if(N[c]!==j[g]){if(c!==1||g!==1)do if(c--,g--,0>g||N[c]!==j[g]){var K=`
`+N[c].replace(" at new "," at ");return i.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",i.displayName)),K}while(1<=c&&0<=g);break}}}finally{ky=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?ma(r):""}function C2(i,s){switch(i.tag){case 26:case 27:case 5:return ma(i.type);case 16:return ma("Lazy");case 13:return i.child!==s&&s!==null?ma("Suspense Fallback"):ma("Suspense");case 19:return ma("SuspenseList");case 0:case 15:return By(i.type,!1);case 11:return By(i.type.render,!1);case 1:return By(i.type,!0);case 31:return ma("Activity");default:return""}}function s1(i){try{var s="",r=null;do s+=C2(i,r),r=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Iy=Object.prototype.hasOwnProperty,zy=p.unstable_scheduleCallback,Fy=p.unstable_cancelCallback,T2=p.unstable_shouldYield,x2=p.unstable_requestPaint,cn=p.unstable_now,M2=p.unstable_getCurrentPriorityLevel,a1=p.unstable_ImmediatePriority,r1=p.unstable_UserBlockingPriority,Gp=p.unstable_NormalPriority,R2=p.unstable_LowPriority,o1=p.unstable_IdlePriority,D2=p.log,O2=p.unstable_setDisableYieldValue,md=null,un=null;function Tr(i){if(typeof D2=="function"&&O2(i),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(md,i)}catch{}}var hn=Math.clz32?Math.clz32:k2,N2=Math.log,L2=Math.LN2;function k2(i){return i>>>=0,i===0?32:31-(N2(i)/L2|0)|0}var qp=256,Vp=262144,Yp=4194304;function Qo(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Xp(i,s,r){var c=i.pendingLanes;if(c===0)return 0;var g=0,y=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var x=c&134217727;return x!==0?(c=x&~y,c!==0?g=Qo(c):(S&=x,S!==0?g=Qo(S):r||(r=x&~i,r!==0&&(g=Qo(r))))):(x=c&~y,x!==0?g=Qo(x):S!==0?g=Qo(S):r||(r=c&~i,r!==0&&(g=Qo(r)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:g}function yd(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function B2(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l1(){var i=Yp;return Yp<<=1,(Yp&62914560)===0&&(Yp=4194304),i}function Uy(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function bd(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function I2(i,s,r,c,g,y){var S=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var x=i.entanglements,N=i.expirationTimes,j=i.hiddenUpdates;for(r=S&~r;0<r;){var K=31-hn(r),Q=1<<K;x[K]=0,N[K]=-1;var G=j[K];if(G!==null)for(j[K]=null,K=0;K<G.length;K++){var q=G[K];q!==null&&(q.lane&=-536870913)}r&=~Q}c!==0&&c1(i,c,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(S&~s))}function c1(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-hn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|r&261930}function u1(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var c=31-hn(r),g=1<<c;g&s|i[c]&s&&(i[c]|=s),r&=~g}}function h1(i,s){var r=s&-s;return r=(r&42)!==0?1:Py(r),(r&(i.suspendedLanes|s))!==0?0:r}function Py(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hy(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function d1(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:W_(i.type))}function f1(i,s){var r=X.p;try{return X.p=i,s()}finally{X.p=r}}var xr=Math.random().toString(36).slice(2),fi="__reactFiber$"+xr,Yi="__reactProps$"+xr,jc="__reactContainer$"+xr,jy="__reactEvents$"+xr,z2="__reactListeners$"+xr,F2="__reactHandles$"+xr,g1="__reactResources$"+xr,vd="__reactMarker$"+xr;function Gy(i){delete i[fi],delete i[Yi],delete i[jy],delete i[z2],delete i[F2]}function Gc(i){var s=i[fi];if(s)return s;for(var r=i.parentNode;r;){if(s=r[jc]||r[fi]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=B_(i);i!==null;){if(r=i[fi])return r;i=B_(i)}return s}i=r,r=i.parentNode}return null}function qc(i){if(i=i[fi]||i[jc]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Ad(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Vc(i){var s=i[g1];return s||(s=i[g1]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ni(i){i[vd]=!0}var p1=new Set,m1={};function Wo(i,s){Yc(i,s),Yc(i+"Capture",s)}function Yc(i,s){for(m1[i]=s,i=0;i<s.length;i++)p1.add(s[i])}var U2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),y1={},b1={};function P2(i){return Iy.call(b1,i)?!0:Iy.call(y1,i)?!1:U2.test(i)?b1[i]=!0:(y1[i]=!0,!1)}function Kp(i,s,r){if(P2(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function $p(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function ya(i,s,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+c)}}function qn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function v1(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function H2(i,s,r){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,y.call(this,S)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function qy(i){if(!i._valueTracker){var s=v1(i)?"checked":"value";i._valueTracker=H2(i,s,""+i[s])}}function A1(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return i&&(c=v1(i)?i.checked?"true":"false":i.value),i=c,i!==r?(s.setValue(i),!0):!1}function Qp(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var j2=/[\n"\\]/g;function Vn(i){return i.replace(j2,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vy(i,s,r,c,g,y,S,x){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+qn(s)):i.value!==""+qn(s)&&(i.value=""+qn(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Yy(i,S,qn(s)):r!=null?Yy(i,S,qn(r)):c!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.name=""+qn(x):i.removeAttribute("name")}function S1(i,s,r,c,g,y,S,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){qy(i);return}r=r!=null?""+qn(r):"",s=s!=null?""+qn(s):r,x||s===i.value||(i.value=s),i.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=x?i.checked:!!c,i.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),qy(i)}function Yy(i,s,r){s==="number"&&Qp(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function Xc(i,s,r,c){if(i=i.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<i.length;r++)g=s.hasOwnProperty("$"+i[r].value),i[r].selected!==g&&(i[r].selected=g),g&&c&&(i[r].defaultSelected=!0)}else{for(r=""+qn(r),s=null,g=0;g<i.length;g++){if(i[g].value===r){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function E1(i,s,r){if(s!=null&&(s=""+qn(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+qn(r):""}function w1(i,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(n(92));if(vt(c)){if(1<c.length)throw Error(n(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=qn(s),i.defaultValue=r,c=i.textContent,c===r&&c!==""&&c!==null&&(i.value=c),qy(i)}function Kc(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var G2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _1(i,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,r):typeof r!="number"||r===0||G2.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function C1(i,s,r){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&r[g]!==c&&_1(i,g,c)}else for(var y in s)s.hasOwnProperty(y)&&_1(i,y,s[y])}function Xy(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),V2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wp(i){return V2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ba(){}var Ky=null;function $y(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $c=null,Qc=null;function T1(i){var s=qc(i);if(s&&(i=s.stateNode)){var r=i[Yi]||null;t:switch(i=s.stateNode,s.type){case"input":if(Vy(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Vn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==i&&c.form===i.form){var g=c[Yi]||null;if(!g)throw Error(n(90));Vy(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===i.form&&A1(c)}break t;case"textarea":E1(i,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Xc(i,!!r.multiple,s,!1)}}}var Qy=!1;function x1(i,s,r){if(Qy)return i(s,r);Qy=!0;try{var c=i(s);return c}finally{if(Qy=!1,($c!==null||Qc!==null)&&(Fm(),$c&&(s=$c,i=Qc,Qc=$c=null,T1(s),i)))for(s=0;s<i.length;s++)T1(i[s])}}function Sd(i,s){var r=i.stateNode;if(r===null)return null;var c=r[Yi]||null;if(c===null)return null;r=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(n(231,s,typeof r));return r}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wy=!1;if(va)try{var Ed={};Object.defineProperty(Ed,"passive",{get:function(){Wy=!0}}),window.addEventListener("test",Ed,Ed),window.removeEventListener("test",Ed,Ed)}catch{Wy=!1}var Mr=null,Zy=null,Zp=null;function M1(){if(Zp)return Zp;var i,s=Zy,r=s.length,c,g="value"in Mr?Mr.value:Mr.textContent,y=g.length;for(i=0;i<r&&s[i]===g[i];i++);var S=r-i;for(c=1;c<=S&&s[r-c]===g[y-c];c++);return Zp=g.slice(i,1<c?1-c:void 0)}function Jp(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function tm(){return!0}function R1(){return!1}function Xi(i){function s(r,c,g,y,S){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var x in i)i.hasOwnProperty(x)&&(r=i[x],this[x]=r?r(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?tm:R1,this.isPropagationStopped=R1,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tm)},persist:function(){},isPersistent:tm}),s}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=Xi(Zo),wd=b({},Zo,{view:0,detail:0}),Y2=Xi(wd),Jy,tb,_d,im=b({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ib,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_d&&(_d&&i.type==="mousemove"?(Jy=i.screenX-_d.screenX,tb=i.screenY-_d.screenY):tb=Jy=0,_d=i),Jy)},movementY:function(i){return"movementY"in i?i.movementY:tb}}),D1=Xi(im),X2=b({},im,{dataTransfer:0}),K2=Xi(X2),$2=b({},wd,{relatedTarget:0}),eb=Xi($2),Q2=b({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),W2=Xi(Q2),Z2=b({},Zo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),J2=Xi(Z2),tM=b({},Zo,{data:0}),O1=Xi(tM),eM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sM(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=nM[i])?!!s[i]:!1}function ib(){return sM}var aM=b({},wd,{key:function(i){if(i.key){var s=eM[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Jp(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?iM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ib,charCode:function(i){return i.type==="keypress"?Jp(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Jp(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),rM=Xi(aM),oM=b({},im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N1=Xi(oM),lM=b({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ib}),cM=Xi(lM),uM=b({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hM=Xi(uM),dM=b({},im,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fM=Xi(dM),gM=b({},Zo,{newState:0,oldState:0}),pM=Xi(gM),mM=[9,13,27,32],nb=va&&"CompositionEvent"in window,Cd=null;va&&"documentMode"in document&&(Cd=document.documentMode);var yM=va&&"TextEvent"in window&&!Cd,L1=va&&(!nb||Cd&&8<Cd&&11>=Cd),k1=" ",B1=!1;function I1(i,s){switch(i){case"keyup":return mM.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Wc=!1;function bM(i,s){switch(i){case"compositionend":return z1(s);case"keypress":return s.which!==32?null:(B1=!0,k1);case"textInput":return i=s.data,i===k1&&B1?null:i;default:return null}}function vM(i,s){if(Wc)return i==="compositionend"||!nb&&I1(i,s)?(i=M1(),Zp=Zy=Mr=null,Wc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return L1&&s.locale!=="ko"?null:s.data;default:return null}}var AM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F1(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!AM[i.type]:s==="textarea"}function U1(i,s,r,c){$c?Qc?Qc.push(c):Qc=[c]:$c=c,s=Vm(s,"onChange"),0<s.length&&(r=new em("onChange","change",null,r,c),i.push({event:r,listeners:s}))}var Td=null,xd=null;function SM(i){S_(i,0)}function nm(i){var s=Ad(i);if(A1(s))return i}function P1(i,s){if(i==="change")return s}var H1=!1;if(va){var sb;if(va){var ab="oninput"in document;if(!ab){var j1=document.createElement("div");j1.setAttribute("oninput","return;"),ab=typeof j1.oninput=="function"}sb=ab}else sb=!1;H1=sb&&(!document.documentMode||9<document.documentMode)}function G1(){Td&&(Td.detachEvent("onpropertychange",q1),xd=Td=null)}function q1(i){if(i.propertyName==="value"&&nm(xd)){var s=[];U1(s,xd,i,$y(i)),x1(SM,s)}}function EM(i,s,r){i==="focusin"?(G1(),Td=s,xd=r,Td.attachEvent("onpropertychange",q1)):i==="focusout"&&G1()}function wM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nm(xd)}function _M(i,s){if(i==="click")return nm(s)}function CM(i,s){if(i==="input"||i==="change")return nm(s)}function TM(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var dn=typeof Object.is=="function"?Object.is:TM;function Md(i,s){if(dn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!Iy.call(s,g)||!dn(i[g],s[g]))return!1}return!0}function V1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Y1(i,s){var r=V1(i);i=0;for(var c;r;){if(r.nodeType===3){if(c=i+r.textContent.length,i<=s&&c>=s)return{node:r,offset:s-i};i=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=V1(r)}}function X1(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?X1(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function K1(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Qp(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=Qp(i.document)}return s}function rb(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var xM=va&&"documentMode"in document&&11>=document.documentMode,Zc=null,ob=null,Rd=null,lb=!1;function $1(i,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lb||Zc==null||Zc!==Qp(c)||(c=Zc,"selectionStart"in c&&rb(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Rd&&Md(Rd,c)||(Rd=c,c=Vm(ob,"onSelect"),0<c.length&&(s=new em("onSelect","select",null,s,r),i.push({event:s,listeners:c}),s.target=Zc)))}function Jo(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var Jc={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},cb={},Q1={};va&&(Q1=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function tl(i){if(cb[i])return cb[i];if(!Jc[i])return i;var s=Jc[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in Q1)return cb[i]=s[r];return i}var W1=tl("animationend"),Z1=tl("animationiteration"),J1=tl("animationstart"),MM=tl("transitionrun"),RM=tl("transitionstart"),DM=tl("transitioncancel"),tE=tl("transitionend"),eE=new Map,ub="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ub.push("scrollEnd");function bs(i,s){eE.set(i,s),Wo(s,[i])}var sm=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Yn=[],tu=0,hb=0;function am(){for(var i=tu,s=hb=tu=0;s<i;){var r=Yn[s];Yn[s++]=null;var c=Yn[s];Yn[s++]=null;var g=Yn[s];Yn[s++]=null;var y=Yn[s];if(Yn[s++]=null,c!==null&&g!==null){var S=c.pending;S===null?g.next=g:(g.next=S.next,S.next=g),c.pending=g}y!==0&&iE(r,g,y)}}function rm(i,s,r,c){Yn[tu++]=i,Yn[tu++]=s,Yn[tu++]=r,Yn[tu++]=c,hb|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function db(i,s,r,c){return rm(i,s,r,c),om(i)}function el(i,s){return rm(i,null,null,s),om(i)}function iE(i,s,r){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r);for(var g=!1,y=i.return;y!==null;)y.childLanes|=r,c=y.alternate,c!==null&&(c.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&s!==null&&(g=31-hn(r),i=y.hiddenUpdates,c=i[g],c===null?i[g]=[s]:c.push(s),s.lane=r|536870912),y):null}function om(i){if(50<Wd)throw Wd=0,Sv=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var eu={};function OM(i,s,r,c){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(i,s,r,c){return new OM(i,s,r,c)}function fb(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Aa(i,s){var r=i.alternate;return r===null?(r=fn(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function nE(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function lm(i,s,r,c,g,y){var S=0;if(c=i,typeof i=="function")fb(i)&&(S=1);else if(typeof i=="string")S=IR(i,r,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Y:return i=fn(31,r,s,g),i.elementType=Y,i.lanes=y,i;case C:return il(r.children,g,y,s);case R:S=8,g|=24;break;case M:return i=fn(12,r,s,g|2),i.elementType=M,i.lanes=y,i;case k:return i=fn(13,r,s,g),i.elementType=k,i.lanes=y,i;case z:return i=fn(19,r,s,g),i.elementType=z,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:S=10;break t;case O:S=9;break t;case L:S=11;break t;case F:S=14;break t;case W:S=16,c=null;break t}S=29,r=Error(n(130,i===null?"null":typeof i,"")),c=null}return s=fn(S,r,s,g),s.elementType=i,s.type=c,s.lanes=y,s}function il(i,s,r,c){return i=fn(7,i,c,s),i.lanes=r,i}function gb(i,s,r){return i=fn(6,i,null,s),i.lanes=r,i}function sE(i){var s=fn(18,null,null,0);return s.stateNode=i,s}function pb(i,s,r){return s=fn(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var aE=new WeakMap;function Xn(i,s){if(typeof i=="object"&&i!==null){var r=aE.get(i);return r!==void 0?r:(s={value:i,source:s,stack:s1(s)},aE.set(i,s),s)}return{value:i,source:s,stack:s1(s)}}var iu=[],nu=0,cm=null,Dd=0,Kn=[],$n=0,Rr=null,zs=1,Fs="";function Sa(i,s){iu[nu++]=Dd,iu[nu++]=cm,cm=i,Dd=s}function rE(i,s,r){Kn[$n++]=zs,Kn[$n++]=Fs,Kn[$n++]=Rr,Rr=i;var c=zs;i=Fs;var g=32-hn(c)-1;c&=~(1<<g),r+=1;var y=32-hn(s)+g;if(30<y){var S=g-g%5;y=(c&(1<<S)-1).toString(32),c>>=S,g-=S,zs=1<<32-hn(s)+g|r<<g|c,Fs=y+i}else zs=1<<y|r<<g|c,Fs=i}function mb(i){i.return!==null&&(Sa(i,1),rE(i,1,0))}function yb(i){for(;i===cm;)cm=iu[--nu],iu[nu]=null,Dd=iu[--nu],iu[nu]=null;for(;i===Rr;)Rr=Kn[--$n],Kn[$n]=null,Fs=Kn[--$n],Kn[$n]=null,zs=Kn[--$n],Kn[$n]=null}function oE(i,s){Kn[$n++]=zs,Kn[$n++]=Fs,Kn[$n++]=Rr,zs=s.id,Fs=s.overflow,Rr=i}var gi=null,be=null,Pt=!1,Dr=null,Qn=!1,bb=Error(n(519));function Or(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Od(Xn(s,i)),bb}function lE(i){var s=i.stateNode,r=i.type,c=i.memoizedProps;switch(s[fi]=i,s[Yi]=c,r){case"dialog":It("cancel",s),It("close",s);break;case"iframe":case"object":case"embed":It("load",s);break;case"video":case"audio":for(r=0;r<Jd.length;r++)It(Jd[r],s);break;case"source":It("error",s);break;case"img":case"image":case"link":It("error",s),It("load",s);break;case"details":It("toggle",s);break;case"input":It("invalid",s),S1(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":It("invalid",s);break;case"textarea":It("invalid",s),w1(s,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||C_(s.textContent,r)?(c.popover!=null&&(It("beforetoggle",s),It("toggle",s)),c.onScroll!=null&&It("scroll",s),c.onScrollEnd!=null&&It("scrollend",s),c.onClick!=null&&(s.onclick=ba),s=!0):s=!1,s||Or(i,!0)}function cE(i){for(gi=i.return;gi;)switch(gi.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:gi=gi.return}}function su(i){if(i!==gi)return!1;if(!Pt)return cE(i),Pt=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Iv(i.type,i.memoizedProps)),r=!r),r&&be&&Or(i),cE(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));be=k_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));be=k_(i)}else s===27?(s=be,Vr(i.type)?(i=Hv,Hv=null,be=i):be=s):be=gi?Zn(i.stateNode.nextSibling):null;return!0}function nl(){be=gi=null,Pt=!1}function vb(){var i=Dr;return i!==null&&(Wi===null?Wi=i:Wi.push.apply(Wi,i),Dr=null),i}function Od(i){Dr===null?Dr=[i]:Dr.push(i)}var Ab=B(null),sl=null,Ea=null;function Nr(i,s,r){Z(Ab,s._currentValue),s._currentValue=r}function wa(i){i._currentValue=Ab.current,V(Ab)}function Sb(i,s,r){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===r)break;i=i.return}}function Eb(i,s,r,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;t:for(;y!==null;){var x=y;y=g;for(var N=0;N<s.length;N++)if(x.context===s[N]){y.lanes|=r,x=y.alternate,x!==null&&(x.lanes|=r),Sb(y.return,r,i),c||(S=null);break t}y=x.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(n(341));S.lanes|=r,y=S.alternate,y!==null&&(y.lanes|=r),Sb(S,r,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function au(i,s,r,c){i=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var x=g.type;dn(g.pendingProps.value,S.value)||(i!==null?i.push(x):i=[x])}}else if(g===bt.current){if(S=g.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(af):i=[af])}g=g.return}i!==null&&Eb(s,i,r,c),s.flags|=262144}function um(i){for(i=i.firstContext;i!==null;){if(!dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function al(i){sl=i,Ea=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pi(i){return uE(sl,i)}function hm(i,s){return sl===null&&al(i),uE(i,s)}function uE(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Ea===null){if(i===null)throw Error(n(308));Ea=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ea=Ea.next=s;return r}var NM=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},LM=p.unstable_scheduleCallback,kM=p.unstable_NormalPriority,Pe={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wb(){return{controller:new NM,data:new Map,refCount:0}}function Nd(i){i.refCount--,i.refCount===0&&LM(kM,function(){i.controller.abort()})}var Ld=null,_b=0,ru=0,ou=null;function BM(i,s){if(Ld===null){var r=Ld=[];_b=0,ru=xv(),ou={status:"pending",value:void 0,then:function(c){r.push(c)}}}return _b++,s.then(hE,hE),s}function hE(){if(--_b===0&&Ld!==null){ou!==null&&(ou.status="fulfilled");var i=Ld;Ld=null,ru=0,ou=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function IM(i,s){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var dE=P.S;P.S=function(i,s){$w=cn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&BM(i,s),dE!==null&&dE(i,s)};var rl=B(null);function Cb(){var i=rl.current;return i!==null?i:ce.pooledCache}function dm(i,s){s===null?Z(rl,rl.current):Z(rl,s.pool)}function fE(){var i=Cb();return i===null?null:{parent:Pe._currentValue,pool:i}}var lu=Error(n(460)),Tb=Error(n(474)),fm=Error(n(542)),gm={then:function(){}};function gE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function pE(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(ba,ba),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,yE(i),i;default:if(typeof s.status=="string")s.then(ba,ba);else{if(i=ce,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,yE(i),i}throw ll=s,lu}}function ol(i){try{var s=i._init;return s(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ll=r,lu):r}}var ll=null;function mE(){if(ll===null)throw Error(n(459));var i=ll;return ll=null,i}function yE(i){if(i===lu||i===fm)throw Error(n(483))}var cu=null,kd=0;function pm(i){var s=kd;return kd+=1,cu===null&&(cu=[]),pE(cu,i,s)}function Bd(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function mm(i,s){throw s.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function bE(i){function s(U,I){if(i){var H=U.deletions;H===null?(U.deletions=[I],U.flags|=16):H.push(I)}}function r(U,I){if(!i)return null;for(;I!==null;)s(U,I),I=I.sibling;return null}function c(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function g(U,I){return U=Aa(U,I),U.index=0,U.sibling=null,U}function y(U,I,H){return U.index=H,i?(H=U.alternate,H!==null?(H=H.index,H<I?(U.flags|=67108866,I):H):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function S(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function x(U,I,H,$){return I===null||I.tag!==6?(I=gb(H,U.mode,$),I.return=U,I):(I=g(I,H),I.return=U,I)}function N(U,I,H,$){var pt=H.type;return pt===C?K(U,I,H.props.children,$,H.key):I!==null&&(I.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===W&&ol(pt)===I.type)?(I=g(I,H.props),Bd(I,H),I.return=U,I):(I=lm(H.type,H.key,H.props,null,U.mode,$),Bd(I,H),I.return=U,I)}function j(U,I,H,$){return I===null||I.tag!==4||I.stateNode.containerInfo!==H.containerInfo||I.stateNode.implementation!==H.implementation?(I=pb(H,U.mode,$),I.return=U,I):(I=g(I,H.children||[]),I.return=U,I)}function K(U,I,H,$,pt){return I===null||I.tag!==7?(I=il(H,U.mode,$,pt),I.return=U,I):(I=g(I,H),I.return=U,I)}function Q(U,I,H){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=gb(""+I,U.mode,H),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return H=lm(I.type,I.key,I.props,null,U.mode,H),Bd(H,I),H.return=U,H;case T:return I=pb(I,U.mode,H),I.return=U,I;case W:return I=ol(I),Q(U,I,H)}if(vt(I)||ht(I))return I=il(I,U.mode,H,null),I.return=U,I;if(typeof I.then=="function")return Q(U,pm(I),H);if(I.$$typeof===D)return Q(U,hm(U,I),H);mm(U,I)}return null}function G(U,I,H,$){var pt=I!==null?I.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return pt!==null?null:x(U,I,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return H.key===pt?N(U,I,H,$):null;case T:return H.key===pt?j(U,I,H,$):null;case W:return H=ol(H),G(U,I,H,$)}if(vt(H)||ht(H))return pt!==null?null:K(U,I,H,$,null);if(typeof H.then=="function")return G(U,I,pm(H),$);if(H.$$typeof===D)return G(U,I,hm(U,H),$);mm(U,H)}return null}function q(U,I,H,$,pt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(H)||null,x(I,U,""+$,pt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return U=U.get($.key===null?H:$.key)||null,N(I,U,$,pt);case T:return U=U.get($.key===null?H:$.key)||null,j(I,U,$,pt);case W:return $=ol($),q(U,I,H,$,pt)}if(vt($)||ht($))return U=U.get(H)||null,K(I,U,$,pt,null);if(typeof $.then=="function")return q(U,I,H,pm($),pt);if($.$$typeof===D)return q(U,I,H,hm(I,$),pt);mm(I,$)}return null}function ut(U,I,H,$){for(var pt=null,Vt=null,dt=I,Ot=I=0,Ft=null;dt!==null&&Ot<H.length;Ot++){dt.index>Ot?(Ft=dt,dt=null):Ft=dt.sibling;var Yt=G(U,dt,H[Ot],$);if(Yt===null){dt===null&&(dt=Ft);break}i&&dt&&Yt.alternate===null&&s(U,dt),I=y(Yt,I,Ot),Vt===null?pt=Yt:Vt.sibling=Yt,Vt=Yt,dt=Ft}if(Ot===H.length)return r(U,dt),Pt&&Sa(U,Ot),pt;if(dt===null){for(;Ot<H.length;Ot++)dt=Q(U,H[Ot],$),dt!==null&&(I=y(dt,I,Ot),Vt===null?pt=dt:Vt.sibling=dt,Vt=dt);return Pt&&Sa(U,Ot),pt}for(dt=c(dt);Ot<H.length;Ot++)Ft=q(dt,U,Ot,H[Ot],$),Ft!==null&&(i&&Ft.alternate!==null&&dt.delete(Ft.key===null?Ot:Ft.key),I=y(Ft,I,Ot),Vt===null?pt=Ft:Vt.sibling=Ft,Vt=Ft);return i&&dt.forEach(function(Qr){return s(U,Qr)}),Pt&&Sa(U,Ot),pt}function At(U,I,H,$){if(H==null)throw Error(n(151));for(var pt=null,Vt=null,dt=I,Ot=I=0,Ft=null,Yt=H.next();dt!==null&&!Yt.done;Ot++,Yt=H.next()){dt.index>Ot?(Ft=dt,dt=null):Ft=dt.sibling;var Qr=G(U,dt,Yt.value,$);if(Qr===null){dt===null&&(dt=Ft);break}i&&dt&&Qr.alternate===null&&s(U,dt),I=y(Qr,I,Ot),Vt===null?pt=Qr:Vt.sibling=Qr,Vt=Qr,dt=Ft}if(Yt.done)return r(U,dt),Pt&&Sa(U,Ot),pt;if(dt===null){for(;!Yt.done;Ot++,Yt=H.next())Yt=Q(U,Yt.value,$),Yt!==null&&(I=y(Yt,I,Ot),Vt===null?pt=Yt:Vt.sibling=Yt,Vt=Yt);return Pt&&Sa(U,Ot),pt}for(dt=c(dt);!Yt.done;Ot++,Yt=H.next())Yt=q(dt,U,Ot,Yt.value,$),Yt!==null&&(i&&Yt.alternate!==null&&dt.delete(Yt.key===null?Ot:Yt.key),I=y(Yt,I,Ot),Vt===null?pt=Yt:Vt.sibling=Yt,Vt=Yt);return i&&dt.forEach(function(XR){return s(U,XR)}),Pt&&Sa(U,Ot),pt}function ie(U,I,H,$){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case E:t:{for(var pt=H.key;I!==null;){if(I.key===pt){if(pt=H.type,pt===C){if(I.tag===7){r(U,I.sibling),$=g(I,H.props.children),$.return=U,U=$;break t}}else if(I.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===W&&ol(pt)===I.type){r(U,I.sibling),$=g(I,H.props),Bd($,H),$.return=U,U=$;break t}r(U,I);break}else s(U,I);I=I.sibling}H.type===C?($=il(H.props.children,U.mode,$,H.key),$.return=U,U=$):($=lm(H.type,H.key,H.props,null,U.mode,$),Bd($,H),$.return=U,U=$)}return S(U);case T:t:{for(pt=H.key;I!==null;){if(I.key===pt)if(I.tag===4&&I.stateNode.containerInfo===H.containerInfo&&I.stateNode.implementation===H.implementation){r(U,I.sibling),$=g(I,H.children||[]),$.return=U,U=$;break t}else{r(U,I);break}else s(U,I);I=I.sibling}$=pb(H,U.mode,$),$.return=U,U=$}return S(U);case W:return H=ol(H),ie(U,I,H,$)}if(vt(H))return ut(U,I,H,$);if(ht(H)){if(pt=ht(H),typeof pt!="function")throw Error(n(150));return H=pt.call(H),At(U,I,H,$)}if(typeof H.then=="function")return ie(U,I,pm(H),$);if(H.$$typeof===D)return ie(U,I,hm(U,H),$);mm(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,I!==null&&I.tag===6?(r(U,I.sibling),$=g(I,H),$.return=U,U=$):(r(U,I),$=gb(H,U.mode,$),$.return=U,U=$),S(U)):r(U,I)}return function(U,I,H,$){try{kd=0;var pt=ie(U,I,H,$);return cu=null,pt}catch(dt){if(dt===lu||dt===fm)throw dt;var Vt=fn(29,dt,null,U.mode);return Vt.lanes=$,Vt.return=U,Vt}finally{}}}var cl=bE(!0),vE=bE(!1),Lr=!1;function xb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mb(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function kr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Br(i,s,r){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Xt&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=om(i),iE(i,null,r),s}return rm(i,c,s,r),om(i)}function Id(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,r|=c,s.lanes=r,u1(i,r)}}function Rb(i,s){var r=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,r=r.next}while(r!==null);y===null?g=y=s:y=y.next=s}else g=y=s;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var Db=!1;function zd(){if(Db){var i=ou;if(i!==null)throw i}}function Fd(i,s,r,c){Db=!1;var g=i.updateQueue;Lr=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,x=g.shared.pending;if(x!==null){g.shared.pending=null;var N=x,j=N.next;N.next=null,S===null?y=j:S.next=j,S=N;var K=i.alternate;K!==null&&(K=K.updateQueue,x=K.lastBaseUpdate,x!==S&&(x===null?K.firstBaseUpdate=j:x.next=j,K.lastBaseUpdate=N))}if(y!==null){var Q=g.baseState;S=0,K=j=N=null,x=y;do{var G=x.lane&-536870913,q=G!==x.lane;if(q?(zt&G)===G:(c&G)===G){G!==0&&G===ru&&(Db=!0),K!==null&&(K=K.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var ut=i,At=x;G=s;var ie=r;switch(At.tag){case 1:if(ut=At.payload,typeof ut=="function"){Q=ut.call(ie,Q,G);break t}Q=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=At.payload,G=typeof ut=="function"?ut.call(ie,Q,G):ut,G==null)break t;Q=b({},Q,G);break t;case 2:Lr=!0}}G=x.callback,G!==null&&(i.flags|=64,q&&(i.flags|=8192),q=g.callbacks,q===null?g.callbacks=[G]:q.push(G))}else q={lane:G,tag:x.tag,payload:x.payload,callback:x.callback,next:null},K===null?(j=K=q,N=Q):K=K.next=q,S|=G;if(x=x.next,x===null){if(x=g.shared.pending,x===null)break;q=x,x=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);K===null&&(N=Q),g.baseState=N,g.firstBaseUpdate=j,g.lastBaseUpdate=K,y===null&&(g.shared.lanes=0),Pr|=S,i.lanes=S,i.memoizedState=Q}}function AE(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function SE(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)AE(r[i],s)}var uu=B(null),ym=B(0);function EE(i,s){i=Na,Z(ym,i),Z(uu,s),Na=i|s.baseLanes}function Ob(){Z(ym,Na),Z(uu,uu.current)}function Nb(){Na=ym.current,V(uu),V(ym)}var gn=B(null),Wn=null;function Ir(i){var s=i.alternate;Z(Ie,Ie.current&1),Z(gn,i),Wn===null&&(s===null||uu.current!==null||s.memoizedState!==null)&&(Wn=i)}function Lb(i){Z(Ie,Ie.current),Z(gn,i),Wn===null&&(Wn=i)}function wE(i){i.tag===22?(Z(Ie,Ie.current),Z(gn,i),Wn===null&&(Wn=i)):zr()}function zr(){Z(Ie,Ie.current),Z(gn,gn.current)}function pn(i){V(gn),Wn===i&&(Wn=null),V(Ie)}var Ie=B(0);function bm(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Uv(r)||Pv(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _a=0,Rt=null,te=null,He=null,vm=!1,hu=!1,ul=!1,Am=0,Ud=0,du=null,zM=0;function Me(){throw Error(n(321))}function kb(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!dn(i[r],s[r]))return!1;return!0}function Bb(i,s,r,c,g,y){return _a=y,Rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?rw:Qb,ul=!1,y=r(c,g),ul=!1,hu&&(y=CE(s,r,c,g)),_E(i),y}function _E(i){P.H=jd;var s=te!==null&&te.next!==null;if(_a=0,He=te=Rt=null,vm=!1,Ud=0,du=null,s)throw Error(n(300));i===null||je||(i=i.dependencies,i!==null&&um(i)&&(je=!0))}function CE(i,s,r,c){Rt=i;var g=0;do{if(hu&&(du=null),Ud=0,hu=!1,25<=g)throw Error(n(301));if(g+=1,He=te=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=ow,y=s(r,c)}while(hu);return y}function FM(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?Pd(s):s,i=i.useState()[0],(te!==null?te.memoizedState:null)!==i&&(Rt.flags|=1024),s}function Ib(){var i=Am!==0;return Am=0,i}function zb(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function Fb(i){if(vm){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}vm=!1}_a=0,He=te=Rt=null,hu=!1,Ud=Am=0,du=null}function Ii(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Rt.memoizedState=He=i:He=He.next=i,He}function ze(){if(te===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=te.next;var s=He===null?Rt.memoizedState:He.next;if(s!==null)He=s,te=i;else{if(i===null)throw Rt.alternate===null?Error(n(467)):Error(n(310));te=i,i={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},He===null?Rt.memoizedState=He=i:He=He.next=i}return He}function Sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pd(i){var s=Ud;return Ud+=1,du===null&&(du=[]),i=pE(du,i,s),s=Rt,(He===null?s.memoizedState:He.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?rw:Qb),i}function Em(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Pd(i);if(i.$$typeof===D)return pi(i)}throw Error(n(438,String(i)))}function Ub(i){var s=null,r=Rt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=Rt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Sm(),Rt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),c=0;c<i;c++)r[c]=it;return s.index++,r}function Ca(i,s){return typeof s=="function"?s(i):s}function wm(i){var s=ze();return Pb(s,te,i)}function Pb(i,s,r){var c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var g=i.baseQueue,y=c.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}s.baseQueue=g=y,c.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{s=g.next;var x=S=null,N=null,j=s,K=!1;do{var Q=j.lane&-536870913;if(Q!==j.lane?(zt&Q)===Q:(_a&Q)===Q){var G=j.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Q===ru&&(K=!0);else if((_a&G)===G){j=j.next,G===ru&&(K=!0);continue}else Q={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(x=N=Q,S=y):N=N.next=Q,Rt.lanes|=G,Pr|=G;Q=j.action,ul&&r(y,Q),y=j.hasEagerState?j.eagerState:r(y,Q)}else G={lane:Q,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(x=N=G,S=y):N=N.next=G,Rt.lanes|=Q,Pr|=Q;j=j.next}while(j!==null&&j!==s);if(N===null?S=y:N.next=x,!dn(y,i.memoizedState)&&(je=!0,K&&(r=ou,r!==null)))throw r;i.memoizedState=y,i.baseState=S,i.baseQueue=N,c.lastRenderedState=y}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Hb(i){var s=ze(),r=s.queue;if(r===null)throw Error(n(311));r.lastRenderedReducer=i;var c=r.dispatch,g=r.pending,y=s.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do y=i(y,S.action),S=S.next;while(S!==g);dn(y,s.memoizedState)||(je=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,c]}function TE(i,s,r){var c=Rt,g=ze(),y=Pt;if(y){if(r===void 0)throw Error(n(407));r=r()}else r=s();var S=!dn((te||g).memoizedState,r);if(S&&(g.memoizedState=r,je=!0),g=g.queue,qb(RE.bind(null,c,g,i),[i]),g.getSnapshot!==s||S||He!==null&&He.memoizedState.tag&1){if(c.flags|=2048,fu(9,{destroy:void 0},ME.bind(null,c,g,r,s),null),ce===null)throw Error(n(349));y||(_a&127)!==0||xE(c,s,r)}return r}function xE(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=Rt.updateQueue,s===null?(s=Sm(),Rt.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function ME(i,s,r,c){s.value=r,s.getSnapshot=c,DE(s)&&OE(i)}function RE(i,s,r){return r(function(){DE(s)&&OE(i)})}function DE(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!dn(i,r)}catch{return!0}}function OE(i){var s=el(i,2);s!==null&&Zi(s,i,2)}function jb(i){var s=Ii();if(typeof i=="function"){var r=i;if(i=r(),ul){Tr(!0);try{r()}finally{Tr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:i},s}function NE(i,s,r,c){return i.baseState=r,Pb(i,te,typeof c=="function"?c:Ca)}function UM(i,s,r,c,g){if(Tm(i))throw Error(n(485));if(i=s.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};P.T!==null?r(!0):y.isTransition=!1,c(y),r=s.pending,r===null?(y.next=s.pending=y,LE(s,y)):(y.next=r.next,s.pending=r.next=y)}}function LE(i,s){var r=s.action,c=s.payload,g=i.state;if(s.isTransition){var y=P.T,S={};P.T=S;try{var x=r(g,c),N=P.S;N!==null&&N(S,x),kE(i,s,x)}catch(j){Gb(i,s,j)}finally{y!==null&&S.types!==null&&(y.types=S.types),P.T=y}}else try{y=r(g,c),kE(i,s,y)}catch(j){Gb(i,s,j)}}function kE(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){BE(i,s,c)},function(c){return Gb(i,s,c)}):BE(i,s,r)}function BE(i,s,r){s.status="fulfilled",s.value=r,IE(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,LE(i,r)))}function Gb(i,s,r){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,IE(s),s=s.next;while(s!==c)}i.action=null}function IE(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function zE(i,s){return s}function FE(i,s){if(Pt){var r=ce.formState;if(r!==null){t:{var c=Rt;if(Pt){if(be){e:{for(var g=be,y=Qn;g.nodeType!==8;){if(!y){g=null;break e}if(g=Zn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){be=Zn(g.nextSibling),c=g.data==="F!";break t}}Or(c)}c=!1}c&&(s=r[0])}}return r=Ii(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zE,lastRenderedState:s},r.queue=c,r=nw.bind(null,Rt,c),c.dispatch=r,c=jb(!1),y=$b.bind(null,Rt,!1,c.queue),c=Ii(),g={state:s,dispatch:null,action:i,pending:null},c.queue=g,r=UM.bind(null,Rt,g,y,r),g.dispatch=r,c.memoizedState=i,[s,r,!1]}function UE(i){var s=ze();return PE(s,te,i)}function PE(i,s,r){if(s=Pb(i,s,zE)[0],i=wm(Ca)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Pd(s)}catch(S){throw S===lu?fm:S}else c=s;s=ze();var g=s.queue,y=g.dispatch;return r!==s.memoizedState&&(Rt.flags|=2048,fu(9,{destroy:void 0},PM.bind(null,g,r),null)),[c,y,i]}function PM(i,s){i.action=s}function HE(i){var s=ze(),r=te;if(r!==null)return PE(s,r,i);ze(),s=s.memoizedState,r=ze();var c=r.queue.dispatch;return r.memoizedState=i,[s,c,!1]}function fu(i,s,r,c){return i={tag:i,create:r,deps:c,inst:s,next:null},s=Rt.updateQueue,s===null&&(s=Sm(),Rt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(c=r.next,r.next=i,i.next=c,s.lastEffect=i),i}function jE(){return ze().memoizedState}function _m(i,s,r,c){var g=Ii();Rt.flags|=i,g.memoizedState=fu(1|s,{destroy:void 0},r,c===void 0?null:c)}function Cm(i,s,r,c){var g=ze();c=c===void 0?null:c;var y=g.memoizedState.inst;te!==null&&c!==null&&kb(c,te.memoizedState.deps)?g.memoizedState=fu(s,y,r,c):(Rt.flags|=i,g.memoizedState=fu(1|s,y,r,c))}function GE(i,s){_m(8390656,8,i,s)}function qb(i,s){Cm(2048,8,i,s)}function HM(i){Rt.flags|=4;var s=Rt.updateQueue;if(s===null)s=Sm(),Rt.updateQueue=s,s.events=[i];else{var r=s.events;r===null?s.events=[i]:r.push(i)}}function qE(i){var s=ze().memoizedState;return HM({ref:s,nextImpl:i}),function(){if((Xt&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function VE(i,s){return Cm(4,2,i,s)}function YE(i,s){return Cm(4,4,i,s)}function XE(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function KE(i,s,r){r=r!=null?r.concat([i]):null,Cm(4,4,XE.bind(null,s,i),r)}function Vb(){}function $E(i,s){var r=ze();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&kb(s,c[1])?c[0]:(r.memoizedState=[i,s],i)}function QE(i,s){var r=ze();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&kb(s,c[1]))return c[0];if(c=i(),ul){Tr(!0);try{i()}finally{Tr(!1)}}return r.memoizedState=[c,s],c}function Yb(i,s,r){return r===void 0||(_a&1073741824)!==0&&(zt&261930)===0?i.memoizedState=s:(i.memoizedState=r,i=Ww(),Rt.lanes|=i,Pr|=i,r)}function WE(i,s,r,c){return dn(r,s)?r:uu.current!==null?(i=Yb(i,r,c),dn(i,s)||(je=!0),i):(_a&42)===0||(_a&1073741824)!==0&&(zt&261930)===0?(je=!0,i.memoizedState=r):(i=Ww(),Rt.lanes|=i,Pr|=i,s)}function ZE(i,s,r,c,g){var y=X.p;X.p=y!==0&&8>y?y:8;var S=P.T,x={};P.T=x,$b(i,!1,s,r);try{var N=g(),j=P.S;if(j!==null&&j(x,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=IM(N,c);Hd(i,s,K,bn(i))}else Hd(i,s,c,bn(i))}catch(Q){Hd(i,s,{then:function(){},status:"rejected",reason:Q},bn())}finally{X.p=y,S!==null&&x.types!==null&&(S.types=x.types),P.T=S}}function jM(){}function Xb(i,s,r,c){if(i.tag!==5)throw Error(n(476));var g=JE(i).queue;ZE(i,g,s,nt,r===null?jM:function(){return tw(i),r(c)})}function JE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:nt},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function tw(i){var s=JE(i);s.next===null&&(s=i.alternate.memoizedState),Hd(i,s.next.queue,{},bn())}function Kb(){return pi(af)}function ew(){return ze().memoizedState}function iw(){return ze().memoizedState}function GM(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=bn();i=kr(r);var c=Br(s,i,r);c!==null&&(Zi(c,s,r),Id(c,s,r)),s={cache:wb()},i.payload=s;return}s=s.return}}function qM(i,s,r){var c=bn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Tm(i)?sw(s,r):(r=db(i,s,r,c),r!==null&&(Zi(r,i,c),aw(r,s,c)))}function nw(i,s,r){var c=bn();Hd(i,s,r,c)}function Hd(i,s,r,c){var g={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Tm(i))sw(s,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,x=y(S,r);if(g.hasEagerState=!0,g.eagerState=x,dn(x,S))return rm(i,s,g,0),ce===null&&am(),!1}catch{}finally{}if(r=db(i,s,g,c),r!==null)return Zi(r,i,c),aw(r,s,c),!0}return!1}function $b(i,s,r,c){if(c={lane:2,revertLane:xv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tm(i)){if(s)throw Error(n(479))}else s=db(i,r,c,2),s!==null&&Zi(s,i,2)}function Tm(i){var s=i.alternate;return i===Rt||s!==null&&s===Rt}function sw(i,s){hu=vm=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function aw(i,s,r){if((r&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,r|=c,s.lanes=r,u1(i,r)}}var jd={readContext:pi,use:Em,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me};jd.useEffectEvent=Me;var rw={readContext:pi,use:Em,useCallback:function(i,s){return Ii().memoizedState=[i,s===void 0?null:s],i},useContext:pi,useEffect:GE,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,_m(4194308,4,XE.bind(null,s,i),r)},useLayoutEffect:function(i,s){return _m(4194308,4,i,s)},useInsertionEffect:function(i,s){_m(4,2,i,s)},useMemo:function(i,s){var r=Ii();s=s===void 0?null:s;var c=i();if(ul){Tr(!0);try{i()}finally{Tr(!1)}}return r.memoizedState=[c,s],c},useReducer:function(i,s,r){var c=Ii();if(r!==void 0){var g=r(s);if(ul){Tr(!0);try{r(s)}finally{Tr(!1)}}}else g=s;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=qM.bind(null,Rt,i),[c.memoizedState,i]},useRef:function(i){var s=Ii();return i={current:i},s.memoizedState=i},useState:function(i){i=jb(i);var s=i.queue,r=nw.bind(null,Rt,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:Vb,useDeferredValue:function(i,s){var r=Ii();return Yb(r,i,s)},useTransition:function(){var i=jb(!1);return i=ZE.bind(null,Rt,i.queue,!0,!1),Ii().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var c=Rt,g=Ii();if(Pt){if(r===void 0)throw Error(n(407));r=r()}else{if(r=s(),ce===null)throw Error(n(349));(zt&127)!==0||xE(c,s,r)}g.memoizedState=r;var y={value:r,getSnapshot:s};return g.queue=y,GE(RE.bind(null,c,y,i),[i]),c.flags|=2048,fu(9,{destroy:void 0},ME.bind(null,c,y,r,s),null),r},useId:function(){var i=Ii(),s=ce.identifierPrefix;if(Pt){var r=Fs,c=zs;r=(c&~(1<<32-hn(c)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Am++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=zM++,s="_"+s+"r_"+r.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Kb,useFormState:FE,useActionState:FE,useOptimistic:function(i){var s=Ii();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=$b.bind(null,Rt,!0,r),r.dispatch=s,[i,s]},useMemoCache:Ub,useCacheRefresh:function(){return Ii().memoizedState=GM.bind(null,Rt)},useEffectEvent:function(i){var s=Ii(),r={impl:i};return s.memoizedState=r,function(){if((Xt&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}},Qb={readContext:pi,use:Em,useCallback:$E,useContext:pi,useEffect:qb,useImperativeHandle:KE,useInsertionEffect:VE,useLayoutEffect:YE,useMemo:QE,useReducer:wm,useRef:jE,useState:function(){return wm(Ca)},useDebugValue:Vb,useDeferredValue:function(i,s){var r=ze();return WE(r,te.memoizedState,i,s)},useTransition:function(){var i=wm(Ca)[0],s=ze().memoizedState;return[typeof i=="boolean"?i:Pd(i),s]},useSyncExternalStore:TE,useId:ew,useHostTransitionStatus:Kb,useFormState:UE,useActionState:UE,useOptimistic:function(i,s){var r=ze();return NE(r,te,i,s)},useMemoCache:Ub,useCacheRefresh:iw};Qb.useEffectEvent=qE;var ow={readContext:pi,use:Em,useCallback:$E,useContext:pi,useEffect:qb,useImperativeHandle:KE,useInsertionEffect:VE,useLayoutEffect:YE,useMemo:QE,useReducer:Hb,useRef:jE,useState:function(){return Hb(Ca)},useDebugValue:Vb,useDeferredValue:function(i,s){var r=ze();return te===null?Yb(r,i,s):WE(r,te.memoizedState,i,s)},useTransition:function(){var i=Hb(Ca)[0],s=ze().memoizedState;return[typeof i=="boolean"?i:Pd(i),s]},useSyncExternalStore:TE,useId:ew,useHostTransitionStatus:Kb,useFormState:HE,useActionState:HE,useOptimistic:function(i,s){var r=ze();return te!==null?NE(r,te,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:Ub,useCacheRefresh:iw};ow.useEffectEvent=qE;function Wb(i,s,r,c){s=i.memoizedState,r=r(c,s),r=r==null?s:b({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var Zb={enqueueSetState:function(i,s,r){i=i._reactInternals;var c=bn(),g=kr(c);g.payload=s,r!=null&&(g.callback=r),s=Br(i,g,c),s!==null&&(Zi(s,i,c),Id(s,i,c))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var c=bn(),g=kr(c);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=Br(i,g,c),s!==null&&(Zi(s,i,c),Id(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=bn(),c=kr(r);c.tag=2,s!=null&&(c.callback=s),s=Br(i,c,r),s!==null&&(Zi(s,i,r),Id(s,i,r))}};function lw(i,s,r,c,g,y,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,S):s.prototype&&s.prototype.isPureReactComponent?!Md(r,c)||!Md(g,y):!0}function cw(i,s,r,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==i&&Zb.enqueueReplaceState(s,s.state,null)}function hl(i,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(i=i.defaultProps){r===s&&(r=b({},r));for(var g in i)r[g]===void 0&&(r[g]=i[g])}return r}function uw(i){sm(i)}function hw(i){console.error(i)}function dw(i){sm(i)}function xm(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function fw(i,s,r){try{var c=i.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Jb(i,s,r){return r=kr(r),r.tag=3,r.payload={element:null},r.callback=function(){xm(i,s)},r}function gw(i){return i=kr(i),i.tag=3,i}function pw(i,s,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var y=c.value;i.payload=function(){return g(y)},i.callback=function(){fw(s,r,c)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){fw(s,r,c),typeof g!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function VM(i,s,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&au(s,r,g,!0),r=gn.current,r!==null){switch(r.tag){case 31:case 13:return Wn===null?Um():r.alternate===null&&Re===0&&(Re=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===gm?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),_v(i,c,g)),!1;case 22:return r.flags|=65536,c===gm?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),_v(i,c,g)),!1}throw Error(n(435,r.tag))}return _v(i,c,g),Um(),!1}if(Pt)return s=gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==bb&&(i=Error(n(422),{cause:c}),Od(Xn(i,r)))):(c!==bb&&(s=Error(n(423),{cause:c}),Od(Xn(s,r))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=Xn(c,r),g=Jb(i.stateNode,c,g),Rb(i,g),Re!==4&&(Re=2)),!1;var y=Error(n(520),{cause:c});if(y=Xn(y,r),Qd===null?Qd=[y]:Qd.push(y),Re!==4&&(Re=2),s===null)return!0;c=Xn(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=g&-g,r.lanes|=i,i=Jb(r.stateNode,c,i),Rb(r,i),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hr===null||!Hr.has(y))))return r.flags|=65536,g&=-g,r.lanes|=g,g=gw(g),pw(g,i,r,c),Rb(r,g),!1}r=r.return}while(r!==null);return!1}var tv=Error(n(461)),je=!1;function mi(i,s,r,c){s.child=i===null?vE(s,null,r,c):cl(s,i.child,r,c)}function mw(i,s,r,c,g){r=r.render;var y=s.ref;if("ref"in c){var S={};for(var x in c)x!=="ref"&&(S[x]=c[x])}else S=c;return al(s),c=Bb(i,s,r,S,y,g),x=Ib(),i!==null&&!je?(zb(i,s,g),Ta(i,s,g)):(Pt&&x&&mb(s),s.flags|=1,mi(i,s,c,g),s.child)}function yw(i,s,r,c,g){if(i===null){var y=r.type;return typeof y=="function"&&!fb(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,bw(i,s,y,c,g)):(i=lm(r.type,null,c,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!lv(i,g)){var S=y.memoizedProps;if(r=r.compare,r=r!==null?r:Md,r(S,c)&&i.ref===s.ref)return Ta(i,s,g)}return s.flags|=1,i=Aa(y,c),i.ref=s.ref,i.return=s,s.child=i}function bw(i,s,r,c,g){if(i!==null){var y=i.memoizedProps;if(Md(y,c)&&i.ref===s.ref)if(je=!1,s.pendingProps=c=y,lv(i,g))(i.flags&131072)!==0&&(je=!0);else return s.lanes=i.lanes,Ta(i,s,g)}return ev(i,s,r,c,g)}function vw(i,s,r,c){var g=c.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,i!==null){for(c=s.child=i.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~y}else c=0,s.child=null;return Aw(i,s,y,r,c)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&dm(s,y!==null?y.cachePool:null),y!==null?EE(s,y):Ob(),wE(s);else return c=s.lanes=536870912,Aw(i,s,y!==null?y.baseLanes|r:r,r,c)}else y!==null?(dm(s,y.cachePool),EE(s,y),zr(),s.memoizedState=null):(i!==null&&dm(s,null),Ob(),zr());return mi(i,s,g,r),s.child}function Gd(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Aw(i,s,r,c,g){var y=Cb();return y=y===null?null:{parent:Pe._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},i!==null&&dm(s,null),Ob(),wE(s),i!==null&&au(i,s,c,!0),s.childLanes=g,null}function Mm(i,s){return s=Dm({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Sw(i,s,r){return cl(s,i.child,null,r),i=Mm(s,s.pendingProps),i.flags|=2,pn(s),s.memoizedState=null,i}function YM(i,s,r){var c=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Pt){if(c.mode==="hidden")return i=Mm(s,c),s.lanes=536870912,Gd(null,i);if(Lb(s),(i=be)?(i=L_(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Rr!==null?{id:zs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},r=sE(i),r.return=s,s.child=r,gi=s,be=null)):i=null,i===null)throw Or(s);return s.lanes=536870912,null}return Mm(s,c)}var y=i.memoizedState;if(y!==null){var S=y.dehydrated;if(Lb(s),g)if(s.flags&256)s.flags&=-257,s=Sw(i,s,r);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(je||au(i,s,r,!1),g=(r&i.childLanes)!==0,je||g){if(c=ce,c!==null&&(S=h1(c,r),S!==0&&S!==y.retryLane))throw y.retryLane=S,el(i,S),Zi(c,i,S),tv;Um(),s=Sw(i,s,r)}else i=y.treeContext,be=Zn(S.nextSibling),gi=s,Pt=!0,Dr=null,Qn=!1,i!==null&&oE(s,i),s=Mm(s,c),s.flags|=4096;return s}return i=Aa(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Rm(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(n(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function ev(i,s,r,c,g){return al(s),r=Bb(i,s,r,c,void 0,g),c=Ib(),i!==null&&!je?(zb(i,s,g),Ta(i,s,g)):(Pt&&c&&mb(s),s.flags|=1,mi(i,s,r,g),s.child)}function Ew(i,s,r,c,g,y){return al(s),s.updateQueue=null,r=CE(s,c,r,g),_E(i),c=Ib(),i!==null&&!je?(zb(i,s,y),Ta(i,s,y)):(Pt&&c&&mb(s),s.flags|=1,mi(i,s,r,y),s.child)}function ww(i,s,r,c,g){if(al(s),s.stateNode===null){var y=eu,S=r.contextType;typeof S=="object"&&S!==null&&(y=pi(S)),y=new r(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Zb,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},xb(s),S=r.contextType,y.context=typeof S=="object"&&S!==null?pi(S):eu,y.state=s.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Wb(s,r,S,c),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Zb.enqueueReplaceState(y,y.state,null),Fd(s,c,y,g),zd(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){y=s.stateNode;var x=s.memoizedProps,N=hl(r,x);y.props=N;var j=y.context,K=r.contextType;S=eu,typeof K=="object"&&K!==null&&(S=pi(K));var Q=r.getDerivedStateFromProps;K=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,K||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||j!==S)&&cw(s,y,c,S),Lr=!1;var G=s.memoizedState;y.state=G,Fd(s,c,y,g),zd(),j=s.memoizedState,x||G!==j||Lr?(typeof Q=="function"&&(Wb(s,r,Q,c),j=s.memoizedState),(N=Lr||lw(s,r,N,c,G,j,S))?(K||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),y.props=c,y.state=j,y.context=S,c=N):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,Mb(i,s),S=s.memoizedProps,K=hl(r,S),y.props=K,Q=s.pendingProps,G=y.context,j=r.contextType,N=eu,typeof j=="object"&&j!==null&&(N=pi(j)),x=r.getDerivedStateFromProps,(j=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Q||G!==N)&&cw(s,y,c,N),Lr=!1,G=s.memoizedState,y.state=G,Fd(s,c,y,g),zd();var q=s.memoizedState;S!==Q||G!==q||Lr||i!==null&&i.dependencies!==null&&um(i.dependencies)?(typeof x=="function"&&(Wb(s,r,x,c),q=s.memoizedState),(K=Lr||lw(s,r,K,c,G,q,N)||i!==null&&i.dependencies!==null&&um(i.dependencies))?(j||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,q,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,q,N)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=q),y.props=c,y.state=q,y.context=N,c=K):(typeof y.componentDidUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),c=!1)}return y=c,Rm(i,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&c?(s.child=cl(s,i.child,null,g),s.child=cl(s,null,r,g)):mi(i,s,r,g),s.memoizedState=y.state,i=s.child):i=Ta(i,s,g),i}function _w(i,s,r,c){return nl(),s.flags|=256,mi(i,s,r,c),s.child}var iv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nv(i){return{baseLanes:i,cachePool:fE()}}function sv(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=yn),i}function Cw(i,s,r){var c=s.pendingProps,g=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=i!==null&&i.memoizedState===null?!1:(Ie.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(Pt){if(g?Ir(s):zr(),(i=be)?(i=L_(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Rr!==null?{id:zs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},r=sE(i),r.return=s,s.child=r,gi=s,be=null)):i=null,i===null)throw Or(s);return Pv(i)?s.lanes=32:s.lanes=536870912,null}var x=c.children;return c=c.fallback,g?(zr(),g=s.mode,x=Dm({mode:"hidden",children:x},g),c=il(c,g,r,null),x.return=s,c.return=s,x.sibling=c,s.child=x,c=s.child,c.memoizedState=nv(r),c.childLanes=sv(i,S,r),s.memoizedState=iv,Gd(null,c)):(Ir(s),av(s,x))}var N=i.memoizedState;if(N!==null&&(x=N.dehydrated,x!==null)){if(y)s.flags&256?(Ir(s),s.flags&=-257,s=rv(i,s,r)):s.memoizedState!==null?(zr(),s.child=i.child,s.flags|=128,s=null):(zr(),x=c.fallback,g=s.mode,c=Dm({mode:"visible",children:c.children},g),x=il(x,g,r,null),x.flags|=2,c.return=s,x.return=s,c.sibling=x,s.child=c,cl(s,i.child,null,r),c=s.child,c.memoizedState=nv(r),c.childLanes=sv(i,S,r),s.memoizedState=iv,s=Gd(null,c));else if(Ir(s),Pv(x)){if(S=x.nextSibling&&x.nextSibling.dataset,S)var j=S.dgst;S=j,c=Error(n(419)),c.stack="",c.digest=S,Od({value:c,source:null,stack:null}),s=rv(i,s,r)}else if(je||au(i,s,r,!1),S=(r&i.childLanes)!==0,je||S){if(S=ce,S!==null&&(c=h1(S,r),c!==0&&c!==N.retryLane))throw N.retryLane=c,el(i,c),Zi(S,i,c),tv;Uv(x)||Um(),s=rv(i,s,r)}else Uv(x)?(s.flags|=192,s.child=i.child,s=null):(i=N.treeContext,be=Zn(x.nextSibling),gi=s,Pt=!0,Dr=null,Qn=!1,i!==null&&oE(s,i),s=av(s,c.children),s.flags|=4096);return s}return g?(zr(),x=c.fallback,g=s.mode,N=i.child,j=N.sibling,c=Aa(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,j!==null?x=Aa(j,x):(x=il(x,g,r,null),x.flags|=2),x.return=s,c.return=s,c.sibling=x,s.child=c,Gd(null,c),c=s.child,x=i.child.memoizedState,x===null?x=nv(r):(g=x.cachePool,g!==null?(N=Pe._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=fE(),x={baseLanes:x.baseLanes|r,cachePool:g}),c.memoizedState=x,c.childLanes=sv(i,S,r),s.memoizedState=iv,Gd(i.child,c)):(Ir(s),r=i.child,i=r.sibling,r=Aa(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=r,s.memoizedState=null,r)}function av(i,s){return s=Dm({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Dm(i,s){return i=fn(22,i,null,s),i.lanes=0,i}function rv(i,s,r){return cl(s,i.child,null,r),i=av(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Tw(i,s,r){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Sb(i.return,s,r)}function ov(i,s,r,c,g,y){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=r,S.tailMode=g,S.treeForkCount=y)}function xw(i,s,r){var c=s.pendingProps,g=c.revealOrder,y=c.tail;c=c.children;var S=Ie.current,x=(S&2)!==0;if(x?(S=S&1|2,s.flags|=128):S&=1,Z(Ie,S),mi(i,s,c,r),c=Pt?Dd:0,!x&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Tw(i,r,s);else if(i.tag===19)Tw(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(r=s.child,g=null;r!==null;)i=r.alternate,i!==null&&bm(i)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),ov(s,!1,g,r,y,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&bm(i)===null){s.child=g;break}i=g.sibling,g.sibling=r,r=g,g=i}ov(s,!0,r,null,y,c);break;case"together":ov(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Ta(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),Pr|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(au(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,r=Aa(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=Aa(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function lv(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&um(i)))}function XM(i,s,r){switch(s.tag){case 3:Ke(s,s.stateNode.containerInfo),Nr(s,Pe,i.memoizedState.cache),nl();break;case 27:case 5:ys(s);break;case 4:Ke(s,s.stateNode.containerInfo);break;case 10:Nr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Lb(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ir(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Cw(i,s,r):(Ir(s),i=Ta(i,s,r),i!==null?i.sibling:null);Ir(s);break;case 19:var g=(i.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(au(i,s,r,!1),c=(r&s.childLanes)!==0),g){if(c)return xw(i,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(Ie,Ie.current),c)break;return null;case 22:return s.lanes=0,vw(i,s,r,s.pendingProps);case 24:Nr(s,Pe,i.memoizedState.cache)}return Ta(i,s,r)}function Mw(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)je=!0;else{if(!lv(i,r)&&(s.flags&128)===0)return je=!1,XM(i,s,r);je=(i.flags&131072)!==0}else je=!1,Pt&&(s.flags&1048576)!==0&&rE(s,Dd,s.index);switch(s.lanes=0,s.tag){case 16:t:{var c=s.pendingProps;if(i=ol(s.elementType),s.type=i,typeof i=="function")fb(i)?(c=hl(i,c),s.tag=1,s=ww(null,s,i,c,r)):(s.tag=0,s=ev(null,s,i,c,r));else{if(i!=null){var g=i.$$typeof;if(g===L){s.tag=11,s=mw(null,s,i,c,r);break t}else if(g===F){s.tag=14,s=yw(null,s,i,c,r);break t}}throw s=mt(i)||i,Error(n(306,s,""))}}return s;case 0:return ev(i,s,s.type,s.pendingProps,r);case 1:return c=s.type,g=hl(c,s.pendingProps),ww(i,s,c,g,r);case 3:t:{if(Ke(s,s.stateNode.containerInfo),i===null)throw Error(n(387));c=s.pendingProps;var y=s.memoizedState;g=y.element,Mb(i,s),Fd(s,c,null,r);var S=s.memoizedState;if(c=S.cache,Nr(s,Pe,c),c!==y.cache&&Eb(s,[Pe],r,!0),zd(),c=S.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=_w(i,s,c,r);break t}else if(c!==g){g=Xn(Error(n(424)),s),Od(g),s=_w(i,s,c,r);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(be=Zn(i.firstChild),gi=s,Pt=!0,Dr=null,Qn=!0,r=vE(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(nl(),c===g){s=Ta(i,s,r);break t}mi(i,s,c,r)}s=s.child}return s;case 26:return Rm(i,s),i===null?(r=U_(s.type,null,s.pendingProps,null))?s.memoizedState=r:Pt||(r=s.type,i=s.pendingProps,c=Ym(yt.current).createElement(r),c[fi]=s,c[Yi]=i,yi(c,r,i),ni(c),s.stateNode=c):s.memoizedState=U_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ys(s),i===null&&Pt&&(c=s.stateNode=I_(s.type,s.pendingProps,yt.current),gi=s,Qn=!0,g=be,Vr(s.type)?(Hv=g,be=Zn(c.firstChild)):be=g),mi(i,s,s.pendingProps.children,r),Rm(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Pt&&((g=c=be)&&(c=wR(c,s.type,s.pendingProps,Qn),c!==null?(s.stateNode=c,gi=s,be=Zn(c.firstChild),Qn=!1,g=!0):g=!1),g||Or(s)),ys(s),g=s.type,y=s.pendingProps,S=i!==null?i.memoizedProps:null,c=y.children,Iv(g,y)?c=null:S!==null&&Iv(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Bb(i,s,FM,null,null,r),af._currentValue=g),Rm(i,s),mi(i,s,c,r),s.child;case 6:return i===null&&Pt&&((i=r=be)&&(r=_R(r,s.pendingProps,Qn),r!==null?(s.stateNode=r,gi=s,be=null,i=!0):i=!1),i||Or(s)),null;case 13:return Cw(i,s,r);case 4:return Ke(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=cl(s,null,c,r):mi(i,s,c,r),s.child;case 11:return mw(i,s,s.type,s.pendingProps,r);case 7:return mi(i,s,s.pendingProps,r),s.child;case 8:return mi(i,s,s.pendingProps.children,r),s.child;case 12:return mi(i,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Nr(s,s.type,c.value),mi(i,s,c.children,r),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,al(s),g=pi(g),c=c(g),s.flags|=1,mi(i,s,c,r),s.child;case 14:return yw(i,s,s.type,s.pendingProps,r);case 15:return bw(i,s,s.type,s.pendingProps,r);case 19:return xw(i,s,r);case 31:return YM(i,s,r);case 22:return vw(i,s,r,s.pendingProps);case 24:return al(s),c=pi(Pe),i===null?(g=Cb(),g===null&&(g=ce,y=wb(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=r),g=y),s.memoizedState={parent:c,cache:g},xb(s),Nr(s,Pe,g)):((i.lanes&r)!==0&&(Mb(i,s),Fd(s,null,null,r),zd()),g=i.memoizedState,y=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Nr(s,Pe,c)):(c=y.cache,Nr(s,Pe,c),c!==g.cache&&Eb(s,[Pe],r,!0))),mi(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function xa(i){i.flags|=4}function cv(i,s,r,c,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(e_())i.flags|=8192;else throw ll=gm,Tb}else i.flags&=-16777217}function Rw(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!q_(s))if(e_())i.flags|=8192;else throw ll=gm,Tb}function Om(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?l1():536870912,i.lanes|=s,yu|=s)}function qd(i,s){if(!Pt)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ve(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,c=0;if(s)for(var g=i.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=r,s}function KM(i,s,r){var c=s.pendingProps;switch(yb(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(s),null;case 1:return ve(s),null;case 3:return r=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),wa(Pe),ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(su(s)?xa(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vb())),ve(s),null;case 26:var g=s.type,y=s.memoizedState;return i===null?(xa(s),y!==null?(ve(s),Rw(s,y)):(ve(s),cv(s,g,null,c,r))):y?y!==i.memoizedState?(xa(s),ve(s),Rw(s,y)):(ve(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&xa(s),ve(s),cv(s,g,i,c,r)),null;case 27:if(Gn(s),r=yt.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&xa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return ve(s),null}i=at.current,su(s)?lE(s):(i=I_(g,c,r),s.stateNode=i,xa(s))}return ve(s),null;case 5:if(Gn(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&xa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return ve(s),null}if(y=at.current,su(s))lE(s);else{var S=Ym(yt.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?S.createElement(g,{is:c.is}):S.createElement(g)}}y[fi]=s,y[Yi]=c;t:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break t;for(;S.sibling===null;){if(S.return===null||S.return===s)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;t:switch(yi(y,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&xa(s)}}return ve(s),cv(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,r),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&xa(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(i=yt.current,su(s)){if(i=s.stateNode,r=s.memoizedProps,c=null,g=gi,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[fi]=s,i=!!(i.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||C_(i.nodeValue,r)),i||Or(s,!0)}else i=Ym(i).createTextNode(c),i[fi]=s,s.stateNode=i}return ve(s),null;case 31:if(r=s.memoizedState,i===null||i.memoizedState!==null){if(c=su(s),r!==null){if(i===null){if(!c)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[fi]=s}else nl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ve(s),i=!1}else r=vb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return s.flags&256?(pn(s),s):(pn(s),null);if((s.flags&128)!==0)throw Error(n(558))}return ve(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=su(s),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[fi]=s}else nl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ve(s),g=!1}else g=vb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(pn(s),s):(pn(s),null)}return pn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=c!==null,i=i!==null&&i.memoizedState!==null,r&&(c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==g&&(c.flags|=2048)),r!==i&&r&&(s.child.flags|=8192),Om(s,s.updateQueue),ve(s),null);case 4:return ye(),i===null&&Ov(s.stateNode.containerInfo),ve(s),null;case 10:return wa(s.type),ve(s),null;case 19:if(V(Ie),c=s.memoizedState,c===null)return ve(s),null;if(g=(s.flags&128)!==0,y=c.rendering,y===null)if(g)qd(c,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=bm(i),y!==null){for(s.flags|=128,qd(c,!1),i=y.updateQueue,s.updateQueue=i,Om(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)nE(r,i),r=r.sibling;return Z(Ie,Ie.current&1|2),Pt&&Sa(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&cn()>Im&&(s.flags|=128,g=!0,qd(c,!1),s.lanes=4194304)}else{if(!g)if(i=bm(y),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Om(s,i),qd(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Pt)return ve(s),null}else 2*cn()-c.renderingStartTime>Im&&r!==536870912&&(s.flags|=128,g=!0,qd(c,!1),s.lanes=4194304);c.isBackwards?(y.sibling=s.child,s.child=y):(i=c.last,i!==null?i.sibling=y:s.child=y,c.last=y)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=cn(),i.sibling=null,r=Ie.current,Z(Ie,g?r&1|2:r&1),Pt&&Sa(s,c.treeForkCount),i):(ve(s),null);case 22:case 23:return pn(s),Nb(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(ve(s),s.subtreeFlags&6&&(s.flags|=8192)):ve(s),r=s.updateQueue,r!==null&&Om(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),i!==null&&V(rl),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),wa(Pe),ve(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function $M(i,s){switch(yb(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return wa(Pe),ye(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Gn(s),null;case 31:if(s.memoizedState!==null){if(pn(s),s.alternate===null)throw Error(n(340));nl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(pn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));nl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return V(Ie),null;case 4:return ye(),null;case 10:return wa(s.type),null;case 22:case 23:return pn(s),Nb(),i!==null&&V(rl),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return wa(Pe),null;case 25:return null;default:return null}}function Dw(i,s){switch(yb(s),s.tag){case 3:wa(Pe),ye();break;case 26:case 27:case 5:Gn(s);break;case 4:ye();break;case 31:s.memoizedState!==null&&pn(s);break;case 13:pn(s);break;case 19:V(Ie);break;case 10:wa(s.type);break;case 22:case 23:pn(s),Nb(),i!==null&&V(rl);break;case 24:wa(Pe)}}function Vd(i,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&i)===i){c=void 0;var y=r.create,S=r.inst;c=y(),S.destroy=c}r=r.next}while(r!==g)}}catch(x){Wt(s,s.return,x)}}function Fr(i,s,r){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var y=g.next;c=y;do{if((c.tag&i)===i){var S=c.inst,x=S.destroy;if(x!==void 0){S.destroy=void 0,g=s;var N=r,j=x;try{j()}catch(K){Wt(g,N,K)}}}c=c.next}while(c!==y)}}catch(K){Wt(s,s.return,K)}}function Ow(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{SE(s,r)}catch(c){Wt(i,i.return,c)}}}function Nw(i,s,r){r.props=hl(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(c){Wt(i,s,c)}}function Yd(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof r=="function"?i.refCleanup=r(c):r.current=c}}catch(g){Wt(i,s,g)}}function Us(i,s){var r=i.ref,c=i.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){Wt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Wt(i,s,g)}else r.current=null}function Lw(i){var s=i.type,r=i.memoizedProps,c=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){Wt(i,i.return,g)}}function uv(i,s,r){try{var c=i.stateNode;yR(c,i.type,r,s),c[Yi]=s}catch(g){Wt(i,i.return,g)}}function kw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Vr(i.type)||i.tag===4}function hv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||kw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Vr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dv(i,s,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ba));else if(c!==4&&(c===27&&Vr(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(dv(i,s,r),i=i.sibling;i!==null;)dv(i,s,r),i=i.sibling}function Nm(i,s,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(c!==4&&(c===27&&Vr(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Nm(i,s,r),i=i.sibling;i!==null;)Nm(i,s,r),i=i.sibling}function Bw(i){var s=i.stateNode,r=i.memoizedProps;try{for(var c=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);yi(s,c,r),s[fi]=i,s[Yi]=r}catch(y){Wt(i,i.return,y)}}var Ma=!1,Ge=!1,fv=!1,Iw=typeof WeakSet=="function"?WeakSet:Set,si=null;function QM(i,s){if(i=i.containerInfo,kv=Jm,i=K1(i),rb(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var S=0,x=-1,N=-1,j=0,K=0,Q=i,G=null;e:for(;;){for(var q;Q!==r||g!==0&&Q.nodeType!==3||(x=S+g),Q!==y||c!==0&&Q.nodeType!==3||(N=S+c),Q.nodeType===3&&(S+=Q.nodeValue.length),(q=Q.firstChild)!==null;)G=Q,Q=q;for(;;){if(Q===i)break e;if(G===r&&++j===g&&(x=S),G===y&&++K===c&&(N=S),(q=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=q}r=x===-1||N===-1?null:{start:x,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bv={focusedElem:i,selectionRange:r},Jm=!1,si=s;si!==null;)if(s=si,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,si=i;else for(;si!==null;){switch(s=si,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)g=i[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=s,g=y.memoizedProps,y=y.memoizedState,c=r.stateNode;try{var ut=hl(r.type,g);i=c.getSnapshotBeforeUpdate(ut,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(At){Wt(r,r.return,At)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)Fv(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Fv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,si=i;break}si=s.return}}function zw(i,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Da(i,r),c&4&&Vd(5,r);break;case 1:if(Da(i,r),c&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(S){Wt(r,r.return,S)}else{var g=hl(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(r,r.return,S)}}c&64&&Ow(r),c&512&&Yd(r,r.return);break;case 3:if(Da(i,r),c&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{SE(i,s)}catch(S){Wt(r,r.return,S)}}break;case 27:s===null&&c&4&&Bw(r);case 26:case 5:Da(i,r),s===null&&c&4&&Lw(r),c&512&&Yd(r,r.return);break;case 12:Da(i,r);break;case 31:Da(i,r),c&4&&Pw(i,r);break;case 13:Da(i,r),c&4&&Hw(i,r),c&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=aR.bind(null,r),CR(i,r))));break;case 22:if(c=r.memoizedState!==null||Ma,!c){s=s!==null&&s.memoizedState!==null||Ge,g=Ma;var y=Ge;Ma=c,(Ge=s)&&!y?Oa(i,r,(r.subtreeFlags&8772)!==0):Da(i,r),Ma=g,Ge=y}break;case 30:break;default:Da(i,r)}}function Fw(i){var s=i.alternate;s!==null&&(i.alternate=null,Fw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Gy(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Se=null,Ki=!1;function Ra(i,s,r){for(r=r.child;r!==null;)Uw(i,s,r),r=r.sibling}function Uw(i,s,r){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(md,r)}catch{}switch(r.tag){case 26:Ge||Us(r,s),Ra(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ge||Us(r,s);var c=Se,g=Ki;Vr(r.type)&&(Se=r.stateNode,Ki=!1),Ra(i,s,r),ef(r.stateNode),Se=c,Ki=g;break;case 5:Ge||Us(r,s);case 6:if(c=Se,g=Ki,Se=null,Ra(i,s,r),Se=c,Ki=g,Se!==null)if(Ki)try{(Se.nodeType===9?Se.body:Se.nodeName==="HTML"?Se.ownerDocument.body:Se).removeChild(r.stateNode)}catch(y){Wt(r,s,y)}else try{Se.removeChild(r.stateNode)}catch(y){Wt(r,s,y)}break;case 18:Se!==null&&(Ki?(i=Se,O_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Cu(i)):O_(Se,r.stateNode));break;case 4:c=Se,g=Ki,Se=r.stateNode.containerInfo,Ki=!0,Ra(i,s,r),Se=c,Ki=g;break;case 0:case 11:case 14:case 15:Fr(2,r,s),Ge||Fr(4,r,s),Ra(i,s,r);break;case 1:Ge||(Us(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Nw(r,s,c)),Ra(i,s,r);break;case 21:Ra(i,s,r);break;case 22:Ge=(c=Ge)||r.memoizedState!==null,Ra(i,s,r),Ge=c;break;default:Ra(i,s,r)}}function Pw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Cu(i)}catch(r){Wt(s,s.return,r)}}}function Hw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Cu(i)}catch(r){Wt(s,s.return,r)}}function WM(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Iw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Iw),s;default:throw Error(n(435,i.tag))}}function Lm(i,s){var r=WM(i);s.forEach(function(c){if(!r.has(c)){r.add(c);var g=rR.bind(null,i,c);c.then(g,g)}})}function $i(i,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],y=i,S=s,x=S;t:for(;x!==null;){switch(x.tag){case 27:if(Vr(x.type)){Se=x.stateNode,Ki=!1;break t}break;case 5:Se=x.stateNode,Ki=!1;break t;case 3:case 4:Se=x.stateNode.containerInfo,Ki=!0;break t}x=x.return}if(Se===null)throw Error(n(160));Uw(y,S,g),Se=null,Ki=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)jw(s,i),s=s.sibling}var vs=null;function jw(i,s){var r=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$i(s,i),Qi(i),c&4&&(Fr(3,i,i.return),Vd(3,i),Fr(5,i,i.return));break;case 1:$i(s,i),Qi(i),c&512&&(Ge||r===null||Us(r,r.return)),c&64&&Ma&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=vs;if($i(s,i),Qi(i),c&512&&(Ge||r===null||Us(r,r.return)),c&4){var y=r!==null?r.memoizedState:null;if(c=i.memoizedState,r===null)if(c===null)if(i.stateNode===null){t:{c=i.type,r=i.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":y=g.getElementsByTagName("title")[0],(!y||y[vd]||y[fi]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(c),g.head.insertBefore(y,g.querySelector("head > title"))),yi(y,c,r),y[fi]=i,ni(y),c=y;break t;case"link":var S=j_("link","href",g).get(c+(r.href||""));if(S){for(var x=0;x<S.length;x++)if(y=S[x],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(x,1);break e}}y=g.createElement(c),yi(y,c,r),g.head.appendChild(y);break;case"meta":if(S=j_("meta","content",g).get(c+(r.content||""))){for(x=0;x<S.length;x++)if(y=S[x],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(x,1);break e}}y=g.createElement(c),yi(y,c,r),g.head.appendChild(y);break;default:throw Error(n(468,c))}y[fi]=i,ni(y),c=y}i.stateNode=c}else G_(g,i.type,i.stateNode);else i.stateNode=H_(g,c,i.memoizedProps);else y!==c?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,c===null?G_(g,i.type,i.stateNode):H_(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&uv(i,i.memoizedProps,r.memoizedProps)}break;case 27:$i(s,i),Qi(i),c&512&&(Ge||r===null||Us(r,r.return)),r!==null&&c&4&&uv(i,i.memoizedProps,r.memoizedProps);break;case 5:if($i(s,i),Qi(i),c&512&&(Ge||r===null||Us(r,r.return)),i.flags&32){g=i.stateNode;try{Kc(g,"")}catch(ut){Wt(i,i.return,ut)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,uv(i,g,r!==null?r.memoizedProps:g)),c&1024&&(fv=!0);break;case 6:if($i(s,i),Qi(i),c&4){if(i.stateNode===null)throw Error(n(162));c=i.memoizedProps,r=i.stateNode;try{r.nodeValue=c}catch(ut){Wt(i,i.return,ut)}}break;case 3:if($m=null,g=vs,vs=Xm(s.containerInfo),$i(s,i),vs=g,Qi(i),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Cu(s.containerInfo)}catch(ut){Wt(i,i.return,ut)}fv&&(fv=!1,Gw(i));break;case 4:c=vs,vs=Xm(i.stateNode.containerInfo),$i(s,i),Qi(i),vs=c;break;case 12:$i(s,i),Qi(i);break;case 31:$i(s,i),Qi(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Lm(i,c)));break;case 13:$i(s,i),Qi(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bm=cn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Lm(i,c)));break;case 22:g=i.memoizedState!==null;var N=r!==null&&r.memoizedState!==null,j=Ma,K=Ge;if(Ma=j||g,Ge=K||N,$i(s,i),Ge=K,Ma=j,Qi(i),c&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||N||Ma||Ge||dl(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){N=r=s;try{if(y=N.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{x=N.stateNode;var Q=N.memoizedProps.style,G=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;x.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ut){Wt(N,N.return,ut)}}}else if(s.tag===6){if(r===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(ut){Wt(N,N.return,ut)}}}else if(s.tag===18){if(r===null){N=s;try{var q=N.stateNode;g?N_(q,!0):N_(N.stateNode,!1)}catch(ut){Wt(N,N.return,ut)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Lm(i,r))));break;case 19:$i(s,i),Qi(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Lm(i,c)));break;case 30:break;case 21:break;default:$i(s,i),Qi(i)}}function Qi(i){var s=i.flags;if(s&2){try{for(var r,c=i.return;c!==null;){if(kw(c)){r=c;break}c=c.return}if(r==null)throw Error(n(160));switch(r.tag){case 27:var g=r.stateNode,y=hv(i);Nm(i,y,g);break;case 5:var S=r.stateNode;r.flags&32&&(Kc(S,""),r.flags&=-33);var x=hv(i);Nm(i,x,S);break;case 3:case 4:var N=r.stateNode.containerInfo,j=hv(i);dv(i,j,N);break;default:throw Error(n(161))}}catch(K){Wt(i,i.return,K)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Gw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Gw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Da(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)zw(i,s.alternate,s),s=s.sibling}function dl(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Fr(4,s,s.return),dl(s);break;case 1:Us(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Nw(s,s.return,r),dl(s);break;case 27:ef(s.stateNode);case 26:case 5:Us(s,s.return),dl(s);break;case 22:s.memoizedState===null&&dl(s);break;case 30:dl(s);break;default:dl(s)}i=i.sibling}}function Oa(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=i,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Oa(g,y,r),Vd(4,y);break;case 1:if(Oa(g,y,r),c=y,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(j){Wt(c,c.return,j)}if(c=y,g=c.updateQueue,g!==null){var x=c.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)AE(N[g],x)}catch(j){Wt(c,c.return,j)}}r&&S&64&&Ow(y),Yd(y,y.return);break;case 27:Bw(y);case 26:case 5:Oa(g,y,r),r&&c===null&&S&4&&Lw(y),Yd(y,y.return);break;case 12:Oa(g,y,r);break;case 31:Oa(g,y,r),r&&S&4&&Pw(g,y);break;case 13:Oa(g,y,r),r&&S&4&&Hw(g,y);break;case 22:y.memoizedState===null&&Oa(g,y,r),Yd(y,y.return);break;case 30:break;default:Oa(g,y,r)}s=s.sibling}}function gv(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&Nd(r))}function pv(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Nd(i))}function As(i,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qw(i,s,r,c),s=s.sibling}function qw(i,s,r,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:As(i,s,r,c),g&2048&&Vd(9,s);break;case 1:As(i,s,r,c);break;case 3:As(i,s,r,c),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Nd(i)));break;case 12:if(g&2048){As(i,s,r,c),i=s.stateNode;try{var y=s.memoizedProps,S=y.id,x=y.onPostCommit;typeof x=="function"&&x(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){Wt(s,s.return,N)}}else As(i,s,r,c);break;case 31:As(i,s,r,c);break;case 13:As(i,s,r,c);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?As(i,s,r,c):Xd(i,s):y._visibility&2?As(i,s,r,c):(y._visibility|=2,gu(i,s,r,c,(s.subtreeFlags&10256)!==0||!1)),g&2048&&gv(S,s);break;case 24:As(i,s,r,c),g&2048&&pv(s.alternate,s);break;default:As(i,s,r,c)}}function gu(i,s,r,c,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,S=s,x=r,N=c,j=S.flags;switch(S.tag){case 0:case 11:case 15:gu(y,S,x,N,g),Vd(8,S);break;case 23:break;case 22:var K=S.stateNode;S.memoizedState!==null?K._visibility&2?gu(y,S,x,N,g):Xd(y,S):(K._visibility|=2,gu(y,S,x,N,g)),g&&j&2048&&gv(S.alternate,S);break;case 24:gu(y,S,x,N,g),g&&j&2048&&pv(S.alternate,S);break;default:gu(y,S,x,N,g)}s=s.sibling}}function Xd(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,c=s,g=c.flags;switch(c.tag){case 22:Xd(r,c),g&2048&&gv(c.alternate,c);break;case 24:Xd(r,c),g&2048&&pv(c.alternate,c);break;default:Xd(r,c)}s=s.sibling}}var Kd=8192;function pu(i,s,r){if(i.subtreeFlags&Kd)for(i=i.child;i!==null;)Vw(i,s,r),i=i.sibling}function Vw(i,s,r){switch(i.tag){case 26:pu(i,s,r),i.flags&Kd&&i.memoizedState!==null&&zR(r,vs,i.memoizedState,i.memoizedProps);break;case 5:pu(i,s,r);break;case 3:case 4:var c=vs;vs=Xm(i.stateNode.containerInfo),pu(i,s,r),vs=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Kd,Kd=16777216,pu(i,s,r),Kd=c):pu(i,s,r));break;default:pu(i,s,r)}}function Yw(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function $d(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];si=c,Kw(c,i)}Yw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xw(i),i=i.sibling}function Xw(i){switch(i.tag){case 0:case 11:case 15:$d(i),i.flags&2048&&Fr(9,i,i.return);break;case 3:$d(i);break;case 12:$d(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,km(i)):$d(i);break;default:$d(i)}}function km(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];si=c,Kw(c,i)}Yw(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Fr(8,s,s.return),km(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,km(s));break;default:km(s)}i=i.sibling}}function Kw(i,s){for(;si!==null;){var r=si;switch(r.tag){case 0:case 11:case 15:Fr(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Nd(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,si=c;else t:for(r=i;si!==null;){c=si;var g=c.sibling,y=c.return;if(Fw(c),c===r){si=null;break t}if(g!==null){g.return=y,si=g;break t}si=y}}}var ZM={getCacheForType:function(i){var s=pi(Pe),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r},cacheSignal:function(){return pi(Pe).controller.signal}},JM=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ce=null,Bt=null,zt=0,Qt=0,mn=null,Ur=!1,mu=!1,mv=!1,Na=0,Re=0,Pr=0,fl=0,yv=0,yn=0,yu=0,Qd=null,Wi=null,bv=!1,Bm=0,$w=0,Im=1/0,zm=null,Hr=null,$e=0,jr=null,bu=null,La=0,vv=0,Av=null,Qw=null,Wd=0,Sv=null;function bn(){return(Xt&2)!==0&&zt!==0?zt&-zt:P.T!==null?xv():d1()}function Ww(){if(yn===0)if((zt&536870912)===0||Pt){var i=Vp;Vp<<=1,(Vp&3932160)===0&&(Vp=262144),yn=i}else yn=536870912;return i=gn.current,i!==null&&(i.flags|=32),yn}function Zi(i,s,r){(i===ce&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)&&(vu(i,0),Gr(i,zt,yn,!1)),bd(i,r),((Xt&2)===0||i!==ce)&&(i===ce&&((Xt&2)===0&&(fl|=r),Re===4&&Gr(i,zt,yn,!1)),Ps(i))}function Zw(i,s,r){if((Xt&6)!==0)throw Error(n(327));var c=!r&&(s&127)===0&&(s&i.expiredLanes)===0||yd(i,s),g=c?iR(i,s):wv(i,s,!0),y=c;do{if(g===0){mu&&!c&&Gr(i,s,0,!1);break}else{if(r=i.current.alternate,y&&!tR(r)){g=wv(i,s,!1),y=!1;continue}if(g===2){if(y=s,i.errorRecoveryDisabledLanes&y)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var x=i;g=Qd;var N=x.current.memoizedState.isDehydrated;if(N&&(vu(x,S).flags|=256),S=wv(x,S,!1),S!==2){if(mv&&!N){x.errorRecoveryDisabledLanes|=y,fl|=y,g=4;break t}y=Wi,Wi=g,y!==null&&(Wi===null?Wi=y:Wi.push.apply(Wi,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){vu(i,0),Gr(i,s,0,!0);break}t:{switch(c=i,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Gr(c,s,yn,!Ur);break t;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(g=Bm+300-cn(),10<g)){if(Gr(c,s,yn,!Ur),Xp(c,0,!0)!==0)break t;La=s,c.timeoutHandle=R_(Jw.bind(null,c,r,Wi,zm,bv,s,yn,fl,yu,Ur,y,"Throttled",-0,0),g);break t}Jw(c,r,Wi,zm,bv,s,yn,fl,yu,Ur,y,null,-0,0)}}break}while(!0);Ps(i)}function Jw(i,s,r,c,g,y,S,x,N,j,K,Q,G,q){if(i.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ba},Vw(s,y,Q);var ut=(y&62914560)===y?Bm-cn():(y&4194048)===y?$w-cn():0;if(ut=FR(Q,ut),ut!==null){La=y,i.cancelPendingCommit=ut(o_.bind(null,i,s,y,r,c,g,S,x,N,K,Q,null,G,q)),Gr(i,y,S,!j);return}}o_(i,s,y,r,c,g,S,x,N)}function tR(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],y=g.getSnapshot;g=g.value;try{if(!dn(y(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gr(i,s,r,c){s&=~yv,s&=~fl,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var g=s;0<g;){var y=31-hn(g),S=1<<y;c[y]=-1,g&=~S}r!==0&&c1(i,r,s)}function Fm(){return(Xt&6)===0?(Zd(0),!1):!0}function Ev(){if(Bt!==null){if(Qt===0)var i=Bt.return;else i=Bt,Ea=sl=null,Fb(i),cu=null,kd=0,i=Bt;for(;i!==null;)Dw(i.alternate,i),i=i.return;Bt=null}}function vu(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,AR(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),La=0,Ev(),ce=i,Bt=r=Aa(i.current,null),zt=s,Qt=0,mn=null,Ur=!1,mu=yd(i,s),mv=!1,yu=yn=yv=fl=Pr=Re=0,Wi=Qd=null,bv=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var g=31-hn(c),y=1<<g;s|=i[g],c&=~y}return Na=s,am(),r}function t_(i,s){Rt=null,P.H=jd,s===lu||s===fm?(s=mE(),Qt=3):s===Tb?(s=mE(),Qt=4):Qt=s===tv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mn=s,Bt===null&&(Re=1,xm(i,Xn(s,i.current)))}function e_(){var i=gn.current;return i===null?!0:(zt&4194048)===zt?Wn===null:(zt&62914560)===zt||(zt&536870912)!==0?i===Wn:!1}function i_(){var i=P.H;return P.H=jd,i===null?jd:i}function n_(){var i=P.A;return P.A=ZM,i}function Um(){Re=4,Ur||(zt&4194048)!==zt&&gn.current!==null||(mu=!0),(Pr&134217727)===0&&(fl&134217727)===0||ce===null||Gr(ce,zt,yn,!1)}function wv(i,s,r){var c=Xt;Xt|=2;var g=i_(),y=n_();(ce!==i||zt!==s)&&(zm=null,vu(i,s)),s=!1;var S=Re;t:do try{if(Qt!==0&&Bt!==null){var x=Bt,N=mn;switch(Qt){case 8:Ev(),S=6;break t;case 3:case 2:case 9:case 6:gn.current===null&&(s=!0);var j=Qt;if(Qt=0,mn=null,Au(i,x,N,j),r&&mu){S=0;break t}break;default:j=Qt,Qt=0,mn=null,Au(i,x,N,j)}}eR(),S=Re;break}catch(K){t_(i,K)}while(!0);return s&&i.shellSuspendCounter++,Ea=sl=null,Xt=c,P.H=g,P.A=y,Bt===null&&(ce=null,zt=0,am()),S}function eR(){for(;Bt!==null;)s_(Bt)}function iR(i,s){var r=Xt;Xt|=2;var c=i_(),g=n_();ce!==i||zt!==s?(zm=null,Im=cn()+500,vu(i,s)):mu=yd(i,s);t:do try{if(Qt!==0&&Bt!==null){s=Bt;var y=mn;e:switch(Qt){case 1:Qt=0,mn=null,Au(i,s,y,1);break;case 2:case 9:if(gE(y)){Qt=0,mn=null,a_(s);break}s=function(){Qt!==2&&Qt!==9||ce!==i||(Qt=7),Ps(i)},y.then(s,s);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:gE(y)?(Qt=0,mn=null,a_(s)):(Qt=0,mn=null,Au(i,s,y,7));break;case 5:var S=null;switch(Bt.tag){case 26:S=Bt.memoizedState;case 5:case 27:var x=Bt;if(S?q_(S):x.stateNode.complete){Qt=0,mn=null;var N=x.sibling;if(N!==null)Bt=N;else{var j=x.return;j!==null?(Bt=j,Pm(j)):Bt=null}break e}}Qt=0,mn=null,Au(i,s,y,5);break;case 6:Qt=0,mn=null,Au(i,s,y,6);break;case 8:Ev(),Re=6;break t;default:throw Error(n(462))}}nR();break}catch(K){t_(i,K)}while(!0);return Ea=sl=null,P.H=c,P.A=g,Xt=r,Bt!==null?0:(ce=null,zt=0,am(),Re)}function nR(){for(;Bt!==null&&!T2();)s_(Bt)}function s_(i){var s=Mw(i.alternate,i,Na);i.memoizedProps=i.pendingProps,s===null?Pm(i):Bt=s}function a_(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=Ew(r,s,s.pendingProps,s.type,void 0,zt);break;case 11:s=Ew(r,s,s.pendingProps,s.type.render,s.ref,zt);break;case 5:Fb(s);default:Dw(r,s),s=Bt=nE(s,Na),s=Mw(r,s,Na)}i.memoizedProps=i.pendingProps,s===null?Pm(i):Bt=s}function Au(i,s,r,c){Ea=sl=null,Fb(s),cu=null,kd=0;var g=s.return;try{if(VM(i,g,s,r,zt)){Re=1,xm(i,Xn(r,i.current)),Bt=null;return}}catch(y){if(g!==null)throw Bt=g,y;Re=1,xm(i,Xn(r,i.current)),Bt=null;return}s.flags&32768?(Pt||c===1?i=!0:mu||(zt&536870912)!==0?i=!1:(Ur=i=!0,(c===2||c===9||c===3||c===6)&&(c=gn.current,c!==null&&c.tag===13&&(c.flags|=16384))),r_(s,i)):Pm(s)}function Pm(i){var s=i;do{if((s.flags&32768)!==0){r_(s,Ur);return}i=s.return;var r=KM(s.alternate,s,Na);if(r!==null){Bt=r;return}if(s=s.sibling,s!==null){Bt=s;return}Bt=s=i}while(s!==null);Re===0&&(Re=5)}function r_(i,s){do{var r=$M(i.alternate,i);if(r!==null){r.flags&=32767,Bt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){Bt=i;return}Bt=i=r}while(i!==null);Re=6,Bt=null}function o_(i,s,r,c,g,y,S,x,N){i.cancelPendingCommit=null;do Hm();while($e!==0);if((Xt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(y=s.lanes|s.childLanes,y|=hb,I2(i,r,y,S,x,N),i===ce&&(Bt=ce=null,zt=0),bu=s,jr=i,La=r,vv=y,Av=g,Qw=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,oR(Gp,function(){return d_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=P.T,P.T=null,g=X.p,X.p=2,S=Xt,Xt|=4;try{QM(i,s,r)}finally{Xt=S,X.p=g,P.T=c}}$e=1,l_(),c_(),u_()}}function l_(){if($e===1){$e=0;var i=jr,s=bu,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=P.T,P.T=null;var c=X.p;X.p=2;var g=Xt;Xt|=4;try{jw(s,i);var y=Bv,S=K1(i.containerInfo),x=y.focusedElem,N=y.selectionRange;if(S!==x&&x&&x.ownerDocument&&X1(x.ownerDocument.documentElement,x)){if(N!==null&&rb(x)){var j=N.start,K=N.end;if(K===void 0&&(K=j),"selectionStart"in x)x.selectionStart=j,x.selectionEnd=Math.min(K,x.value.length);else{var Q=x.ownerDocument||document,G=Q&&Q.defaultView||window;if(G.getSelection){var q=G.getSelection(),ut=x.textContent.length,At=Math.min(N.start,ut),ie=N.end===void 0?At:Math.min(N.end,ut);!q.extend&&At>ie&&(S=ie,ie=At,At=S);var U=Y1(x,At),I=Y1(x,ie);if(U&&I&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==I.node||q.focusOffset!==I.offset)){var H=Q.createRange();H.setStart(U.node,U.offset),q.removeAllRanges(),At>ie?(q.addRange(H),q.extend(I.node,I.offset)):(H.setEnd(I.node,I.offset),q.addRange(H))}}}}for(Q=[],q=x;q=q.parentNode;)q.nodeType===1&&Q.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Q.length;x++){var $=Q[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Jm=!!kv,Bv=kv=null}finally{Xt=g,X.p=c,P.T=r}}i.current=s,$e=2}}function c_(){if($e===2){$e=0;var i=jr,s=bu,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=P.T,P.T=null;var c=X.p;X.p=2;var g=Xt;Xt|=4;try{zw(i,s.alternate,s)}finally{Xt=g,X.p=c,P.T=r}}$e=3}}function u_(){if($e===4||$e===3){$e=0,x2();var i=jr,s=bu,r=La,c=Qw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$e=5:($e=0,bu=jr=null,h_(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Hr=null),Hy(r),s=s.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(md,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=P.T,g=X.p,X.p=2,P.T=null;try{for(var y=i.onRecoverableError,S=0;S<c.length;S++){var x=c[S];y(x.value,{componentStack:x.stack})}}finally{P.T=s,X.p=g}}(La&3)!==0&&Hm(),Ps(i),g=i.pendingLanes,(r&261930)!==0&&(g&42)!==0?i===Sv?Wd++:(Wd=0,Sv=i):Wd=0,Zd(0)}}function h_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Nd(s)))}function Hm(){return l_(),c_(),u_(),d_()}function d_(){if($e!==5)return!1;var i=jr,s=vv;vv=0;var r=Hy(La),c=P.T,g=X.p;try{X.p=32>r?32:r,P.T=null,r=Av,Av=null;var y=jr,S=La;if($e=0,bu=jr=null,La=0,(Xt&6)!==0)throw Error(n(331));var x=Xt;if(Xt|=4,Xw(y.current),qw(y,y.current,S,r),Xt=x,Zd(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(md,y)}catch{}return!0}finally{X.p=g,P.T=c,h_(i,s)}}function f_(i,s,r){s=Xn(r,s),s=Jb(i.stateNode,s,2),i=Br(i,s,2),i!==null&&(bd(i,2),Ps(i))}function Wt(i,s,r){if(i.tag===3)f_(i,i,r);else for(;s!==null;){if(s.tag===3){f_(s,i,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hr===null||!Hr.has(c))){i=Xn(r,i),r=gw(2),c=Br(s,r,2),c!==null&&(pw(r,c,s,i),bd(c,2),Ps(c));break}}s=s.return}}function _v(i,s,r){var c=i.pingCache;if(c===null){c=i.pingCache=new JM;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(r)||(mv=!0,g.add(r),i=sR.bind(null,i,s,r),s.then(i,i))}function sR(i,s,r){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,ce===i&&(zt&r)===r&&(Re===4||Re===3&&(zt&62914560)===zt&&300>cn()-Bm?(Xt&2)===0&&vu(i,0):yv|=r,yu===zt&&(yu=0)),Ps(i)}function g_(i,s){s===0&&(s=l1()),i=el(i,s),i!==null&&(bd(i,s),Ps(i))}function aR(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),g_(i,r)}function rR(i,s){var r=0;switch(i.tag){case 31:case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),g_(i,r)}function oR(i,s){return zy(i,s)}var jm=null,Su=null,Cv=!1,Gm=!1,Tv=!1,qr=0;function Ps(i){i!==Su&&i.next===null&&(Su===null?jm=Su=i:Su=Su.next=i),Gm=!0,Cv||(Cv=!0,cR())}function Zd(i,s){if(!Tv&&Gm){Tv=!0;do for(var r=!1,c=jm;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var y=0;else{var S=c.suspendedLanes,x=c.pingedLanes;y=(1<<31-hn(42|i)+1)-1,y&=g&~(S&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,b_(c,y))}else y=zt,y=Xp(c,c===ce?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||yd(c,y)||(r=!0,b_(c,y));c=c.next}while(r);Tv=!1}}function lR(){p_()}function p_(){Gm=Cv=!1;var i=0;qr!==0&&vR()&&(i=qr);for(var s=cn(),r=null,c=jm;c!==null;){var g=c.next,y=m_(c,s);y===0?(c.next=null,r===null?jm=g:r.next=g,g===null&&(Su=r)):(r=c,(i!==0||(y&3)!==0)&&(Gm=!0)),c=g}$e!==0&&$e!==5||Zd(i),qr!==0&&(qr=0)}function m_(i,s){for(var r=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var S=31-hn(y),x=1<<S,N=g[S];N===-1?((x&r)===0||(x&c)!==0)&&(g[S]=B2(x,s)):N<=s&&(i.expiredLanes|=x),y&=~x}if(s=ce,r=zt,r=Xp(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,r===0||i===s&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Fy(c),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||yd(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(c!==null&&Fy(c),Hy(r)){case 2:case 8:r=r1;break;case 32:r=Gp;break;case 268435456:r=o1;break;default:r=Gp}return c=y_.bind(null,i),r=zy(r,c),i.callbackPriority=s,i.callbackNode=r,s}return c!==null&&c!==null&&Fy(c),i.callbackPriority=2,i.callbackNode=null,2}function y_(i,s){if($e!==0&&$e!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Hm()&&i.callbackNode!==r)return null;var c=zt;return c=Xp(i,i===ce?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Zw(i,c,s),m_(i,cn()),i.callbackNode!=null&&i.callbackNode===r?y_.bind(null,i):null)}function b_(i,s){if(Hm())return null;Zw(i,s,!0)}function cR(){SR(function(){(Xt&6)!==0?zy(a1,lR):p_()})}function xv(){if(qr===0){var i=ru;i===0&&(i=qp,qp<<=1,(qp&261888)===0&&(qp=256)),qr=i}return qr}function v_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wp(""+i)}function A_(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function uR(i,s,r,c,g){if(s==="submit"&&r&&r.stateNode===g){var y=v_((g[Yi]||null).action),S=c.submitter;S&&(s=(s=S[Yi]||null)?v_(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var x=new em("action","action",null,c,g);i.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(qr!==0){var N=S?A_(g,S):new FormData(g);Xb(r,{pending:!0,data:N,method:g.method,action:y},null,N)}}else typeof y=="function"&&(x.preventDefault(),N=S?A_(g,S):new FormData(g),Xb(r,{pending:!0,data:N,method:g.method,action:y},y,N))},currentTarget:g}]})}}for(var Mv=0;Mv<ub.length;Mv++){var Rv=ub[Mv],hR=Rv.toLowerCase(),dR=Rv[0].toUpperCase()+Rv.slice(1);bs(hR,"on"+dR)}bs(W1,"onAnimationEnd"),bs(Z1,"onAnimationIteration"),bs(J1,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(MM,"onTransitionRun"),bs(RM,"onTransitionStart"),bs(DM,"onTransitionCancel"),bs(tE,"onTransitionEnd"),Yc("onMouseEnter",["mouseout","mouseover"]),Yc("onMouseLeave",["mouseout","mouseover"]),Yc("onPointerEnter",["pointerout","pointerover"]),Yc("onPointerLeave",["pointerout","pointerover"]),Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jd));function S_(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var c=i[r],g=c.event;c=c.listeners;t:{var y=void 0;if(s)for(var S=c.length-1;0<=S;S--){var x=c[S],N=x.instance,j=x.currentTarget;if(x=x.listener,N!==y&&g.isPropagationStopped())break t;y=x,g.currentTarget=j;try{y(g)}catch(K){sm(K)}g.currentTarget=null,y=N}else for(S=0;S<c.length;S++){if(x=c[S],N=x.instance,j=x.currentTarget,x=x.listener,N!==y&&g.isPropagationStopped())break t;y=x,g.currentTarget=j;try{y(g)}catch(K){sm(K)}g.currentTarget=null,y=N}}}}function It(i,s){var r=s[jy];r===void 0&&(r=s[jy]=new Set);var c=i+"__bubble";r.has(c)||(E_(s,i,2,!1),r.add(c))}function Dv(i,s,r){var c=0;s&&(c|=4),E_(r,i,c,s)}var qm="_reactListening"+Math.random().toString(36).slice(2);function Ov(i){if(!i[qm]){i[qm]=!0,p1.forEach(function(r){r!=="selectionchange"&&(fR.has(r)||Dv(r,!1,i),Dv(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[qm]||(s[qm]=!0,Dv("selectionchange",!1,s))}}function E_(i,s,r,c){switch(W_(s)){case 2:var g=HR;break;case 8:g=jR;break;default:g=Yv}r=g.bind(null,s,r,i),g=void 0,!Wy||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(s,r,{capture:!0,passive:g}):i.addEventListener(s,r,!0):g!==void 0?i.addEventListener(s,r,{passive:g}):i.addEventListener(s,r,!1)}function Nv(i,s,r,c,g){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var x=c.stateNode.containerInfo;if(x===g)break;if(S===4)for(S=c.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;x!==null;){if(S=Gc(x),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){c=y=S;continue t}x=x.parentNode}}c=c.return}x1(function(){var j=y,K=$y(r),Q=[];t:{var G=eE.get(i);if(G!==void 0){var q=em,ut=i;switch(i){case"keypress":if(Jp(r)===0)break t;case"keydown":case"keyup":q=rM;break;case"focusin":ut="focus",q=eb;break;case"focusout":ut="blur",q=eb;break;case"beforeblur":case"afterblur":q=eb;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=D1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=K2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=cM;break;case W1:case Z1:case J1:q=W2;break;case tE:q=hM;break;case"scroll":case"scrollend":q=Y2;break;case"wheel":q=fM;break;case"copy":case"cut":case"paste":q=J2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=N1;break;case"toggle":case"beforetoggle":q=pM}var At=(s&4)!==0,ie=!At&&(i==="scroll"||i==="scrollend"),U=At?G!==null?G+"Capture":null:G;At=[];for(var I=j,H;I!==null;){var $=I;if(H=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||H===null||U===null||($=Sd(I,U),$!=null&&At.push(tf(I,$,H))),ie)break;I=I.return}0<At.length&&(G=new q(G,ut,null,r,K),Q.push({event:G,listeners:At}))}}if((s&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",G&&r!==Ky&&(ut=r.relatedTarget||r.fromElement)&&(Gc(ut)||ut[jc]))break t;if((q||G)&&(G=K.window===K?K:(G=K.ownerDocument)?G.defaultView||G.parentWindow:window,q?(ut=r.relatedTarget||r.toElement,q=j,ut=ut?Gc(ut):null,ut!==null&&(ie=l(ut),At=ut.tag,ut!==ie||At!==5&&At!==27&&At!==6)&&(ut=null)):(q=null,ut=j),q!==ut)){if(At=D1,$="onMouseLeave",U="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(At=N1,$="onPointerLeave",U="onPointerEnter",I="pointer"),ie=q==null?G:Ad(q),H=ut==null?G:Ad(ut),G=new At($,I+"leave",q,r,K),G.target=ie,G.relatedTarget=H,$=null,Gc(K)===j&&(At=new At(U,I+"enter",ut,r,K),At.target=H,At.relatedTarget=ie,$=At),ie=$,q&&ut)e:{for(At=gR,U=q,I=ut,H=0,$=U;$;$=At($))H++;$=0;for(var pt=I;pt;pt=At(pt))$++;for(;0<H-$;)U=At(U),H--;for(;0<$-H;)I=At(I),$--;for(;H--;){if(U===I||I!==null&&U===I.alternate){At=U;break e}U=At(U),I=At(I)}At=null}else At=null;q!==null&&w_(Q,G,q,At,!1),ut!==null&&ie!==null&&w_(Q,ie,ut,At,!0)}}t:{if(G=j?Ad(j):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Vt=P1;else if(F1(G))if(H1)Vt=CM;else{Vt=wM;var dt=EM}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&Xy(j.elementType)&&(Vt=P1):Vt=_M;if(Vt&&(Vt=Vt(i,j))){U1(Q,Vt,r,K);break t}dt&&dt(i,G,j),i==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&Yy(G,"number",G.value)}switch(dt=j?Ad(j):window,i){case"focusin":(F1(dt)||dt.contentEditable==="true")&&(Zc=dt,ob=j,Rd=null);break;case"focusout":Rd=ob=Zc=null;break;case"mousedown":lb=!0;break;case"contextmenu":case"mouseup":case"dragend":lb=!1,$1(Q,r,K);break;case"selectionchange":if(xM)break;case"keydown":case"keyup":$1(Q,r,K)}var Ot;if(nb)t:{switch(i){case"compositionstart":var Ft="onCompositionStart";break t;case"compositionend":Ft="onCompositionEnd";break t;case"compositionupdate":Ft="onCompositionUpdate";break t}Ft=void 0}else Wc?I1(i,r)&&(Ft="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Ft="onCompositionStart");Ft&&(L1&&r.locale!=="ko"&&(Wc||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Wc&&(Ot=M1()):(Mr=K,Zy="value"in Mr?Mr.value:Mr.textContent,Wc=!0)),dt=Vm(j,Ft),0<dt.length&&(Ft=new O1(Ft,i,null,r,K),Q.push({event:Ft,listeners:dt}),Ot?Ft.data=Ot:(Ot=z1(r),Ot!==null&&(Ft.data=Ot)))),(Ot=yM?bM(i,r):vM(i,r))&&(Ft=Vm(j,"onBeforeInput"),0<Ft.length&&(dt=new O1("onBeforeInput","beforeinput",null,r,K),Q.push({event:dt,listeners:Ft}),dt.data=Ot)),uR(Q,i,j,r,K)}S_(Q,s)})}function tf(i,s,r){return{instance:i,listener:s,currentTarget:r}}function Vm(i,s){for(var r=s+"Capture",c=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Sd(i,r),g!=null&&c.unshift(tf(i,g,y)),g=Sd(i,s),g!=null&&c.push(tf(i,g,y))),i.tag===3)return c;i=i.return}return[]}function gR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function w_(i,s,r,c,g){for(var y=s._reactName,S=[];r!==null&&r!==c;){var x=r,N=x.alternate,j=x.stateNode;if(x=x.tag,N!==null&&N===c)break;x!==5&&x!==26&&x!==27||j===null||(N=j,g?(j=Sd(r,y),j!=null&&S.unshift(tf(r,j,N))):g||(j=Sd(r,y),j!=null&&S.push(tf(r,j,N)))),r=r.return}S.length!==0&&i.push({event:s,listeners:S})}var pR=/\r\n?/g,mR=/\u0000|\uFFFD/g;function __(i){return(typeof i=="string"?i:""+i).replace(pR,`
`).replace(mR,"")}function C_(i,s){return s=__(s),__(i)===s}function ee(i,s,r,c,g,y){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Kc(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Kc(i,""+c);break;case"className":$p(i,"class",c);break;case"tabIndex":$p(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$p(i,r,c);break;case"style":C1(i,c,y);break;case"data":if(s!=="object"){$p(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=Wp(""+c),i.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&ee(i,s,"name",g.name,g,null),ee(i,s,"formEncType",g.formEncType,g,null),ee(i,s,"formMethod",g.formMethod,g,null),ee(i,s,"formTarget",g.formTarget,g,null)):(ee(i,s,"encType",g.encType,g,null),ee(i,s,"method",g.method,g,null),ee(i,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=Wp(""+c),i.setAttribute(r,c);break;case"onClick":c!=null&&(i.onclick=ba);break;case"onScroll":c!=null&&It("scroll",i);break;case"onScrollEnd":c!=null&&It("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}r=Wp(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""+c):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":c===!0?i.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,c):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(r,c):i.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(r):i.setAttribute(r,c);break;case"popover":It("beforetoggle",i),It("toggle",i),Kp(i,"popover",c);break;case"xlinkActuate":ya(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ya(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ya(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ya(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ya(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ya(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ya(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ya(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ya(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Kp(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=q2.get(r)||r,Kp(i,r,c))}}function Lv(i,s,r,c,g,y){switch(r){case"style":C1(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"children":typeof c=="string"?Kc(i,c):(typeof c=="number"||typeof c=="bigint")&&Kc(i,""+c);break;case"onScroll":c!=null&&It("scroll",i);break;case"onScrollEnd":c!=null&&It("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ba);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!m1.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),y=i[Yi]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(s,y,g),typeof c=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,c,g);break t}r in i?i[r]=c:c===!0?i.setAttribute(r,""):Kp(i,r,c)}}}function yi(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",i),It("load",i);var c=!1,g=!1,y;for(y in r)if(r.hasOwnProperty(y)){var S=r[y];if(S!=null)switch(y){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ee(i,s,y,S,r,null)}}g&&ee(i,s,"srcSet",r.srcSet,r,null),c&&ee(i,s,"src",r.src,r,null);return;case"input":It("invalid",i);var x=y=S=g=null,N=null,j=null;for(c in r)if(r.hasOwnProperty(c)){var K=r[c];if(K!=null)switch(c){case"name":g=K;break;case"type":S=K;break;case"checked":N=K;break;case"defaultChecked":j=K;break;case"value":y=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,s));break;default:ee(i,s,c,K,r,null)}}S1(i,y,x,N,j,S,g,!1);return;case"select":It("invalid",i),c=S=y=null;for(g in r)if(r.hasOwnProperty(g)&&(x=r[g],x!=null))switch(g){case"value":y=x;break;case"defaultValue":S=x;break;case"multiple":c=x;default:ee(i,s,g,x,r,null)}s=y,r=S,i.multiple=!!c,s!=null?Xc(i,!!c,s,!1):r!=null&&Xc(i,!!c,r,!0);return;case"textarea":It("invalid",i),y=g=c=null;for(S in r)if(r.hasOwnProperty(S)&&(x=r[S],x!=null))switch(S){case"value":c=x;break;case"defaultValue":g=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:ee(i,s,S,x,r,null)}w1(i,c,g,y);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(c=r[N],c!=null))switch(N){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ee(i,s,N,c,r,null)}return;case"dialog":It("beforetoggle",i),It("toggle",i),It("cancel",i),It("close",i);break;case"iframe":case"object":It("load",i);break;case"video":case"audio":for(c=0;c<Jd.length;c++)It(Jd[c],i);break;case"image":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"embed":case"source":case"link":It("error",i),It("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in r)if(r.hasOwnProperty(j)&&(c=r[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ee(i,s,j,c,r,null)}return;default:if(Xy(s)){for(K in r)r.hasOwnProperty(K)&&(c=r[K],c!==void 0&&Lv(i,s,K,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&ee(i,s,x,c,r,null))}function yR(i,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,x=null,N=null,j=null,K=null;for(q in r){var Q=r[q];if(r.hasOwnProperty(q)&&Q!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=Q;default:c.hasOwnProperty(q)||ee(i,s,q,null,c,Q)}}for(var G in c){var q=c[G];if(Q=r[G],c.hasOwnProperty(G)&&(q!=null||Q!=null))switch(G){case"type":y=q;break;case"name":g=q;break;case"checked":j=q;break;case"defaultChecked":K=q;break;case"value":S=q;break;case"defaultValue":x=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:q!==Q&&ee(i,s,G,q,c,Q)}}Vy(i,S,x,N,j,K,y,g);return;case"select":q=S=x=G=null;for(y in r)if(N=r[y],r.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":q=N;default:c.hasOwnProperty(y)||ee(i,s,y,null,c,N)}for(g in c)if(y=c[g],N=r[g],c.hasOwnProperty(g)&&(y!=null||N!=null))switch(g){case"value":G=y;break;case"defaultValue":x=y;break;case"multiple":S=y;default:y!==N&&ee(i,s,g,y,c,N)}s=x,r=S,c=q,G!=null?Xc(i,!!r,G,!1):!!c!=!!r&&(s!=null?Xc(i,!!r,s,!0):Xc(i,!!r,r?[]:"",!1));return;case"textarea":q=G=null;for(x in r)if(g=r[x],r.hasOwnProperty(x)&&g!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:ee(i,s,x,null,c,g)}for(S in c)if(g=c[S],y=r[S],c.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":G=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&ee(i,s,S,g,c,y)}E1(i,G,q);return;case"option":for(var ut in r)if(G=r[ut],r.hasOwnProperty(ut)&&G!=null&&!c.hasOwnProperty(ut))switch(ut){case"selected":i.selected=!1;break;default:ee(i,s,ut,null,c,G)}for(N in c)if(G=c[N],q=r[N],c.hasOwnProperty(N)&&G!==q&&(G!=null||q!=null))switch(N){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ee(i,s,N,G,c,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in r)G=r[At],r.hasOwnProperty(At)&&G!=null&&!c.hasOwnProperty(At)&&ee(i,s,At,null,c,G);for(j in c)if(G=c[j],q=r[j],c.hasOwnProperty(j)&&G!==q&&(G!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:ee(i,s,j,G,c,q)}return;default:if(Xy(s)){for(var ie in r)G=r[ie],r.hasOwnProperty(ie)&&G!==void 0&&!c.hasOwnProperty(ie)&&Lv(i,s,ie,void 0,c,G);for(K in c)G=c[K],q=r[K],!c.hasOwnProperty(K)||G===q||G===void 0&&q===void 0||Lv(i,s,K,G,c,q);return}}for(var U in r)G=r[U],r.hasOwnProperty(U)&&G!=null&&!c.hasOwnProperty(U)&&ee(i,s,U,null,c,G);for(Q in c)G=c[Q],q=r[Q],!c.hasOwnProperty(Q)||G===q||G==null&&q==null||ee(i,s,Q,G,c,q)}function T_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var g=r[c],y=g.transferSize,S=g.initiatorType,x=g.duration;if(y&&x&&T_(S)){for(S=0,x=g.responseEnd,c+=1;c<r.length;c++){var N=r[c],j=N.startTime;if(j>x)break;var K=N.transferSize,Q=N.initiatorType;K&&T_(Q)&&(N=N.responseEnd,S+=K*(N<x?1:(x-j)/(N-j)))}if(--c,s+=8*(y+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var kv=null,Bv=null;function Ym(i){return i.nodeType===9?i:i.ownerDocument}function x_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Iv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zv=null;function vR(){var i=window.event;return i&&i.type==="popstate"?i===zv?!1:(zv=i,!0):(zv=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,AR=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(i){return D_.resolve(null).then(i).catch(ER)}:R_;function ER(i){setTimeout(function(){throw i})}function Vr(i){return i==="head"}function O_(i,s){var r=s,c=0;do{var g=r.nextSibling;if(i.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(c===0){i.removeChild(g),Cu(s);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")ef(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,ef(r);for(var y=r.firstChild;y;){var S=y.nextSibling,x=y.nodeName;y[vd]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=S}}else r==="body"&&ef(i.ownerDocument.body);r=g}while(r);Cu(s)}function N_(i,s){var r=i;i=0;do{var c=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=c}while(r)}function Fv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Fv(r),Gy(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function wR(i,s,r,c){for(;i.nodeType===1;){var g=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[vd])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function _R(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Zn(i.nextSibling),i===null))return null;return i}function L_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Zn(i.nextSibling),i===null))return null;return i}function Uv(i){return i.data==="$?"||i.data==="$~"}function Pv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function CR(i,s){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||r.readyState!=="loading")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Zn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Hv=null;function k_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(s===0)return Zn(i.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}i=i.nextSibling}return null}function B_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return i;s--}else r!=="/$"&&r!=="/&"||s++}i=i.previousSibling}return null}function I_(i,s,r){switch(s=Ym(r),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function ef(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Gy(i)}var Jn=new Map,z_=new Set;function Xm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ka=X.d;X.d={f:TR,r:xR,D:MR,C:RR,L:DR,m:OR,X:LR,S:NR,M:kR};function TR(){var i=ka.f(),s=Fm();return i||s}function xR(i){var s=qc(i);s!==null&&s.tag===5&&s.type==="form"?tw(s):ka.r(i)}var Eu=typeof document>"u"?null:document;function F_(i,s,r){var c=Eu;if(c&&typeof s=="string"&&s){var g=Vn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),z_.has(g)||(z_.add(g),i={rel:i,crossOrigin:r,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),yi(s,"link",i),ni(s),c.head.appendChild(s)))}}function MR(i){ka.D(i),F_("dns-prefetch",i,null)}function RR(i,s){ka.C(i,s),F_("preconnect",i,s)}function DR(i,s,r){ka.L(i,s,r);var c=Eu;if(c&&i&&s){var g='link[rel="preload"][as="'+Vn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Vn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Vn(r.imageSizes)+'"]')):g+='[href="'+Vn(i)+'"]';var y=g;switch(s){case"style":y=wu(i);break;case"script":y=_u(i)}Jn.has(y)||(i=b({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),Jn.set(y,i),c.querySelector(g)!==null||s==="style"&&c.querySelector(nf(y))||s==="script"&&c.querySelector(sf(y))||(s=c.createElement("link"),yi(s,"link",i),ni(s),c.head.appendChild(s)))}}function OR(i,s){ka.m(i,s);var r=Eu;if(r&&i){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Vn(c)+'"][href="'+Vn(i)+'"]',y=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_u(i)}if(!Jn.has(y)&&(i=b({rel:"modulepreload",href:i},s),Jn.set(y,i),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(sf(y)))return}c=r.createElement("link"),yi(c,"link",i),ni(c),r.head.appendChild(c)}}}function NR(i,s,r){ka.S(i,s,r);var c=Eu;if(c&&i){var g=Vc(c).hoistableStyles,y=wu(i);s=s||"default";var S=g.get(y);if(!S){var x={loading:0,preload:null};if(S=c.querySelector(nf(y)))x.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":s},r),(r=Jn.get(y))&&jv(i,r);var N=S=c.createElement("link");ni(N),yi(N,"link",i),N._p=new Promise(function(j,K){N.onload=j,N.onerror=K}),N.addEventListener("load",function(){x.loading|=1}),N.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Km(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:x},g.set(y,S)}}}function LR(i,s){ka.X(i,s);var r=Eu;if(r&&i){var c=Vc(r).hoistableScripts,g=_u(i),y=c.get(g);y||(y=r.querySelector(sf(g)),y||(i=b({src:i,async:!0},s),(s=Jn.get(g))&&Gv(i,s),y=r.createElement("script"),ni(y),yi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(g,y))}}function kR(i,s){ka.M(i,s);var r=Eu;if(r&&i){var c=Vc(r).hoistableScripts,g=_u(i),y=c.get(g);y||(y=r.querySelector(sf(g)),y||(i=b({src:i,async:!0,type:"module"},s),(s=Jn.get(g))&&Gv(i,s),y=r.createElement("script"),ni(y),yi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(g,y))}}function U_(i,s,r,c){var g=(g=yt.current)?Xm(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=wu(r.href),r=Vc(g).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=wu(r.href);var y=Vc(g).hoistableStyles,S=y.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,S),(y=g.querySelector(nf(i)))&&!y._p&&(S.instance=y,S.state.loading=5),Jn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Jn.set(i,r),y||BR(g,i,r,S.state))),s&&c===null)throw Error(n(528,""));return S}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_u(r),r=Vc(g).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function wu(i){return'href="'+Vn(i)+'"'}function nf(i){return'link[rel="stylesheet"]['+i+"]"}function P_(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function BR(i,s,r,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),yi(s,"link",r),ni(s),i.head.appendChild(s))}function _u(i){return'[src="'+Vn(i)+'"]'}function sf(i){return"script[async]"+i}function H_(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Vn(r.href)+'"]');if(c)return s.instance=c,ni(c),c;var g=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),ni(c),yi(c,"style",g),Km(c,r.precedence,i),s.instance=c;case"stylesheet":g=wu(r.href);var y=i.querySelector(nf(g));if(y)return s.state.loading|=4,s.instance=y,ni(y),y;c=P_(r),(g=Jn.get(g))&&jv(c,g),y=(i.ownerDocument||i).createElement("link"),ni(y);var S=y;return S._p=new Promise(function(x,N){S.onload=x,S.onerror=N}),yi(y,"link",c),s.state.loading|=4,Km(y,r.precedence,i),s.instance=y;case"script":return y=_u(r.src),(g=i.querySelector(sf(y)))?(s.instance=g,ni(g),g):(c=r,(g=Jn.get(y))&&(c=b({},r),Gv(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),ni(g),yi(g,"link",c),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Km(c,r.precedence,i));return s.instance}function Km(i,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,y=g,S=0;S<c.length;S++){var x=c[S];if(x.dataset.precedence===s)y=x;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function jv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Gv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var $m=null;function j_(i,s,r){if($m===null){var c=new Map,g=$m=new Map;g.set(r,c)}else g=$m,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(i))return c;for(c.set(i,null),r=r.getElementsByTagName(i),g=0;g<r.length;g++){var y=r[g];if(!(y[vd]||y[fi]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=i+S;var x=c.get(S);x?x.push(y):c.set(S,[y])}}return c}function G_(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function IR(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function q_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function zR(i,s,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=wu(c.href),y=s.querySelector(nf(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Qm.bind(i),s.then(i,i)),r.state.loading|=4,r.instance=y,ni(y);return}y=s.ownerDocument||s,c=P_(c),(g=Jn.get(g))&&jv(c,g),y=y.createElement("link"),ni(y);var S=y;S._p=new Promise(function(x,N){S.onload=x,S.onerror=N}),yi(y,"link",c),r.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Qm.bind(i),s.addEventListener("load",r),s.addEventListener("error",r))}}var qv=0;function FR(i,s){return i.stylesheets&&i.count===0&&Zm(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var c=setTimeout(function(){if(i.stylesheets&&Zm(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&qv===0&&(qv=62500*bR());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Zm(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>qv?50:800)+s);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Qm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wm=null;function Zm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wm=new Map,s.forEach(UR,i),Wm=null,Qm.call(i))}function UR(i,s){if(!(s.state.loading&4)){var r=Wm.get(i);if(r)var c=r.get(null);else{r=new Map,Wm.set(i,r);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),c=S)}c&&r.set(null,c)}g=s.instance,S=g.getAttribute("data-precedence"),y=r.get(S)||c,y===c&&r.set(null,g),r.set(S,g),this.count++,c=Qm.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var af={$$typeof:D,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function PR(i,s,r,c,g,y,S,x,N){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uy(0),this.hiddenUpdates=Uy(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function V_(i,s,r,c,g,y,S,x,N,j,K,Q){return i=new PR(i,s,r,S,N,j,K,Q,x),s=1,y===!0&&(s|=24),y=fn(3,null,null,s),i.current=y,y.stateNode=i,s=wb(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:r,cache:s},xb(y),i}function Y_(i){return i?(i=eu,i):eu}function X_(i,s,r,c,g,y){g=Y_(g),c.context===null?c.context=g:c.pendingContext=g,c=kr(s),c.payload={element:r},y=y===void 0?null:y,y!==null&&(c.callback=y),r=Br(i,c,s),r!==null&&(Zi(r,i,s),Id(r,i,s))}function K_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function Vv(i,s){K_(i,s),(i=i.alternate)&&K_(i,s)}function $_(i){if(i.tag===13||i.tag===31){var s=el(i,67108864);s!==null&&Zi(s,i,67108864),Vv(i,67108864)}}function Q_(i){if(i.tag===13||i.tag===31){var s=bn();s=Py(s);var r=el(i,s);r!==null&&Zi(r,i,s),Vv(i,s)}}var Jm=!0;function HR(i,s,r,c){var g=P.T;P.T=null;var y=X.p;try{X.p=2,Yv(i,s,r,c)}finally{X.p=y,P.T=g}}function jR(i,s,r,c){var g=P.T;P.T=null;var y=X.p;try{X.p=8,Yv(i,s,r,c)}finally{X.p=y,P.T=g}}function Yv(i,s,r,c){if(Jm){var g=Xv(c);if(g===null)Nv(i,s,c,t0,r),Z_(i,c);else if(qR(g,i,s,r,c))c.stopPropagation();else if(Z_(i,c),s&4&&-1<GR.indexOf(i)){for(;g!==null;){var y=qc(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Qo(y.pendingLanes);if(S!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;S;){var N=1<<31-hn(S);x.entanglements[1]|=N,S&=~N}Ps(y),(Xt&6)===0&&(Im=cn()+500,Zd(0))}}break;case 31:case 13:x=el(y,2),x!==null&&Zi(x,y,2),Fm(),Vv(y,2)}if(y=Xv(c),y===null&&Nv(i,s,c,t0,r),y===g)break;g=y}g!==null&&c.stopPropagation()}else Nv(i,s,c,null,r)}}function Xv(i){return i=$y(i),Kv(i)}var t0=null;function Kv(i){if(t0=null,i=Gc(i),i!==null){var s=l(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=u(s),i!==null)return i;i=null}else if(r===31){if(i=h(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return t0=i,null}function W_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(M2()){case a1:return 2;case r1:return 8;case Gp:case R2:return 32;case o1:return 268435456;default:return 32}default:return 32}}var $v=!1,Yr=null,Xr=null,Kr=null,rf=new Map,of=new Map,$r=[],GR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z_(i,s){switch(i){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":rf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":of.delete(s.pointerId)}}function lf(i,s,r,c,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:y,targetContainers:[g]},s!==null&&(s=qc(s),s!==null&&$_(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function qR(i,s,r,c,g){switch(s){case"focusin":return Yr=lf(Yr,i,s,r,c,g),!0;case"dragenter":return Xr=lf(Xr,i,s,r,c,g),!0;case"mouseover":return Kr=lf(Kr,i,s,r,c,g),!0;case"pointerover":var y=g.pointerId;return rf.set(y,lf(rf.get(y)||null,i,s,r,c,g)),!0;case"gotpointercapture":return y=g.pointerId,of.set(y,lf(of.get(y)||null,i,s,r,c,g)),!0}return!1}function J_(i){var s=Gc(i.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=u(r),s!==null){i.blockedOn=s,f1(i.priority,function(){Q_(r)});return}}else if(s===31){if(s=h(r),s!==null){i.blockedOn=s,f1(i.priority,function(){Q_(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function e0(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=Xv(i.nativeEvent);if(r===null){r=i.nativeEvent;var c=new r.constructor(r.type,r);Ky=c,r.target.dispatchEvent(c),Ky=null}else return s=qc(r),s!==null&&$_(s),i.blockedOn=r,!1;s.shift()}return!0}function tC(i,s,r){e0(i)&&r.delete(s)}function VR(){$v=!1,Yr!==null&&e0(Yr)&&(Yr=null),Xr!==null&&e0(Xr)&&(Xr=null),Kr!==null&&e0(Kr)&&(Kr=null),rf.forEach(tC),of.forEach(tC)}function i0(i,s){i.blockedOn===s&&(i.blockedOn=null,$v||($v=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,VR)))}var n0=null;function eC(i){n0!==i&&(n0=i,p.unstable_scheduleCallback(p.unstable_NormalPriority,function(){n0===i&&(n0=null);for(var s=0;s<i.length;s+=3){var r=i[s],c=i[s+1],g=i[s+2];if(typeof c!="function"){if(Kv(c||r)===null)continue;break}var y=qc(r);y!==null&&(i.splice(s,3),s-=3,Xb(y,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function Cu(i){function s(N){return i0(N,i)}Yr!==null&&i0(Yr,i),Xr!==null&&i0(Xr,i),Kr!==null&&i0(Kr,i),rf.forEach(s),of.forEach(s);for(var r=0;r<$r.length;r++){var c=$r[r];c.blockedOn===i&&(c.blockedOn=null)}for(;0<$r.length&&(r=$r[0],r.blockedOn===null);)J_(r),r.blockedOn===null&&$r.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],y=r[c+1],S=g[Yi]||null;if(typeof y=="function")S||eC(r);else if(S){var x=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[Yi]||null)x=S.formAction;else if(Kv(g)!==null)continue}else x=S.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),eC(r)}}}function iC(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Qv(i){this._internalRoot=i}s0.prototype.render=Qv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var r=s.current,c=bn();X_(r,c,i,s,null,null)},s0.prototype.unmount=Qv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;X_(i.current,2,null,i,null,null),Fm(),s[jc]=null}};function s0(i){this._internalRoot=i}s0.prototype.unstable_scheduleHydration=function(i){if(i){var s=d1();i={blockedOn:null,target:i,priority:s};for(var r=0;r<$r.length&&s!==0&&s<$r[r].priority;r++);$r.splice(r,0,i),r===0&&J_(i)}};var nC=t.version;if(nC!=="19.2.4")throw Error(n(527,nC,"19.2.4"));X.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var YR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{md=a0.inject(YR),un=a0}catch{}}return uf.createRoot=function(i,s){if(!a(i))throw Error(n(299));var r=!1,c="",g=uw,y=hw,S=dw;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=V_(i,1,!1,null,null,r,c,null,g,y,S,iC),i[jc]=s.current,Ov(i),new Qv(s)},uf.hydrateRoot=function(i,s,r){if(!a(i))throw Error(n(299));var c=!1,g="",y=uw,S=hw,x=dw,N=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(N=r.formState)),s=V_(i,1,!0,s,r??null,c,g,N,y,S,x,iC),s.context=Y_(null),r=s.current,c=bn(),c=Py(c),g=kr(c),g.callback=null,Br(r,g,c),r=c,s.current.lanes=r,bd(s,r),Ps(s),i[jc]=s.current,Ov(i),new s0(s)},uf.version="19.2.4",uf}var gC;function aD(){if(gC)return tA.exports;gC=1;function p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p)}catch(t){console.error(t)}}return p(),tA.exports=sD(),tA.exports}var rD=aD();const oD=rT(rD);var pC;(function(p){p.STRING="string",p.NUMBER="number",p.INTEGER="integer",p.BOOLEAN="boolean",p.ARRAY="array",p.OBJECT="object"})(pC||(pC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mC;(function(p){p.LANGUAGE_UNSPECIFIED="language_unspecified",p.PYTHON="python"})(mC||(mC={}));var yC;(function(p){p.OUTCOME_UNSPECIFIED="outcome_unspecified",p.OUTCOME_OK="outcome_ok",p.OUTCOME_FAILED="outcome_failed",p.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(yC||(yC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=["user","model","function","system"];var vC;(function(p){p.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",p.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",p.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",p.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",p.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",p.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(vC||(vC={}));var AC;(function(p){p.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",p.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",p.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",p.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",p.BLOCK_NONE="BLOCK_NONE"})(AC||(AC={}));var SC;(function(p){p.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",p.NEGLIGIBLE="NEGLIGIBLE",p.LOW="LOW",p.MEDIUM="MEDIUM",p.HIGH="HIGH"})(SC||(SC={}));var EC;(function(p){p.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",p.SAFETY="SAFETY",p.OTHER="OTHER"})(EC||(EC={}));var zf;(function(p){p.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",p.STOP="STOP",p.MAX_TOKENS="MAX_TOKENS",p.SAFETY="SAFETY",p.RECITATION="RECITATION",p.LANGUAGE="LANGUAGE",p.BLOCKLIST="BLOCKLIST",p.PROHIBITED_CONTENT="PROHIBITED_CONTENT",p.SPII="SPII",p.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",p.OTHER="OTHER"})(zf||(zf={}));var wC;(function(p){p.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",p.RETRIEVAL_QUERY="RETRIEVAL_QUERY",p.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",p.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",p.CLASSIFICATION="CLASSIFICATION",p.CLUSTERING="CLUSTERING"})(wC||(wC={}));var _C;(function(p){p.MODE_UNSPECIFIED="MODE_UNSPECIFIED",p.AUTO="AUTO",p.ANY="ANY",p.NONE="NONE"})(_C||(_C={}));var CC;(function(p){p.MODE_UNSPECIFIED="MODE_UNSPECIFIED",p.MODE_DYNAMIC="MODE_DYNAMIC"})(CC||(CC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Tu extends Bi{constructor(t,e){super(t),this.response=e}}class oT extends Bi{constructor(t,e,n,a){super(t),this.status=e,this.statusText=n,this.errorDetails=a}}class Vo extends Bi{}class lT extends Bi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="https://generativelanguage.googleapis.com",cD="v1beta",uD="0.24.1",hD="genai-js";var Ic;(function(p){p.GENERATE_CONTENT="generateContent",p.STREAM_GENERATE_CONTENT="streamGenerateContent",p.COUNT_TOKENS="countTokens",p.EMBED_CONTENT="embedContent",p.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ic||(Ic={}));class dD{constructor(t,e,n,a,l){this.model=t,this.task=e,this.apiKey=n,this.stream=a,this.requestOptions=l}toString(){var t,e;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||cD;let l=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||lD}/${n}/${this.model}:${this.task}`;return this.stream&&(l+="?alt=sse"),l}}function fD(p){const t=[];return p!=null&&p.apiClient&&t.push(p.apiClient),t.push(`${hD}/${uD}`),t.join(" ")}async function gD(p){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",fD(p.requestOptions)),e.append("x-goog-api-key",p.apiKey);let n=(t=p.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Vo(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,l]of n.entries()){if(a==="x-goog-api-key")throw new Vo(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Vo(`Header name ${a} can only be set using the apiClient field`);e.append(a,l)}}return e}async function pD(p,t,e,n,a,l){const u=new dD(p,t,e,n,l);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},vD(l)),{method:"POST",headers:await gD(u),body:a})}}async function Bp(p,t,e,n,a,l={},u=fetch){const{url:h,fetchOptions:d}=await pD(p,t,e,n,a,l);return mD(h,d,u)}async function mD(p,t,e=fetch){let n;try{n=await e(p,t)}catch(a){yD(a,p)}return n.ok||await bD(n,p),n}function yD(p,t){let e=p;throw e.name==="AbortError"?(e=new lT(`Request aborted when fetching ${t.toString()}: ${p.message}`),e.stack=p.stack):p instanceof oT||p instanceof Vo||(e=new Bi(`Error fetching from ${t.toString()}: ${p.message}`),e.stack=p.stack),e}async function bD(p,t){let e="",n;try{const a=await p.json();e=a.error.message,a.error.details&&(e+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new oT(`Error fetching from ${t.toString()}: [${p.status} ${p.statusText}] ${e}`,p.status,p.statusText,n)}function vD(p){const t={};if((p==null?void 0:p.signal)!==void 0||(p==null?void 0:p.timeout)>=0){const e=new AbortController;(p==null?void 0:p.timeout)>=0&&setTimeout(()=>e.abort(),p.timeout),p!=null&&p.signal&&p.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(p){return p.text=()=>{if(p.candidates&&p.candidates.length>0){if(p.candidates.length>1&&console.warn(`This response had ${p.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),p0(p.candidates[0]))throw new Tu(`${Zr(p)}`,p);return AD(p)}else if(p.promptFeedback)throw new Tu(`Text not available. ${Zr(p)}`,p);return""},p.functionCall=()=>{if(p.candidates&&p.candidates.length>0){if(p.candidates.length>1&&console.warn(`This response had ${p.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),p0(p.candidates[0]))throw new Tu(`${Zr(p)}`,p);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),TC(p)[0]}else if(p.promptFeedback)throw new Tu(`Function call not available. ${Zr(p)}`,p)},p.functionCalls=()=>{if(p.candidates&&p.candidates.length>0){if(p.candidates.length>1&&console.warn(`This response had ${p.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),p0(p.candidates[0]))throw new Tu(`${Zr(p)}`,p);return TC(p)}else if(p.promptFeedback)throw new Tu(`Function call not available. ${Zr(p)}`,p)},p}function AD(p){var t,e,n,a;const l=[];if(!((e=(t=p.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const u of(a=(n=p.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)u.text&&l.push(u.text),u.executableCode&&l.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&l.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return l.length>0?l.join(""):""}function TC(p){var t,e,n,a;const l=[];if(!((e=(t=p.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const u of(a=(n=p.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)u.functionCall&&l.push(u.functionCall);if(l.length>0)return l}const SD=[zf.RECITATION,zf.SAFETY,zf.LANGUAGE];function p0(p){return!!p.finishReason&&SD.includes(p.finishReason)}function Zr(p){var t,e,n;let a="";if((!p.candidates||p.candidates.length===0)&&p.promptFeedback)a+="Response was blocked",!((t=p.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${p.promptFeedback.blockReason}`),!((e=p.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(a+=`: ${p.promptFeedback.blockReasonMessage}`);else if(!((n=p.candidates)===null||n===void 0)&&n[0]){const l=p.candidates[0];p0(l)&&(a+=`Candidate was blocked due to ${l.finishReason}`,l.finishMessage&&(a+=`: ${l.finishMessage}`))}return a}function Ff(p){return this instanceof Ff?(this.v=p,this):new Ff(p)}function ED(p,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(p,t||[]),a,l=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(v){n[v]&&(a[v]=function(E){return new Promise(function(T,C){l.push([v,E,T,C])>1||h(v,E)})})}function h(v,E){try{d(n[v](E))}catch(T){b(l[0][3],T)}}function d(v){v.value instanceof Ff?Promise.resolve(v.value.v).then(f,m):b(l[0][2],v)}function f(v){h("next",v)}function m(v){h("throw",v)}function b(v,E){v(E),l.shift(),l.length&&h(l[0][0],l[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function wD(p){const t=p.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=TD(t),[n,a]=e.tee();return{stream:CD(n),response:_D(a)}}async function _D(p){const t=[],e=p.getReader();for(;;){const{done:n,value:a}=await e.read();if(n)return jS(xD(t));t.push(a)}}function CD(p){return ED(this,arguments,function*(){const e=p.getReader();for(;;){const{value:n,done:a}=yield Ff(e.read());if(a)break;yield yield Ff(jS(n))}})}function TD(p){const t=p.getReader();return new ReadableStream({start(n){let a="";return l();function l(){return t.read().then(({value:u,done:h})=>{if(h){if(a.trim()){n.error(new Bi("Failed to parse stream"));return}n.close();return}a+=u;let d=a.match(xC),f;for(;d;){try{f=JSON.parse(d[1])}catch{n.error(new Bi(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(f),a=a.substring(d[0].length),d=a.match(xC)}return l()}).catch(u=>{let h=u;throw h.stack=u.stack,h.name==="AbortError"?h=new lT("Request aborted when reading from the stream"):h=new Bi("Error reading from the stream"),h})}}})}function xD(p){const t=p[p.length-1],e={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of p){if(n.candidates){let a=0;for(const l of n.candidates)if(e.candidates||(e.candidates=[]),e.candidates[a]||(e.candidates[a]={index:a}),e.candidates[a].citationMetadata=l.citationMetadata,e.candidates[a].groundingMetadata=l.groundingMetadata,e.candidates[a].finishReason=l.finishReason,e.candidates[a].finishMessage=l.finishMessage,e.candidates[a].safetyRatings=l.safetyRatings,l.content&&l.content.parts){e.candidates[a].content||(e.candidates[a].content={role:l.content.role||"user",parts:[]});const u={};for(const h of l.content.parts)h.text&&(u.text=h.text),h.functionCall&&(u.functionCall=h.functionCall),h.executableCode&&(u.executableCode=h.executableCode),h.codeExecutionResult&&(u.codeExecutionResult=h.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),e.candidates[a].content.parts.push(u)}a++}n.usageMetadata&&(e.usageMetadata=n.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(p,t,e,n){const a=await Bp(t,Ic.STREAM_GENERATE_CONTENT,p,!0,JSON.stringify(e),n);return wD(a)}async function uT(p,t,e,n){const l=await(await Bp(t,Ic.GENERATE_CONTENT,p,!1,JSON.stringify(e),n)).json();return{response:jS(l)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(p){if(p!=null){if(typeof p=="string")return{role:"system",parts:[{text:p}]};if(p.text)return{role:"system",parts:[p]};if(p.parts)return p.role?p:{role:"system",parts:p.parts}}}function Uf(p){let t=[];if(typeof p=="string")t=[{text:p}];else for(const e of p)typeof e=="string"?t.push({text:e}):t.push(e);return MD(t)}function MD(p){const t={role:"user",parts:[]},e={role:"function",parts:[]};let n=!1,a=!1;for(const l of p)"functionResponse"in l?(e.parts.push(l),a=!0):(t.parts.push(l),n=!0);if(n&&a)throw new Bi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Bi("No content is provided for sending chat message.");return n?t:e}function RD(p,t){var e;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(e=t==null?void 0:t.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const a=p.generateContentRequest!=null;if(p.contents){if(a)throw new Vo("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=p.contents}else if(a)n=Object.assign(Object.assign({},n),p.generateContentRequest);else{const l=Uf(p);n.contents=[l]}return{generateContentRequest:n}}function MC(p){let t;return p.contents?t=p:t={contents:[Uf(p)]},p.systemInstruction&&(t.systemInstruction=hT(p.systemInstruction)),t}function DD(p){return typeof p=="string"||Array.isArray(p)?{content:Uf(p)}:p}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],OD={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ND(p){let t=!1;for(const e of p){const{role:n,parts:a}=e;if(!t&&n!=="user")throw new Bi(`First content should be with role 'user', got ${n}`);if(!bC.includes(n))throw new Bi(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(bC)}`);if(!Array.isArray(a))throw new Bi("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Bi("Each Content should have at least one part");const l={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of a)for(const d of RC)d in h&&(l[d]+=1);const u=OD[n];for(const h of RC)if(!u.includes(h)&&l[h]>0)throw new Bi(`Content with role '${n}' can't contain '${h}' part`);t=!0}}function DC(p){var t;if(p.candidates===void 0||p.candidates.length===0)return!1;const e=(t=p.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const n of e.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="SILENT_ERROR";class LD{constructor(t,e,n,a={}){this.model=e,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(ND(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var n,a,l,u,h,d;await this._sendPromise;const f=Uf(t),m={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},b=Object.assign(Object.assign({},this._requestOptions),e);let v;return this._sendPromise=this._sendPromise.then(()=>uT(this._apiKey,this.model,m,b)).then(E=>{var T;if(DC(E.response)){this._history.push(f);const C=Object.assign({parts:[],role:"model"},(T=E.response.candidates)===null||T===void 0?void 0:T[0].content);this._history.push(C)}else{const C=Zr(E.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}v=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,v}async sendMessageStream(t,e={}){var n,a,l,u,h,d;await this._sendPromise;const f=Uf(t),m={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},b=Object.assign(Object.assign({},this._requestOptions),e),v=cT(this._apiKey,this.model,m,b);return this._sendPromise=this._sendPromise.then(()=>v).catch(E=>{throw new Error(OC)}).then(E=>E.response).then(E=>{if(DC(E)){this._history.push(f);const T=Object.assign({},E.candidates[0].content);T.role||(T.role="model"),this._history.push(T)}else{const T=Zr(E);T&&console.warn(`sendMessageStream() was unsuccessful. ${T}. Inspect response object for details.`)}}).catch(E=>{E.message!==OC&&console.error(E)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(p,t,e,n){return(await Bp(t,Ic.COUNT_TOKENS,p,!1,JSON.stringify(e),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(p,t,e,n){return(await Bp(t,Ic.EMBED_CONTENT,p,!1,JSON.stringify(e),n)).json()}async function ID(p,t,e,n){const a=e.requests.map(u=>Object.assign(Object.assign({},u),{model:t}));return(await Bp(t,Ic.BATCH_EMBED_CONTENTS,p,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(t,e,n={}){this.apiKey=t,this._requestOptions=n,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=hT(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var n;const a=MC(t),l=Object.assign(Object.assign({},this._requestOptions),e);return uT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),l)}async generateContentStream(t,e={}){var n;const a=MC(t),l=Object.assign(Object.assign({},this._requestOptions),e);return cT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),l)}startChat(t){var e;return new LD(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const n=RD(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),e);return kD(this.apiKey,this.model,n,a)}async embedContent(t,e={}){const n=DD(t),a=Object.assign(Object.assign({},this._requestOptions),e);return BD(this.apiKey,this.model,n,a)}async batchEmbedContents(t,e={}){const n=Object.assign(Object.assign({},this._requestOptions),e);return ID(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new Bi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new NC(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,n){if(!t.name)throw new Vo("Cached content must contain a `name` field.");if(!t.model)throw new Vo("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const u of a)if(e!=null&&e[u]&&t[u]&&(e==null?void 0:e[u])!==t[u]){if(u==="model"){const h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(h===d)continue}throw new Vo(`Different value for "${u}" specified in modelParams (${e[u]}) and cachedContent (${t[u]})`)}const l=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new NC(this.apiKey,l,n)}}const ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fA=[.001,0,0,.001,0,0],sA=1.35,Un={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Pf="pdfjs_internal_editor_",Mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},FD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},gA={TRIANGLES:1,LATTICE:2},We={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},m0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ve={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Mu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},My={ERRORS:0,WARNINGS:1,INFOS:5},Hf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},hf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},UD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ry=My.WARNINGS;function PD(p){Number.isInteger(p)&&(Ry=p)}function HD(){return Ry}function Dy(p){Ry>=My.INFOS&&console.info(`Info: ${p}`)}function Ct(p){Ry>=My.WARNINGS&&console.warn(`Warning: ${p}`)}function fe(p){throw new Error(p)}function jt(p,t){p||fe(t)}function jD(p){switch(p==null?void 0:p.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function dT(p,t=null,e=null){if(!p)return null;if(e&&typeof p=="string"){if(e.addDefaultProtocol&&p.startsWith("www.")){const a=p.match(/\./g);(a==null?void 0:a.length)>=2&&(p=`http://${p}`)}if(e.tryConvertEncoding)try{p=XD(p)}catch{}}const n=t?URL.parse(p,t):URL.parse(p);return jD(n)?n:null}function fT(p,t,e=!1){const n=URL.parse(p);return n?(n.hash=t,n.href):e&&dT(p,"http://example.com")?p.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Tt(p,t,e,n=!1){return Object.defineProperty(p,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Pc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class LC extends Pc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class aA extends Pc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class pA extends Pc{constructor(t){super(t,"InvalidPDFException")}}class Q0 extends Pc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class GD extends Pc{constructor(t){super(t,"FormatError")}}class Yo extends Pc{constructor(t){super(t,"AbortException")}}function gT(p){(typeof p!="object"||(p==null?void 0:p.length)===void 0)&&fe("Invalid argument for bytesToString");const t=p.length,e=8192;if(t<e)return String.fromCharCode.apply(null,p);const n=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),u=p.subarray(a,l);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function Ip(p){typeof p!="string"&&fe("Invalid argument for stringToBytes");const t=p.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=p.charCodeAt(n)&255;return e}function qD(p){return String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,p&255)}function VD(){const p=new Uint8Array(4);return p[0]=1,new Uint32Array(p.buffer,0,1)[0]===1}function YD(){try{return new Function(""),!0}catch{return!1}}class ii{static get isLittleEndian(){return Tt(this,"isLittleEndian",VD())}static get isEvalSupported(){return Tt(this,"isEvalSupported",YD())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Tt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Tt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Tt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Tt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const rA=Array.from(Array(256).keys(),p=>p.toString(16).padStart(2,"0"));var Sr,y0,mA;class rt{static makeHexColor(t,e,n){return`#${rA[t]}${rA[e]}${rA[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const a=t[n],l=t[n+1];t[n]=a*e[0]+l*e[2]+e[4],t[n+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],l=e[1],u=e[2],h=e[3],d=e[4],f=e[5];for(let m=0;m<6;m+=2){const b=t[n+m],v=t[n+m+1];t[n+m]=b*a+v*u+d,t[n+m+1]=b*l+v*h+f}}static applyInverseTransform(t,e){const n=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,n){const a=e[0],l=e[1],u=e[2],h=e[3],d=e[4],f=e[5],m=t[0],b=t[1],v=t[2],E=t[3];let T=a*m+d,C=T,R=a*v+d,M=R,O=h*b+f,D=O,L=h*E+f,k=L;if(l!==0||u!==0){const z=l*m,F=l*v,W=u*b,Y=u*E;T+=W,M+=W,R+=Y,C+=Y,O+=z,k+=z,L+=F,D+=F}n[0]=Math.min(n[0],T,R,C,M),n[1]=Math.min(n[1],O,L,D,k),n[2]=Math.max(n[2],T,R,C,M),n[3]=Math.max(n[3],O,L,D,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],l=t[2],u=t[3],h=n**2+a**2,d=n*l+a*u,f=l**2+u**2,m=(h+f)/2,b=Math.sqrt(m**2-(h*f-d**2));e[0]=Math.sqrt(m+b||1),e[1]=Math.sqrt(m-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>u?null:[n,l,a,u]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],e,a)}static bezierBoundingBox(t,e,n,a,l,u,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),_(this,Sr,mA).call(this,t,n,l,h,e,a,u,d,3*(-t+3*(n-l)+h),6*(t-2*n+l),3*(n-t),f),_(this,Sr,mA).call(this,t,n,l,h,e,a,u,d,3*(-e+3*(a-u)+d),6*(e-2*a+u),3*(a-e),f)}}Sr=new WeakSet,y0=function(t,e,n,a,l,u,h,d,f,m){if(f<=0||f>=1)return;const b=1-f,v=f*f,E=v*f,T=b*(b*(b*t+3*f*e)+3*v*n)+E*a,C=b*(b*(b*l+3*f*u)+3*v*h)+E*d;m[0]=Math.min(m[0],T),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],T),m[3]=Math.max(m[3],C)},mA=function(t,e,n,a,l,u,h,d,f,m,b,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&_(this,Sr,y0).call(this,t,e,n,a,l,u,h,d,-b/m,v);return}const E=m**2-4*b*f;if(E<0)return;const T=Math.sqrt(E),C=2*f;_(this,Sr,y0).call(this,t,e,n,a,l,u,h,d,(-m+T)/C,v),_(this,Sr,y0).call(this,t,e,n,a,l,u,h,d,(-m-T)/C,v)},w(rt,Sr);function XD(p){return decodeURIComponent(escape(p))}let oA=null,kC=null;function KD(p){return oA||(oA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,kC=new Map([["","t"]])),p.replaceAll(oA,(t,e,n)=>e?e.normalize("NFKC"):kC.get(n))}function pT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const p=new Uint8Array(32);return crypto.getRandomValues(p),gT(p)}const Iu="pdfjs_internal_id_";function $D(p,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...l]=e;if(!p(n)&&!Number.isInteger(n)||!t(a))return!1;const u=l.length;let h=!0;switch(a.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Gi(p,t,e){return Math.min(Math.max(p,t),e)}function mT(p){return Uint8Array.prototype.toBase64?p.toBase64():btoa(gT(p))}function QD(p){return Uint8Array.fromBase64?Uint8Array.fromBase64(p):Ip(atob(p))}typeof Promise.try!="function"&&(Promise.try=function(p,...t){return new Promise(e=>{e(p(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(p){return p.reduce((t,e)=>t+e,0)});class jf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(l){var d;if(!l)return;let u=null;const h=l.name;if(h==="#text")u=l.value;else if(jf.shouldBuildText(h))(d=l==null?void 0:l.attributes)!=null&&d.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&e.push({str:u}),!!l.children)for(const f of l.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class yT{static setupStorage(t,e,n,a,l){const u=a.getValue(e,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of n.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:l}){const{attributes:u}=e,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${a}`);for(const[d,f]of Object.entries(u))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&l.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,e,n)}static render(t){var b,v;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,l=t.intent||"display",u=document.createElement(a.name);a.attributes&&this.setAttributes({html:u,element:a,intent:l,linkService:n});const h=l!=="richText",d=t.div;if(d.append(u),t.viewport){const E=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=E}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const E=document.createTextNode(a.value);u.append(E),h&&jf.shouldBuildText(a.name)&&f.push(E)}return{textDivs:f}}const m=[[a,-1,u]];for(;m.length>0;){const[E,T,C]=m.at(-1);if(T+1===E.children.length){m.pop();continue}const R=E.children[++m.at(-1)[1]];if(R===null)continue;const{name:M}=R;if(M==="#text"){const D=document.createTextNode(R.value);f.push(D),C.append(D);continue}const O=(b=R==null?void 0:R.attributes)!=null&&b.xmlns?document.createElementNS(R.attributes.xmlns,M):document.createElement(M);if(C.append(O),R.attributes&&this.setAttributes({html:O,element:R,storage:e,intent:l,linkService:n}),((v=R.children)==null?void 0:v.length)>0)m.push([R,-1,O]);else if(R.value){const D=document.createTextNode(R.value);h&&jf.shouldBuildText(M)&&f.push(D),O.append(D)}}for(const E of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ba="http://www.w3.org/2000/svg",bl=class bl{};et(bl,"CSS",96),et(bl,"PDF",72),et(bl,"PDF_TO_CSS_UNITS",bl.CSS/bl.PDF);let Xo=bl;async function zp(p,t="text"){if(mf(p,document.baseURI)){const e=await fetch(p);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",p,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class Fp{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:l=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=l,this.offsetY=u,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,b,v,E;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,b=0,v=0,E=1;break;case 90:m=0,b=1,v=1,E=0;break;case 270:m=0,b=-1,v=-1,E=0;break;case 0:m=1,b=0,v=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,E=-E);let T,C,R,M;m===0?(T=Math.abs(f-t[1])*n+l,C=Math.abs(d-t[0])*n+u,R=(t[3]-t[1])*n,M=(t[2]-t[0])*n):(T=Math.abs(d-t[0])*n+l,C=Math.abs(f-t[1])*n+u,R=(t[2]-t[0])*n,M=(t[3]-t[1])*n),this.transform=[m*n,b*n,v*n,E*n,T-m*n*d-v*n*f,C-b*n*d-E*n*f],this.width=R,this.height=M}get rawDims(){const t=this.viewBox;return Tt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Fp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const n=[t,e];return rt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];rt.applyTransform(e,this.transform);const n=[t[2],t[3]];return rt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return rt.applyInverseTransform(n,this.transform),n}}class GS extends Pc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Oy(p){const t=p.length;let e=0;for(;e<t&&p[e].trim()==="";)e++;return p.substring(e,e+5).toLowerCase()==="data:"}function qS(p){return typeof p=="string"&&/\.pdf$/i.test(p)}function WD(p){return[p]=p.split(/[#?]/,1),p.substring(p.lastIndexOf("/")+1)}function ZD(p,t="document.pdf"){if(typeof p!="string")return t;if(Oy(p))return Ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(p);if(!n)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,u=n.pathname.split("/").at(-1);if(l.test(u))return a(u);if(n.searchParams.size>0){const h=Array.from(n.searchParams.values()).reverse();for(const f of h)if(l.test(f))return a(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return a(d[0])}return t}class BC{constructor(){et(this,"started",Object.create(null));et(this,"times",[])}time(t){t in this.started&&Ct(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ct(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:l}of this.times)t.push(`${n.padEnd(e)} ${l-a}ms
`);return t.join("")}}function mf(p,t){const e=t?URL.parse(p,t):URL.parse(p);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ms(p){p.preventDefault()}function Be(p){p.preventDefault(),p.stopPropagation()}function JD(p){console.log("Deprecated API usage: "+p)}var Vf;class W0{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;o(this,Vf)||A(this,Vf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,Vf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(u+=m,h+=b):f==="+"&&(u-=m,h-=b),new Date(Date.UTC(n,a,l,u,h,d))}}Vf=new WeakMap,w(W0,Vf);function tO(p,{scale:t=1,rotation:e=0}){const{width:n,height:a}=p.attributes.style,l=[0,0,parseInt(n),parseInt(a)];return new Fp({viewBox:l,userUnit:1,scale:t,rotation:e})}function Up(p){if(p.startsWith("#")){const t=parseInt(p.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return p.startsWith("rgb(")?p.slice(4,-1).split(",").map(t=>parseInt(t)):p.startsWith("rgba(")?p.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ct(`Not a valid color format: "${p}"`),[0,0,0])}function eO(p){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of p.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;p.set(e,Up(n))}t.remove()}function Te(p){const{a:t,b:e,c:n,d:a,e:l,f:u}=p.getTransform();return[t,e,n,a,l,u]}function Hs(p){const{a:t,b:e,c:n,d:a,e:l,f:u}=p.getTransform().invertSelf();return[t,e,n,a,l,u]}function zc(p,t,e=!1,n=!0){if(t instanceof Fp){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:u}=p,h=ii.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,m=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(u.width=m,u.height=b):(u.width=b,u.height=m)}n&&p.setAttribute("data-main-rotation",t.rotation)}class ga{constructor(){const{pixelRatio:t}=ga;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,l=-1){let u=1/0,h=1/0,d=1/0;n=ga.capPixels(n,l),n>0&&(u=Math.sqrt(n/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(u,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const yA=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class iO{static get isDarkMode(){var t;return Tt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class nO{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Tt(this,"commentForegroundColor",Up(n))}}function sO(p,t,e,n){n=Math.min(Math.max(n??1,0),1);const a=255*(1-n);return p=Math.round(p*n+a),t=Math.round(t*n+a),e=Math.round(e*n+a),[p,t,e]}function IC(p,t){const e=p[0]/255,n=p[1]/255,a=p[2]/255,l=Math.max(e,n,a),u=Math.min(e,n,a),h=(l+u)/2;if(l===u)t[0]=t[1]=0;else{const d=l-u;switch(t[1]=h<.5?d/(l+u):d/(2-l-u),l){case e:t[0]=((n-a)/d+(n<a?6:0))*60;break;case n:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-n)/d+4)*60;break}}t[2]=h}function bA(p,t){const e=p[0],n=p[1],a=p[2],l=(1-Math.abs(2*a-1))*n,u=l*(1-Math.abs(e/60%2-1)),h=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=u+h,t[2]=h;break;case 1:t[0]=u+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=u+h;break;case 3:t[0]=h,t[1]=u+h,t[2]=l+h;break;case 4:t[0]=u+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=u+h;break}}function zC(p){return p<=.03928?p/12.92:((p+.055)/1.055)**2.4}function FC(p,t,e){bA(p,e),e.map(zC);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];bA(t,e),e.map(zC);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)}const UC=new Map;function aO(p,t){const e=p[0]+p[1]*256+p[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=UC.get(e);if(n)return n;const a=new Float32Array(9),l=a.subarray(0,3),u=a.subarray(3,6);IC(p,u);const h=a.subarray(6,9);IC(t,h);const d=h[2]<.5,f=d?12:4.5;if(u[2]=d?Math.sqrt(u[2]):1-Math.sqrt(1-u[2]),FC(u,h,l)<f){let m,b;d?(m=u[2],b=1):(m=0,b=u[2]);const v=.005;for(;b-m>v;){const E=u[2]=(m+b)/2;d===FC(u,h,l)<f?m=E:b=E}u[2]=d?b:m}return bA(u,l),n=rt.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),UC.set(e,n),n}function bT({html:p,dir:t,className:e},n){const a=document.createDocumentFragment();if(typeof p=="string"){const l=document.createElement("p");l.dir=t||"auto";const u=p.split(/(?:\r\n?|\n)/);for(let h=0,d=u.length;h<d;++h){const f=u[h];l.append(document.createTextNode(f)),h<d-1&&l.append(document.createElement("br"))}a.append(l)}else yT.render({xfaHtml:p,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),n.append(a)}function vT(p){const t=new Path2D;if(!p)return t;for(let e=0,n=p.length;e<n;)switch(p[e++]){case hf.moveTo:t.moveTo(p[e++],p[e++]);break;case hf.lineTo:t.lineTo(p[e++],p[e++]);break;case hf.curveTo:t.bezierCurveTo(p[e++],p[e++],p[e++],p[e++],p[e++],p[e++]);break;case hf.quadraticCurveTo:t.quadraticCurveTo(p[e++],p[e++],p[e++],p[e++]);break;case hf.closePath:t.closePath();break;default:Ct(`Unrecognized drawing path operator: ${p[e-1]}`);break}return t}var to,eo,is,ns,Yf,io,Gu,qu,Xf,cy,AT,Ti,ST,ET,Ru,yf;const Fa=class Fa{constructor(t){w(this,Ti);w(this,to,null);w(this,eo,null);w(this,is);w(this,ns,null);w(this,Yf,null);w(this,io,null);w(this,Gu,null);w(this,qu,null);A(this,is,t),o(Fa,Xf)||A(Fa,Xf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,to,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,is)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ms,{signal:e}),t.addEventListener("pointerdown",_(Fa,cy,AT),{signal:e}));const n=A(this,ns,document.createElement("div"));n.className="buttons",t.append(n);const a=o(this,is).toolbarPosition;if(a){const{style:l}=t,u=o(this,is)._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return o(this,to)}hide(){var t;o(this,to).classList.add("hidden"),(t=o(this,eo))==null||t.hideDropdown()}show(){var t,e;o(this,to).classList.remove("hidden"),(t=o(this,Yf))==null||t.shown(),(e=o(this,io))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=o(this,is),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",o(Fa,Xf)[t]),_(this,Ti,Ru).call(this,n)&&n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),o(this,ns).append(n)}async addAltText(t){const e=await t.render();_(this,Ti,Ru).call(this,e),o(this,ns).append(e,o(this,Ti,yf)),A(this,Yf,t)}addComment(t,e=null){if(o(this,io))return;const n=t.renderForToolbar();if(!n)return;_(this,Ti,Ru).call(this,n);const a=A(this,Gu,o(this,Ti,yf));e?(o(this,ns).insertBefore(n,e),o(this,ns).insertBefore(a,e)):o(this,ns).append(n,a),A(this,io,t),t.toolbar=this}addColorPicker(t){if(o(this,eo))return;A(this,eo,t);const e=t.renderButton();_(this,Ti,Ru).call(this,e),o(this,ns).append(e,o(this,Ti,yf))}async addEditSignatureButton(t){const e=A(this,qu,await t.renderEditButton(o(this,is)));_(this,Ti,Ru).call(this,e),o(this,ns).append(e,o(this,Ti,yf))}removeButton(t){var e,n;switch(t){case"comment":(e=o(this,io))==null||e.removeToolbarCommentButton(),A(this,io,null),(n=o(this,Gu))==null||n.remove(),A(this,Gu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const a=o(this,ns).querySelector(n);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){o(this,qu)&&(o(this,qu).title=t)}remove(){var t;o(this,to).remove(),(t=o(this,eo))==null||t.destroy(),A(this,eo,null)}};to=new WeakMap,eo=new WeakMap,is=new WeakMap,ns=new WeakMap,Yf=new WeakMap,io=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Xf=new WeakMap,cy=new WeakSet,AT=function(t){t.stopPropagation()},Ti=new WeakSet,ST=function(t){o(this,is)._focusEventsAllowed=!1,Be(t)},ET=function(t){o(this,is)._focusEventsAllowed=!0,Be(t)},Ru=function(t){const e=o(this,is)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",_(this,Ti,ST).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",_(this,Ti,ET).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ms,{signal:e}),!0)},yf=function(){const t=document.createElement("div");return t.className="divider",t},w(Fa,cy),w(Fa,Xf,null);let vA=Fa;var Kf,Sl,Pa,_r,wT,_T,AA;class rO{constructor(t){w(this,_r);w(this,Kf,null);w(this,Sl,null);w(this,Pa);A(this,Pa,t)}show(t,e,n){const[a,l]=_(this,_r,_T).call(this,e,n),{style:u}=o(this,Sl)||A(this,Sl,_(this,_r,wT).call(this));t.append(o(this,Sl)),u.insetInlineEnd=`${100*a}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Sl).remove()}}Kf=new WeakMap,Sl=new WeakMap,Pa=new WeakMap,_r=new WeakSet,wT=function(){const t=A(this,Sl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=o(this,Pa)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ms,{signal:e});const n=A(this,Kf,document.createElement("div"));return n.className="buttons",t.append(n),o(this,Pa).hasCommentManager()&&_(this,_r,AA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{o(this,Pa).commentSelection("floating_button")}),_(this,_r,AA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{o(this,Pa).highlightSelection("floating_button")}),t},_T=function(t,e){let n=0,a=0;for(const l of t){const u=l.y+l.height;if(u<n)continue;const h=l.x+(e?l.width:0);if(u>n){a=h,n=u;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,n]},AA=function(t,e,n,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const u=document.createElement("span");l.append(u),u.className="visuallyHidden",u.setAttribute("data-l10n-id",n);const h=o(this,Pa)._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",ms,{signal:h}),l.addEventListener("click",a,{signal:h})),o(this,Kf).append(l)};function CT(p,t,e){for(const n of e)t.addEventListener(n,p[n].bind(p))}var El,wl,Vu,_l;const ne=class ne{static initializeAndAddPointerId(t){(o(ne,wl)||A(ne,wl,new Set)).add(t)}static setPointer(t,e){o(ne,El)||A(ne,El,e),o(ne,_l)??A(ne,_l,t)}static setTimeStamp(t){A(ne,Vu,t)}static isSamePointerId(t){return o(ne,El)===t}static isSamePointerIdOrRemove(t){var e;return o(ne,El)===t?!0:((e=o(ne,wl))==null||e.delete(t),!1)}static isSamePointerType(t){return o(ne,_l)===t}static isInitializedAndDifferentPointerType(t){return o(ne,_l)!==null&&!ne.isSamePointerType(t)}static isSameTimeStamp(t){return o(ne,Vu)===t}static isUsingMultiplePointers(){var t;return((t=o(ne,wl))==null?void 0:t.size)>=1}static clearPointerType(){A(ne,_l,null)}static clearPointerIds(){A(ne,El,NaN),A(ne,wl,null)}static clearTimeStamp(){A(ne,Vu,NaN)}};El=new WeakMap,wl=new WeakMap,Vu=new WeakMap,_l=new WeakMap,w(ne,El,NaN),w(ne,wl,null),w(ne,Vu,NaN),w(ne,_l,null);let Ri=ne;var uy;class oO{constructor(){w(this,uy,0)}get id(){return`${Pf}${Qe(this,uy)._++}`}}uy=new WeakMap;var Yu,$f,Di,Xu,b0;const ZS=class ZS{constructor(){w(this,Xu);w(this,Yu,pT());w(this,$f,0);w(this,Di,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Tt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:l}=t;return _(this,Xu,b0).call(this,`${e}_${n}_${a}_${l}`,t)}async getFromUrl(t){return _(this,Xu,b0).call(this,t,t)}async getFromBlob(t,e){const n=await e;return _(this,Xu,b0).call(this,t,n)}async getFromId(t){o(this,Di)||A(this,Di,new Map);const e=o(this,Di).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,Di)||A(this,Di,new Map);let n=o(this,Di).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${o(this,Yu)}_${Qe(this,$f)._++}`,refCounter:1,isSvg:!1},o(this,Di).set(t,n),o(this,Di).set(n.id,n),n}getSvgUrl(t){const e=o(this,Di).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;o(this,Di)||A(this,Di,new Map);const e=o(this,Di).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=l.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,Yu)}_`)}};Yu=new WeakMap,$f=new WeakMap,Di=new WeakMap,Xu=new WeakSet,b0=async function(t,e){o(this,Di)||A(this,Di,new Map);let n=o(this,Di).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${o(this,Yu)}_${Qe(this,$f)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await zp(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=ZS._isSVGFittingCanvas,u=new FileReader,h=new Image,d=new Promise((f,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,f()},u.onload=async()=>{const b=n.svgUrl=u.result;h.src=await l?`${b}#svgView(preserveAspectRatio(none))`:b},h.onerror=u.onerror=m});u.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Ct(a),n=null}return o(this,Di).set(t,n),n&&o(this,Di).set(n.id,n),n};let SA=ZS;var Fe,no,Qf,Ce;class lO{constructor(t=128){w(this,Fe,[]);w(this,no,!1);w(this,Qf);w(this,Ce,-1);A(this,Qf,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(a&&t(),o(this,no))return;const d={cmd:t,undo:e,post:n,type:l};if(o(this,Ce)===-1){o(this,Fe).length>0&&(o(this,Fe).length=0),A(this,Ce,0),o(this,Fe).push(d);return}if(u&&o(this,Fe)[o(this,Ce)].type===l){h&&(d.undo=o(this,Fe)[o(this,Ce)].undo),o(this,Fe)[o(this,Ce)]=d;return}const f=o(this,Ce)+1;f===o(this,Qf)?o(this,Fe).splice(0,1):(A(this,Ce,f),f<o(this,Fe).length&&o(this,Fe).splice(f)),o(this,Fe).push(d)}undo(){if(o(this,Ce)===-1)return;A(this,no,!0);const{undo:t,post:e}=o(this,Fe)[o(this,Ce)];t(),e==null||e(),A(this,no,!1),A(this,Ce,o(this,Ce)-1)}redo(){if(o(this,Ce)<o(this,Fe).length-1){A(this,Ce,o(this,Ce)+1),A(this,no,!0);const{cmd:t,post:e}=o(this,Fe)[o(this,Ce)];t(),e==null||e(),A(this,no,!1)}}hasSomethingToUndo(){return o(this,Ce)!==-1}hasSomethingToRedo(){return o(this,Ce)<o(this,Fe).length-1}cleanType(t){if(o(this,Ce)!==-1){for(let e=o(this,Ce);e>=0;e--)if(o(this,Fe)[e].type!==t){o(this,Fe).splice(e+1,o(this,Ce)-e),A(this,Ce,e);return}o(this,Fe).length=0,A(this,Ce,-1)}}destroy(){A(this,Fe,null)}}Fe=new WeakMap,no=new WeakMap,Qf=new WeakMap,Ce=new WeakMap;var hy,TT;class Pp{constructor(t){w(this,hy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ii.platform;for(const[n,a,l={}]of t)for(const u of n){const h=u.startsWith("mac+");e&&h?(this.callbacks.set(u.slice(4),{callback:a,options:l}),this.allKeys.add(u.split("+").at(-1))):!e&&!h&&(this.callbacks.set(u,{callback:a,options:l}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(_(this,hy,TT).call(this,e));if(!n)return;const{callback:a,options:{bubbles:l=!1,args:u=[],checker:h=null}}=n;h&&!h(t,e)||(a.bind(t,...u,e)(),l||Be(e))}}hy=new WeakSet,TT=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const dy=class dy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return eO(t),Tt(this,"_colors",t)}convert(t){const e=Up(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((l,u)=>l===e[u]))return dy._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?rt.makeHexColor(...e):t}};et(dy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let EA=dy;var Ku,An,$u,De,Je,Qu,ss,Wu,as,Oi,so,ao,Zu,ro,Vs,rs,Cl,Wf,Zf,Ju,Jf,Ys,oo,th,lo,Xs,fy,co,eh,tg,uo,Tl,ih,ho,eg,Ye,Zt,Ha,fo,go,ig,nh,ng,po,Ks,ja,sg,ag,os,st,v0,wA,xT,MT,bf,RT,DT,OT,_A,NT,LT,kT,BT,zi,Ia,IT,zT,CA,FT,vf,TA;const Fu=class Fu{constructor(t,e,n,a,l,u,h,d,f,m,b,v,E,T,C,R){w(this,st);w(this,Ku,new AbortController);w(this,An,null);w(this,$u,null);w(this,De,new Map);w(this,Je,new Map);w(this,Qu,null);w(this,ss,null);w(this,Wu,null);w(this,as,new lO);w(this,Oi,null);w(this,so,null);w(this,ao,null);w(this,Zu,0);w(this,ro,new Set);w(this,Vs,null);w(this,rs,null);w(this,Cl,new Set);et(this,"_editorUndoBar",null);w(this,Wf,!1);w(this,Zf,!1);w(this,Ju,!1);w(this,Jf,null);w(this,Ys,null);w(this,oo,null);w(this,th,null);w(this,lo,!1);w(this,Xs,null);w(this,fy,new oO);w(this,co,!1);w(this,eh,!1);w(this,tg,!1);w(this,uo,null);w(this,Tl,null);w(this,ih,null);w(this,ho,null);w(this,eg,null);w(this,Ye,Mt.NONE);w(this,Zt,new Set);w(this,Ha,null);w(this,fo,null);w(this,go,null);w(this,ig,null);w(this,nh,null);w(this,ng,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,po,[0,0]);w(this,Ks,null);w(this,ja,null);w(this,sg,null);w(this,ag,null);w(this,os,null);const M=this._signal=o(this,Ku).signal;A(this,ja,t),A(this,sg,e),A(this,ag,n),A(this,Qu,a),A(this,Oi,l),A(this,fo,u),A(this,nh,d),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:M}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:M}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:M}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:M}),h._on("setpreference",this.onSetPreference.bind(this),{signal:M}),h._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:M}),window.addEventListener("pointerdown",()=>{A(this,eh,!0)},{capture:!0,signal:M}),window.addEventListener("pointerup",()=>{A(this,eh,!1)},{capture:!0,signal:M}),_(this,st,RT).call(this),_(this,st,BT).call(this),_(this,st,_A).call(this),A(this,ss,d.annotationStorage),A(this,Jf,d.filterFactory),A(this,go,f),A(this,th,m||null),A(this,Wf,b),A(this,Zf,v),A(this,Ju,E),A(this,eg,T||null),this.viewParameters={realScale:Xo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=R!==!1,l==null||l.setSidebarUiManager(this)}static get _keyboardManager(){const t=Fu.prototype,e=u=>o(u,ja).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new Pp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&o(u,ja).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&o(u,ja).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,n,a,l,u,h,d,f;(t=o(this,os))==null||t.resolve(),A(this,os,null),(e=o(this,Ku))==null||e.abort(),A(this,Ku,null),this._signal=null;for(const m of o(this,Je).values())m.destroy();o(this,Je).clear(),o(this,De).clear(),o(this,Cl).clear(),(n=o(this,ho))==null||n.clear(),A(this,An,null),o(this,Zt).clear(),o(this,as).destroy(),(a=o(this,Qu))==null||a.destroy(),(l=o(this,Oi))==null||l.destroy(),(u=o(this,fo))==null||u.destroy(),(h=o(this,Xs))==null||h.hide(),A(this,Xs,null),(d=o(this,ih))==null||d.destroy(),A(this,ih,null),A(this,$u,null),o(this,Ys)&&(clearTimeout(o(this,Ys)),A(this,Ys,null)),o(this,Ks)&&(clearTimeout(o(this,Ks)),A(this,Ks,null)),(f=this._editorUndoBar)==null||f.destroy(),A(this,nh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,eg)}get useNewAltTextFlow(){return o(this,Zf)}get useNewAltTextWhenAddingImage(){return o(this,Ju)}get hcmFilter(){return Tt(this,"hcmFilter",o(this,go)?o(this,Jf).addHCMFilter(o(this,go).foreground,o(this,go).background):"none")}get direction(){return Tt(this,"direction",getComputedStyle(o(this,ja)).direction)}get _highlightColors(){return Tt(this,"_highlightColors",o(this,th)?new Map(o(this,th).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Tt(this,"highlightColors",null);const e=new Map,n=!!o(this,go);for(const[a,l]of t){const u=a.endsWith("_HCM");if(n&&u){e.set(a.replace("_HCM",""),l);continue}!n&&!u&&e.set(a,l)}return Tt(this,"highlightColors",e)}get highlightColorNames(){return Tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,ao,t)}setMainHighlightColorPicker(t){A(this,ih,t)}editAltText(t,e=!1){var n;(n=o(this,Qu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!o(this,Oi)}editComment(t,e,n,a){var l;(l=o(this,Oi))==null||l.showDialog(this,t,e,n,a)}selectComment(t,e){const n=o(this,Je).get(t),a=n==null?void 0:n.getEditorByUID(e);a==null||a.toggleComment(!0,!0)}updateComment(t){var e;(e=o(this,Oi))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=o(this,Oi))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=o(this,Oi))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var a;(a=o(this,Oi))==null||a.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=o(this,Oi))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=o(this,Oi))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(o(this,Je).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await n}getSignature(t){var e;(e=o(this,fo))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return o(this,fo)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,Ju,e);break}}onPageChanging({pageNumber:t}){A(this,Zu,t-1)}focusMainContainer(){o(this,ja).focus()}findParent(t,e){for(const n of o(this,Je).values()){const{x:a,y:l,width:u,height:h}=n.div.getBoundingClientRect();if(t>=a&&t<=a+u&&e>=l&&e<=l+h)return n}return null}disableUserSelect(t=!1){o(this,sg).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Cl).add(t)}removeShouldRescale(t){o(this,Cl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Xo.PDF_TO_CSS_UNITS;for(const n of o(this,Cl))n.onScaleChanging();(e=o(this,ao))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:u,focusOffset:h}=n,d=n.toString(),m=_(this,st,v0).call(this,n).closest(".textLayer"),b=this.getSelectionBoxes(m);if(!b)return;n.empty();const v=_(this,st,wA).call(this,m),E=o(this,Ye)===Mt.NONE,T=()=>{const C=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:a,anchorOffset:l,focusNode:u,focusOffset:h,text:d});E&&this.showAllEditors("highlight",!0,!0),e&&(C==null||C.editComment())};if(E){this.switchToMode(Mt.HIGHLIGHT,T);return}T()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!o(this,ss))return null;const e=`${Pf}${t}`,n=o(this,ss).getRawValue(e);return n&&o(this,ss).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&o(this,ss)&&!o(this,ss).has(t.id)&&o(this,ss).setValue(t.id,t)}a11yAlert(t,e=null){const n=o(this,ag);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,o(this,lo)&&(A(this,lo,!1),_(this,st,bf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Zt))if(e.div.contains(t)){A(this,Tl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Tl))return;const[t,e]=o(this,Tl);A(this,Tl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){_(this,st,_A).call(this),this.setEditingState(!0)}removeEditListeners(){_(this,st,NT).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of o(this,rs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of o(this,rs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=o(this,An))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of o(this,Zt)){const l=a.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const u of o(this,rs))if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){Ct(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of n){const f=await a.deserialize(d);if(!f)return;l.push(f)}const u=()=>{for(const d of l)_(this,st,CA).call(this,d);_(this,st,TA).call(this,l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(l){Ct(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Ye)!==Mt.NONE&&!this.isEditorHandlingKeyboard&&Fu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,lo)&&(A(this,lo,!1),_(this,st,bf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(_(this,st,DT).call(this),_(this,st,LT).call(this),_(this,st,zi).call(this,{isEditing:o(this,Ye)!==Mt.NONE,isEmpty:_(this,st,vf).call(this),hasSomethingToUndo:o(this,as).hasSomethingToUndo(),hasSomethingToRedo:o(this,as).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,st,OT).call(this),_(this,st,kT).call(this),_(this,st,zi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,rs)){A(this,rs,t);for(const e of o(this,rs))_(this,st,Ia).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,fy).id}get currentLayer(){return o(this,Je).get(o(this,Zu))}getLayer(t){return o(this,Je).get(t)}get currentPageIndex(){return o(this,Zu)}addLayer(t){o(this,Je).set(t.pageIndex,t),o(this,co)?t.enable():t.disable()}removeLayer(t){o(this,Je).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1,l=!1,u=!1){var h,d,f,m,b,v;if(o(this,Ye)!==t&&!(o(this,os)&&(await o(this,os).promise,!o(this,os)))){if(A(this,os,Promise.withResolvers()),(h=o(this,ao))==null||h.commitOrRemove(),o(this,Ye)===Mt.POPUP&&((d=o(this,Oi))==null||d.hideSidebar()),(f=o(this,Oi))==null||f.destroyPopup(),A(this,Ye,t),t===Mt.NONE){this.setEditingState(!1),_(this,st,zT).call(this);for(const E of o(this,De).values())E.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),o(this,os).resolve();return}for(const E of o(this,De).values())E.addStandaloneCommentButton();t===Mt.SIGNATURE&&await((b=o(this,fo))==null?void 0:b.loadSignatures()),n&&Ri.clearPointerType(),this.setEditingState(!0),await _(this,st,IT).call(this),this.unselectAll();for(const E of o(this,Je).values())E.updateMode(t);if(t===Mt.POPUP){o(this,$u)||A(this,$u,await o(this,nh).getAnnotationsByType(new Set(o(this,rs).map(C=>C._editorType))));const E=new Set,T=[];for(const C of o(this,De).values()){const{annotationElementId:R,hasComment:M,deleted:O}=C;R&&E.add(R),M&&!O&&T.push(C.getData())}for(const C of o(this,$u)){const{id:R,popupRef:M,contentsObj:O}=C;M&&(O!=null&&O.str)&&!E.has(R)&&!o(this,ro).has(R)&&T.push(C)}(v=o(this,Oi))==null||v.showSidebar(T)}if(!e){a&&this.addNewEditorFromKeyboard(),o(this,os).resolve();return}for(const E of o(this,De).values())E.uid===e?(this.setSelected(E),u?E.editComment():l?E.enterInEditMode():E.focus()):E.unselect();o(this,os).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==o(this,Ye)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(o(this,rs)){switch(t){case Ht.CREATE:this.currentLayer.addNewEditor(e);return;case Ht.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,ig)||A(this,ig,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of o(this,Zt))n.updateParams(t,e);else for(const n of o(this,rs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var l;for(const u of o(this,De).values())u.editorType===t&&u.show(e);(((l=o(this,ig))==null?void 0:l.get(Ht.HIGHLIGHT_SHOW_ALL))??!0)!==e&&_(this,st,Ia).call(this,[[Ht.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,tg)!==t){A(this,tg,t);for(const e of o(this,Je).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of o(this,De).values())e.pageIndex===t&&(yield e)}getEditor(t){return o(this,De).get(t)}addEditor(t){o(this,De).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(o(this,Ys)&&clearTimeout(o(this,Ys)),A(this,Ys,setTimeout(()=>{this.focusMainContainer(),A(this,Ys,null)},0))),o(this,De).delete(t.id),t.annotationElementId&&((e=o(this,ho))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!o(this,ro).has(t.annotationElementId))&&((n=o(this,ss))==null||n.remove(t.id))}addDeletedAnnotationElement(t){o(this,ro).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,ro).has(t)}removeDeletedAnnotationElement(t){o(this,ro).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,An)!==t&&(A(this,An,t),t&&_(this,st,Ia).call(this,t.propertiesToUpdate))}updateUI(t){o(this,st,FT)===t&&_(this,st,Ia).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){_(this,st,Ia).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,Zt).has(t)){o(this,Zt).delete(t),t.unselect(),_(this,st,zi).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Zt).add(t),t.select(),_(this,st,Ia).call(this,t.propertiesToUpdate),_(this,st,zi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=o(this,ao))==null||e.commitOrRemove();for(const n of o(this,Zt))n!==t&&n.unselect();o(this,Zt).clear(),o(this,Zt).add(t),t.select(),_(this,st,Ia).call(this,t.propertiesToUpdate),_(this,st,zi).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Zt).has(t)}get firstSelectedEditor(){return o(this,Zt).values().next().value}unselect(t){t.unselect(),o(this,Zt).delete(t),_(this,st,zi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Zt).size!==0}get isEnterHandled(){return o(this,Zt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,as).undo(),_(this,st,zi).call(this,{hasSomethingToUndo:o(this,as).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,st,vf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,as).redo(),_(this,st,zi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,as).hasSomethingToRedo(),isEmpty:_(this,st,vf).call(this)})}addCommands(t){o(this,as).add(t),_(this,st,zi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,st,vf).call(this)})}cleanUndoStack(t){o(this,as).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,Zt)],n=()=>{var u;(u=this._editorUndoBar)==null||u.show(a,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},a=()=>{for(const u of e)_(this,st,CA).call(this,u)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=o(this,An))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,An)||this.hasSelection}selectAll(){for(const t of o(this,Zt))t.commit();_(this,st,TA).call(this,o(this,De).values())}unselectAll(){var t;if(!(o(this,An)&&(o(this,An).commitOrRemove(),o(this,Ye)!==Mt.NONE))&&!((t=o(this,ao))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,Zt))e.unselect();o(this,Zt).clear(),_(this,st,zi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,po)[0]+=t,o(this,po)[1]+=e;const[a,l]=o(this,po),u=[...o(this,Zt)],h=1e3;o(this,Ks)&&clearTimeout(o(this,Ks)),A(this,Ks,setTimeout(()=>{A(this,Ks,null),o(this,po)[0]=o(this,po)[1]=0,this.addCommands({cmd:()=>{for(const d of u)o(this,De).has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of u)o(this,De).has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},h));for(const d of u)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Vs,new Map);for(const t of o(this,Zt))o(this,Vs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Vs))return!1;this.disableUserSelect(!1);const t=o(this,Vs);A(this,Vs,null);let e=!1;for(const[{x:a,y:l,pageIndex:u},h]of t)h.newX=a,h.newY=l,h.newPageIndex=u,e||(e=a!==h.savedX||l!==h.savedY||u!==h.savedPageIndex);if(!e)return!1;const n=(a,l,u,h)=>{if(o(this,De).has(a.id)){const d=o(this,Je).get(h);d?a._setParentAndPosition(d,l,u):(a.pageIndex=h,a.x=l,a.y=u)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:u,newPageIndex:h}]of t)n(a,l,u,h)},undo:()=>{for(const[a,{savedX:l,savedY:u,savedPageIndex:h}]of t)n(a,l,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,Vs))for(const n of o(this,Vs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Zt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,An)===t}getActive(){return o(this,An)}getMode(){return o(this,Ye)}isEditingMode(){return o(this,Ye)!==Mt.NONE}get imageManager(){return Tt(this,"imageManager",new SA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:a,width:l,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,m,b,v)=>({x:(m-a)/u,y:1-(f+b-n)/l,width:v/u,height:b/l});break;case"180":h=(f,m,b,v)=>({x:1-(f+b-n)/l,y:1-(m+v-a)/u,width:b/l,height:v/u});break;case"270":h=(f,m,b,v)=>({x:1-(m+v-a)/u,y:(f-n)/l,width:v/u,height:b/l});break;default:h=(f,m,b,v)=>({x:(f-n)/l,y:(m-a)/u,width:b/l,height:v/u});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const b=e.getRangeAt(f);if(!b.collapsed)for(const{x:v,y:E,width:T,height:C}of b.getClientRects())T===0||C===0||d.push(h(v,E,T,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,Wu)||A(this,Wu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,Wu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=o(this,Wu))==null?void 0:a.get(t.data.id);if(!e)return;const n=o(this,ss).getRawValue(e);n&&(o(this,Ye)===Mt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var l;const a=(l=o(this,ho))==null?void 0:l.get(t);a&&(a.setCanvas(e,n),o(this,ho).delete(t))}addMissingCanvas(t,e){(o(this,ho)||A(this,ho,new Map)).set(t,e)}};Ku=new WeakMap,An=new WeakMap,$u=new WeakMap,De=new WeakMap,Je=new WeakMap,Qu=new WeakMap,ss=new WeakMap,Wu=new WeakMap,as=new WeakMap,Oi=new WeakMap,so=new WeakMap,ao=new WeakMap,Zu=new WeakMap,ro=new WeakMap,Vs=new WeakMap,rs=new WeakMap,Cl=new WeakMap,Wf=new WeakMap,Zf=new WeakMap,Ju=new WeakMap,Jf=new WeakMap,Ys=new WeakMap,oo=new WeakMap,th=new WeakMap,lo=new WeakMap,Xs=new WeakMap,fy=new WeakMap,co=new WeakMap,eh=new WeakMap,tg=new WeakMap,uo=new WeakMap,Tl=new WeakMap,ih=new WeakMap,ho=new WeakMap,eg=new WeakMap,Ye=new WeakMap,Zt=new WeakMap,Ha=new WeakMap,fo=new WeakMap,go=new WeakMap,ig=new WeakMap,nh=new WeakMap,ng=new WeakMap,po=new WeakMap,Ks=new WeakMap,ja=new WeakMap,sg=new WeakMap,ag=new WeakMap,os=new WeakMap,st=new WeakSet,v0=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},wA=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of o(this,Je).values())if(n.hasTextLayer(t))return n;return null},xT=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=_(this,st,v0).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(o(this,Xs)||A(this,Xs,new rO(this)),o(this,Xs).show(n,a,this.direction==="ltr"))},MT=function(){var l,u,h;const t=document.getSelection();if(!t||t.isCollapsed){o(this,Ha)&&((l=o(this,Xs))==null||l.hide(),A(this,Ha,null),_(this,st,zi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,Ha))return;const a=_(this,st,v0).call(this,t).closest(".textLayer");if(!a){o(this,Ha)&&((u=o(this,Xs))==null||u.hide(),A(this,Ha,null),_(this,st,zi).call(this,{hasSelectedText:!1}));return}if((h=o(this,Xs))==null||h.hide(),A(this,Ha,e),_(this,st,zi).call(this,{hasSelectedText:!0}),!(o(this,Ye)!==Mt.HIGHLIGHT&&o(this,Ye)!==Mt.NONE)&&(o(this,Ye)===Mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,lo,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=o(this,Ye)===Mt.HIGHLIGHT?_(this,st,wA).call(this,a):null;if(d==null||d.toggleDrawing(),o(this,eh)){const f=new AbortController,m=this.combinedSignal(f),b=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&_(this,st,bf).call(this,"main_toolbar"))};window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("blur",b,{signal:m})}else d==null||d.toggleDrawing(!0),_(this,st,bf).call(this,"main_toolbar")}},bf=function(t=""){o(this,Ye)===Mt.HIGHLIGHT?this.highlightSelection(t):o(this,Wf)&&_(this,st,xT).call(this)},RT=function(){document.addEventListener("selectionchange",_(this,st,MT).bind(this),{signal:this._signal})},DT=function(){if(o(this,oo))return;A(this,oo,new AbortController);const t=this.combinedSignal(o(this,oo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},OT=function(){var t;(t=o(this,oo))==null||t.abort(),A(this,oo,null)},_A=function(){if(o(this,uo))return;A(this,uo,new AbortController);const t=this.combinedSignal(o(this,uo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},NT=function(){var t;(t=o(this,uo))==null||t.abort(),A(this,uo,null)},LT=function(){if(o(this,so))return;A(this,so,new AbortController);const t=this.combinedSignal(o(this,so));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},kT=function(){var t;(t=o(this,so))==null||t.abort(),A(this,so,null)},BT=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},zi=function(t){Object.entries(t).some(([n,a])=>o(this,ng)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,ng),t)}),o(this,Ye)===Mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&_(this,st,Ia).call(this,[[Ht.HIGHLIGHT_FREE,!0]]))},Ia=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},IT=async function(){if(!o(this,co)){A(this,co,!0);const t=[];for(const e of o(this,Je).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,De).values())e.enable()}},zT=function(){if(this.unselectAll(),o(this,co)){A(this,co,!1);for(const t of o(this,Je).values())t.disable();for(const t of o(this,De).values())t.disable()}},CA=function(t){const e=o(this,Je).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},FT=function(){let t=null;for(t of o(this,Zt));return t},vf=function(){if(o(this,De).size===0)return!0;if(o(this,De).size===1)for(const t of o(this,De).values())return t.isEmpty();return!1},TA=function(t){for(const e of o(this,Zt))e.unselect();o(this,Zt).clear();for(const e of t)e.isEmpty()||(o(this,Zt).add(e),e.select());_(this,st,zi).call(this,{hasSelectedEditor:this.hasSelection})},et(Fu,"TRANSLATE_SMALL",1),et(Fu,"TRANSLATE_BIG",10);let Fc=Fu;var ri,$s,ws,sh,Qs,Sn,ah,Ws,en,Ga,xl,Zs,mo,Bs,Af,A0;const Fi=class Fi{constructor(t){w(this,Bs);w(this,ri,null);w(this,$s,!1);w(this,ws,null);w(this,sh,null);w(this,Qs,null);w(this,Sn,null);w(this,ah,!1);w(this,Ws,null);w(this,en,null);w(this,Ga,null);w(this,xl,null);w(this,Zs,!1);A(this,en,t),A(this,Zs,t._uiManager.useNewAltTextFlow),o(Fi,mo)||A(Fi,mo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Fi._l10n??(Fi._l10n=t)}async render(){const t=A(this,ws,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,sh,document.createElement("span"));t.append(e),o(this,Zs)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(Fi,mo).missing),e.setAttribute("data-l10n-id",o(Fi,mo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=o(this,en)._uiManager._signal;t.addEventListener("contextmenu",ms,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const a=l=>{l.preventDefault(),o(this,en)._uiManager.editAltText(o(this,en)),o(this,Zs)&&o(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,Bs,Af)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(A(this,ah,!0),a(l))},{signal:n}),await _(this,Bs,A0).call(this),t}finish(){o(this,ws)&&(o(this,ws).focus({focusVisible:o(this,ah)}),A(this,ah,!1))}isEmpty(){return o(this,Zs)?o(this,ri)===null:!o(this,ri)&&!o(this,$s)}hasData(){return o(this,Zs)?o(this,ri)!==null||!!o(this,Ga):this.isEmpty()}get guessedText(){return o(this,Ga)}async setGuessedText(t){o(this,ri)===null&&(A(this,Ga,t),A(this,xl,await Fi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),_(this,Bs,A0).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,Zs)||o(this,ri)){(e=o(this,Ws))==null||e.remove(),A(this,Ws,null);return}if(!o(this,Ws)){const n=A(this,Ws,document.createElement("div"));n.className="noAltTextBadge",o(this,en).div.append(n)}o(this,Ws).classList.toggle("hidden",!t)}serialize(t){let e=o(this,ri);return!t&&o(this,Ga)===e&&(e=o(this,xl)),{altText:e,decorative:o(this,$s),guessedText:o(this,Ga),textWithDisclaimer:o(this,xl)}}get data(){return{altText:o(this,ri),decorative:o(this,$s)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:l=!1}){n&&(A(this,Ga,n),A(this,xl,a)),!(o(this,ri)===t&&o(this,$s)===e)&&(l||(A(this,ri,t),A(this,$s,e)),_(this,Bs,A0).call(this))}toggle(t=!1){o(this,ws)&&(!t&&o(this,Sn)&&(clearTimeout(o(this,Sn)),A(this,Sn,null)),o(this,ws).disabled=!t)}shown(){o(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,Bs,Af)}})}destroy(){var t,e;(t=o(this,ws))==null||t.remove(),A(this,ws,null),A(this,sh,null),A(this,Qs,null),(e=o(this,Ws))==null||e.remove(),A(this,Ws,null)}};ri=new WeakMap,$s=new WeakMap,ws=new WeakMap,sh=new WeakMap,Qs=new WeakMap,Sn=new WeakMap,ah=new WeakMap,Ws=new WeakMap,en=new WeakMap,Ga=new WeakMap,xl=new WeakMap,Zs=new WeakMap,mo=new WeakMap,Bs=new WeakSet,Af=function(){return o(this,ri)&&"added"||o(this,ri)===null&&this.guessedText&&"review"||"missing"},A0=async function(){var a,l,u;const t=o(this,ws);if(!t)return;if(o(this,Zs)){if(t.classList.toggle("done",!!o(this,ri)),t.setAttribute("data-l10n-id",o(Fi,mo)[o(this,Bs,Af)]),(a=o(this,sh))==null||a.setAttribute("data-l10n-id",o(Fi,mo)[`${o(this,Bs,Af)}-label`]),!o(this,ri)){(l=o(this,Qs))==null||l.remove();return}}else{if(!o(this,ri)&&!o(this,$s)){t.classList.remove("done"),(u=o(this,Qs))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,Qs);if(!e){A(this,Qs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,en).id}`;const h=100,d=o(this,en)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(o(this,Sn)),A(this,Sn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,Sn,setTimeout(()=>{A(this,Sn,null),o(this,Qs).classList.add("show"),o(this,en)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;o(this,Sn)&&(clearTimeout(o(this,Sn)),A(this,Sn,null)),(f=o(this,Qs))==null||f.classList.remove("show")},{signal:d})}o(this,$s)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,ri)),e.parentNode||t.append(e);const n=o(this,en).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},w(Fi,mo,null),et(Fi,"_l10n",null);let Z0=Fi;var vi,ls,Ml,pe,rg,Rl,_s,Dl,Ol,Nl,og,xA;class r0{constructor(t){w(this,og);w(this,vi,null);w(this,ls,null);w(this,Ml,!1);w(this,pe,null);w(this,rg,null);w(this,Rl,null);w(this,_s,null);w(this,Dl,null);w(this,Ol,!1);w(this,Nl,null);A(this,pe,t)}renderForToolbar(){const t=A(this,ls,document.createElement("button"));return t.className="comment",_(this,og,xA).call(this,t,!1)}renderForStandalone(){const t=A(this,vi,document.createElement("button"));t.className="annotationCommentButton";const e=o(this,pe).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(o(this,pe)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=o(this,pe).commentButtonColor;a&&(n.backgroundColor=a)}return _(this,og,xA).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=o(this,vi)??o(this,ls))==null||t.focus()},0)}onUpdatedColor(){if(!o(this,vi))return;const t=o(this,pe).commentButtonColor;t&&(o(this,vi).style.backgroundColor=t),o(this,pe)._uiManager.updatePopupColor(o(this,pe))}get commentButtonWidth(){var t;return(((t=o(this,vi))==null?void 0:t.getBoundingClientRect().width)??0)/o(this,pe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(o(this,Nl))return o(this,Nl);if(!o(this,vi))return null;const{x:t,y:e,height:n}=o(this,vi).getBoundingClientRect(),{x:a,y:l,width:u,height:h}=o(this,pe).parent.boundingClientRect;return[(t-a)/u,(e+n-l)/h]}set commentPopupPositionInLayer(t){A(this,Nl,t)}hasDefaultPopupPosition(){return o(this,Nl)===null}removeStandaloneCommentButton(){var t;(t=o(this,vi))==null||t.remove(),A(this,vi,null)}removeToolbarCommentButton(){var t;(t=o(this,ls))==null||t.remove(),A(this,ls,null)}setCommentButtonStates({selected:t,hasPopup:e}){o(this,vi)&&(o(this,vi).classList.toggle("selected",t),o(this,vi).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,a;if(e)[n,a]=e;else{[n,a]=o(this,pe).commentButtonPosition;const{width:m,height:b,x:v,y:E}=o(this,pe);n=v+n*m,a=E+a*b}const l=o(this,pe).parent.boundingClientRect,{x:u,y:h,width:d,height:f}=l;o(this,pe)._uiManager.editComment(o(this,pe),u+n*d,h+a*f,{...t,parentDimensions:l})}finish(){o(this,ls)&&(o(this,ls).focus({focusVisible:o(this,Ml)}),A(this,Ml,!1))}isDeleted(){return o(this,Ol)||o(this,_s)===""}isEmpty(){return o(this,_s)===null}hasBeenEdited(){return this.isDeleted()||o(this,_s)!==o(this,rg)}serialize(){return this.data}get data(){return{text:o(this,_s),richText:o(this,Rl),date:o(this,Dl),deleted:this.isDeleted()}}set data(t){if(t!==o(this,_s)&&A(this,Rl,null),t===null){A(this,_s,""),A(this,Ol,!0);return}A(this,_s,t),A(this,Dl,new Date),A(this,Ol,!1)}setInitialText(t,e=null){A(this,rg,t),this.data=t,A(this,Dl,null),A(this,Rl,e)}shown(){}destroy(){var t,e;(t=o(this,ls))==null||t.remove(),A(this,ls,null),(e=o(this,vi))==null||e.remove(),A(this,vi,null),A(this,_s,""),A(this,Rl,null),A(this,Dl,null),A(this,pe,null),A(this,Ml,!1),A(this,Ol,!1)}}vi=new WeakMap,ls=new WeakMap,Ml=new WeakMap,pe=new WeakMap,rg=new WeakMap,Rl=new WeakMap,_s=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,og=new WeakSet,xA=function(t,e){if(!o(this,pe)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[o(this,pe)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=o(this,pe)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",ms,{signal:n}),e&&(t.addEventListener("focusin",l=>{o(this,pe)._focusEventsAllowed=!1,Be(l)},{capture:!0,signal:n}),t.addEventListener("focusout",l=>{o(this,pe)._focusEventsAllowed=!0,Be(l)},{capture:!0,signal:n})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const a=l=>{l.preventDefault(),t===o(this,ls)?this.edit():o(this,pe).toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(A(this,Ml,!0),a(l))},{signal:n}),t.addEventListener("pointerenter",()=>{o(this,pe).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{o(this,pe).toggleComment(!1,!1)},{signal:n}),t};var rh,Ll,lg,cg,ug,hg,dg,qa,kl,Va,Bl,Ya,Ko,UT,PT,HT;const JS=class JS{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:u=null,signal:h}){w(this,Ko);w(this,rh);w(this,Ll,!1);w(this,lg,null);w(this,cg);w(this,ug);w(this,hg);w(this,dg);w(this,qa,null);w(this,kl);w(this,Va,null);w(this,Bl);w(this,Ya,null);A(this,rh,t),A(this,lg,n),A(this,cg,e),A(this,ug,a),A(this,hg,l),A(this,dg,u),A(this,Bl,new AbortController),A(this,kl,AbortSignal.any([h,o(this,Bl).signal])),t.addEventListener("touchstart",_(this,Ko,UT).bind(this),{passive:!1,signal:o(this,kl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ga.pixelRatio}destroy(){var t,e;(t=o(this,Bl))==null||t.abort(),A(this,Bl,null),(e=o(this,qa))==null||e.abort(),A(this,qa,null)}};rh=new WeakMap,Ll=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,dg=new WeakMap,qa=new WeakMap,kl=new WeakMap,Va=new WeakMap,Bl=new WeakMap,Ya=new WeakMap,Ko=new WeakSet,UT=function(t){var a,l,u;if((a=o(this,cg))!=null&&a.call(this))return;if(t.touches.length===1){if(o(this,qa))return;const h=A(this,qa,new AbortController),d=AbortSignal.any([o(this,kl),h.signal]),f=o(this,rh),m={capture:!0,signal:d,passive:!1},b=v=>{var E;v.pointerType==="touch"&&((E=o(this,qa))==null||E.abort(),A(this,qa,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Be(v),b(v))},m),f.addEventListener("pointerup",b,m),f.addEventListener("pointercancel",b,m);return}if(!o(this,Ya)){A(this,Ya,new AbortController);const h=AbortSignal.any([o(this,kl),o(this,Ya).signal]),d=o(this,rh),f={signal:h,capture:!1,passive:!1};d.addEventListener("touchmove",_(this,Ko,PT).bind(this),f);const m=_(this,Ko,HT).bind(this);d.addEventListener("touchend",m,f),d.addEventListener("touchcancel",m,f),f.capture=!0,d.addEventListener("pointerdown",Be,f),d.addEventListener("pointermove",Be,f),d.addEventListener("pointercancel",Be,f),d.addEventListener("pointerup",Be,f),(l=o(this,ug))==null||l.call(this)}if(Be(t),t.touches.length!==2||(u=o(this,lg))!=null&&u.call(this)){A(this,Va,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),A(this,Va,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},PT=function(t){var L;if(!o(this,Va)||t.touches.length!==2)return;Be(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:l}=e,{screenX:u,screenY:h}=n,d=o(this,Va),{touch0X:f,touch0Y:m,touch1X:b,touch1Y:v}=d,E=b-f,T=v-m,C=u-a,R=h-l,M=Math.hypot(C,R)||1,O=Math.hypot(E,T)||1;if(!o(this,Ll)&&Math.abs(O-M)<=JS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=u,d.touch1Y=h,!o(this,Ll)){A(this,Ll,!0);return}const D=[(a+u)/2,(l+h)/2];(L=o(this,hg))==null||L.call(this,D,O,M)},HT=function(t){var e;t.touches.length>=2||(o(this,Ya)&&(o(this,Ya).abort(),A(this,Ya,null),(e=o(this,dg))==null||e.call(this)),o(this,Va)&&(Be(t),A(this,Va,null),A(this,Ll,!1)))};let J0=JS;var Il,Cs,we,ue,Xa,oh,yo,fg,Ai,zl,Ka,cs,bo,gg,Fl,En,pg,Ul,$a,Js,lh,ch,us,Pl,mg,gy,St,MA,yg,RA,S0,jT,GT,DA,E0,OA,qT,VT,YT,NA,XT,LA,KT,$T,QT,kA,Sf;const xt=class xt{constructor(t){w(this,St);w(this,Il,null);w(this,Cs,null);w(this,we,null);w(this,ue,null);w(this,Xa,null);w(this,oh,!1);w(this,yo,null);w(this,fg,"");w(this,Ai,null);w(this,zl,null);w(this,Ka,null);w(this,cs,null);w(this,bo,null);w(this,gg,"");w(this,Fl,!1);w(this,En,null);w(this,pg,!1);w(this,Ul,!1);w(this,$a,!1);w(this,Js,null);w(this,lh,0);w(this,ch,0);w(this,us,null);w(this,Pl,null);et(this,"isSelected",!1);et(this,"_isCopy",!1);et(this,"_editToolbar",null);et(this,"_initialOptions",Object.create(null));et(this,"_initialData",null);et(this,"_isVisible",!0);et(this,"_uiManager",null);et(this,"_focusEventsAllowed",!0);w(this,mg,!1);w(this,gy,xt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[l,u];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=xt.prototype._resizeWithKeyboard,e=Fc.TRANSLATE_SMALL,n=Fc.TRANSLATE_BIG;return Tt(this,"_resizerKeyboardManager",new Pp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],xt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new cO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(xt._l10n??(xt._l10n=t),xt._l10nResizer||(xt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),xt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);xt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,mg)}set _isDraggable(t){var e;A(this,mg,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,gy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(_(this,St,Sf).call(this),(e=o(this,cs))==null||e.remove(),A(this,cs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,Fl)?A(this,Fl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[l,u]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/l,this.y=(e+a)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}translate(t,e){_(this,St,MA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,En)||A(this,En,[this.x,this.y,this.width,this.height]),_(this,St,MA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){o(this,En)||A(this,En,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[d,f]=this.getBaseTranslation();u+=d,h+=f;const{style:m}=n;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,En)&&(o(this,En)[0]!==this.x||o(this,En)[1]!==this.y)}get _hasBeenResized(){return!!o(this,En)&&(o(this,En)[2]!==this.width||o(this,En)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=xt,a=n/t,l=n/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:l,y:u,width:h,height:d}=this;if(h*=n,d*=a,l*=n,u*=a,this._mustFixPosition)switch(t){case 0:l=Gi(l,0,n-h),u=Gi(u,0,a-d);break;case 90:l=Gi(l,0,n-d),u=Gi(u,h,a);break;case 180:l=Gi(l,h,n),u=Gi(u,d,a);break;case 270:l=Gi(l,d,n),u=Gi(u,0,a-h);break}this.x=l/=n,this.y=u/=a;const[f,m]=this.getBaseTranslation();l+=f,u+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return _(n=xt,yg,RA).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return _(n=xt,yg,RA).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,we))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||o(this,Ul))return this._editToolbar;this._editToolbar=new vA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=o(this,we))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return o(this,we)||(Z0.initialize(xt._l10n),A(this,we,new Z0(this)),o(this,Il)&&(o(this,we).data=o(this,Il),A(this,Il,null))),o(this,we)}get altTextData(){var t;return(t=o(this,we))==null?void 0:t.data}set altTextData(t){o(this,we)&&(o(this,we).data=t)}get guessedAltText(){var t;return(t=o(this,we))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,we))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,we))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,we)&&!o(this,we).isEmpty()}hasAltTextData(){var t;return((t=o(this,we))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=o(this,ue))==null||t.focusButton()}addCommentButton(){return this.canAddComment?o(this,ue)||A(this,ue,new r0(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(o(this,Xa)){this._uiManager.isEditingMode()&&o(this,Xa).classList.remove("hidden");return}this.hasComment&&(A(this,Xa,o(this,ue).renderForStandalone()),this.div.append(o(this,Xa)))}}removeStandaloneCommentButton(){o(this,ue).removeStandaloneCommentButton(),A(this,Xa,null)}hideStandaloneCommentButton(){var t;(t=o(this,Xa))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:a}}=o(this,ue);return{text:e,richText:t,date:n,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){o(this,ue)||A(this,ue,new r0(this)),o(this,ue).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(o(this,ue)||A(this,ue,new r0(this)),o(this,ue).setInitialText(t,n),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){var t;return(t=o(this,ue))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=o(this,ue))==null?void 0:t.isDeleted()}get hasComment(){return!!o(this,ue)&&!o(this,ue).isEmpty()&&!o(this,ue).isDeleted()}async editComment(t){o(this,ue)||A(this,ue,new r0(this)),o(this,ue).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){o(this,ue).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[u]=this.pageTranslation,h=u+l+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){o(this,ue).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=o(this,oh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),_(this,St,LA).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),CT(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,Pl)||A(this,Pl,new J0({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:_(this,St,qT).bind(this),onPinching:_(this,St,VT).bind(this),onPinchEnd:_(this,St,YT).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=ii.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Fl,!0),this._isDraggable){_(this,St,XT).call(this,t);return}_(this,St,NA).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,Js)&&clearTimeout(o(this,Js)),A(this,Js,setTimeout(()=>{var t;A(this,Js,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[l,u]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,m=e/a,b=this.x*l,v=this.y*u,E=this.width*l,T=this.height*u;switch(n){case 0:return[b+f+h,u-v-m-T+d,b+f+E+h,u-v-m+d];case 90:return[b+m+h,u-v+f+d,b+m+T+h,u-v+f+E+d];case 180:return[b-f-E+h,u-v+m+d,b-f+h,u-v+m+T+d];case 270:return[b-m-T+h,u-v-f-E+d,b-m+h,u-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,l,u]=t,h=l-n,d=u-a;switch(this.rotation){case 0:return[n,e-u,h,d];case 90:return[n,e-a,d,h];case 180:return[l,e-a,h,d];case 270:return[l,e-u,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&xt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=o(this,ue))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:a,deleted:l,richText:u},uid:h,pageIndex:d,creationDate:f,modificationDate:m}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:u,contentsObj:{str:t},creationDate:f,modificationDate:n||m,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,Ul,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,Ul,!1),!0):!1}isInEditMode(){return o(this,Ul)}shouldGetKeyboardEvents(){return o(this,$a)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return e<u&&a>0&&t<l&&n>0}rebuild(){_(this,St,LA).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,A(a,Il,t.accessibilityData),a._isCopy=t.isCopy||!1;const[l,u]=a.pageDimensions,[h,d,f,m]=a.getRectInCurrentCoords(t.rect,u);return a.x=h/l,a.y=d/u,a.width=f/l,a.height=m/u,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=o(this,bo))==null||t.abort(),A(this,bo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),o(this,Js)&&(clearTimeout(o(this,Js)),A(this,Js,null)),_(this,St,Sf).call(this),this.removeEditToolbar(),o(this,us)){for(const a of o(this,us).values())clearTimeout(a);A(this,us,null)}this.parent=null,(e=o(this,Pl))==null||e.destroy(),A(this,Pl,null),(n=o(this,cs))==null||n.remove(),A(this,cs,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,St,jT).call(this),o(this,Ai).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,a,l,u]=this.getPDFRect();return[xt._round(n+(l-n)*t),xt._round(a+(u-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return o(this,ue).commentPopupPositionInLayer}set commentPopupPosition(t){o(this,ue).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return o(this,ue).hasDefaultPopupPosition()}get commentButtonWidth(){return o(this,ue).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=o(this,ue))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ai).children;if(!o(this,Cs)){A(this,Cs,Array.from(e));const u=_(this,St,KT).bind(this),h=_(this,St,$T).bind(this),d=this._uiManager._signal;for(const f of o(this,Cs)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",u,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",_(this,St,QT).bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",xt._l10nResizer[m])}}const n=o(this,Cs)[0];let a=0;for(const u of e){if(u===n)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(o(this,Cs).length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)o(this,Ai).append(o(this,Ai).firstElementChild);else if(l>a)for(let h=0;h<l-a;h++)o(this,Ai).firstElementChild.before(o(this,Ai).lastElementChild);let u=0;for(const h of e){const f=o(this,Cs)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",xt._l10nResizer[f])}}_(this,St,kA).call(this,0),A(this,$a,!0),o(this,Ai).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,$a)&&_(this,St,OA).call(this,o(this,gg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){_(this,St,Sf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,l;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(n=o(this,we))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,a,l;this.isSelected&&(this.isSelected=!1,(t=o(this,Ai))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(l=o(this,we))==null||l.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return o(this,pg)}set isEditing(t){A(this,pg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,us)||A(this,us,new Map);const{action:n}=t;let a=o(this,us).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),o(this,us).delete(n),o(this,us).size===0&&A(this,us,null)},xt._telemetryTimeout),o(this,us).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,oh,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,oh,!0)}updateFakeAnnotationElement(t){if(!o(this,cs)&&!this.deleted){A(this,cs,t.addFakeAnnotation(this));return}if(this.deleted){o(this,cs).remove(),A(this,cs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&o(this,cs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Il=new WeakMap,Cs=new WeakMap,we=new WeakMap,ue=new WeakMap,Xa=new WeakMap,oh=new WeakMap,yo=new WeakMap,fg=new WeakMap,Ai=new WeakMap,zl=new WeakMap,Ka=new WeakMap,cs=new WeakMap,bo=new WeakMap,gg=new WeakMap,Fl=new WeakMap,En=new WeakMap,pg=new WeakMap,Ul=new WeakMap,$a=new WeakMap,Js=new WeakMap,lh=new WeakMap,ch=new WeakMap,us=new WeakMap,Pl=new WeakMap,mg=new WeakMap,gy=new WeakMap,St=new WeakSet,MA=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},yg=new WeakSet,RA=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},S0=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},jT=function(){if(o(this,Ai))return;A(this,Ai,document.createElement("div")),o(this,Ai).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");o(this,Ai).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",_(this,St,GT).bind(this,n),{signal:e}),a.addEventListener("contextmenu",ms,{signal:e}),a.tabIndex=-1}this.div.prepend(o(this,Ai))},GT=function(t,e){var m;e.preventDefault();const{isMac:n}=ii.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=o(this,we))==null||m.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,A(this,zl,[e.screenX,e.screenY]);const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,St,OA).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Be,{passive:!1,signal:u}),window.addEventListener("contextmenu",ms,{signal:u}),A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var b;l.abort(),this.parent.togglePointerEvents(!0),(b=o(this,we))==null||b.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,_(this,St,E0).call(this)};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})},DA=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},E0=function(){if(!o(this,Ka))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=o(this,Ka);A(this,Ka,null);const l=this.x,u=this.y,h=this.width,d=this.height;l===t&&u===e&&h===n&&d===a||this.addCommands({cmd:_(this,St,DA).bind(this,l,u,h,d),undo:_(this,St,DA).bind(this,t,e,n,a),mustExec:!0})},OA=function(t,e){const[n,a]=this.parentDimensions,l=this.x,u=this.y,h=this.width,d=this.height,f=xt.MIN_SIZE/n,m=xt.MIN_SIZE/a,b=_(this,St,S0).call(this,this.rotation),v=(P,X)=>[b[0]*P+b[2]*X,b[1]*P+b[3]*X],E=_(this,St,S0).call(this,360-this.rotation),T=(P,X)=>[E[0]*P+E[2]*X,E[1]*P+E[3]*X];let C,R,M=!1,O=!1;switch(t){case"topLeft":M=!0,C=(P,X)=>[0,0],R=(P,X)=>[P,X];break;case"topMiddle":C=(P,X)=>[P/2,0],R=(P,X)=>[P/2,X];break;case"topRight":M=!0,C=(P,X)=>[P,0],R=(P,X)=>[0,X];break;case"middleRight":O=!0,C=(P,X)=>[P,X/2],R=(P,X)=>[0,X/2];break;case"bottomRight":M=!0,C=(P,X)=>[P,X],R=(P,X)=>[0,0];break;case"bottomMiddle":C=(P,X)=>[P/2,X],R=(P,X)=>[P/2,0];break;case"bottomLeft":M=!0,C=(P,X)=>[0,X],R=(P,X)=>[P,0];break;case"middleLeft":O=!0,C=(P,X)=>[0,X/2],R=(P,X)=>[P,X/2];break}const D=C(h,d),L=R(h,d);let k=v(...L);const z=xt._round(l+k[0]),F=xt._round(u+k[1]);let W=1,Y=1,it,J;if(e.fromKeyboard)({deltaX:it,deltaY:J}=e);else{const{screenX:P,screenY:X}=e,[nt,Et]=o(this,zl);[it,J]=this.screenToPageTranslation(P-nt,X-Et),o(this,zl)[0]=P,o(this,zl)[1]=X}if([it,J]=T(it/n,J/a),M){const P=Math.hypot(h,d);W=Y=Math.max(Math.min(Math.hypot(L[0]-D[0]-it,L[1]-D[1]-J)/P,1/h,1/d),f/h,m/d)}else O?W=Gi(Math.abs(L[0]-D[0]-it),f,1)/h:Y=Gi(Math.abs(L[1]-D[1]-J),m,1)/d;const ht=xt._round(h*W),gt=xt._round(d*Y);k=v(...R(ht,gt));const mt=z-k[0],vt=F-k[1];o(this,En)||A(this,En,[this.x,this.y,this.width,this.height]),this.width=ht,this.height=gt,this.x=mt,this.y=vt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},qT=function(){var t;A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,we))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},VT=function(t,e,n){let l=.7*(n/e)+1-.7;if(l===1)return;const u=_(this,St,S0).call(this,this.rotation),h=(z,F)=>[u[0]*z+u[2]*F,u[1]*z+u[3]*F],[d,f]=this.parentDimensions,m=this.x,b=this.y,v=this.width,E=this.height,T=xt.MIN_SIZE/d,C=xt.MIN_SIZE/f;l=Math.max(Math.min(l,1/v,1/E),T/v,C/E);const R=xt._round(v*l),M=xt._round(E*l);if(R===v&&M===E)return;o(this,En)||A(this,En,[m,b,v,E]);const O=h(v/2,E/2),D=xt._round(m+O[0]),L=xt._round(b+O[1]),k=h(R/2,M/2);this.x=D-k[0],this.y=L-k[1],this.width=R,this.height=M,this.setDims(),this.fixAndSetPosition(),this._onResizing()},YT=function(){var t;(t=o(this,we))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),_(this,St,E0).call(this)},NA=function(t){const{isMac:e}=ii.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},XT=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),u={capture:!0,passive:!1,signal:l},h=f=>{a.abort(),A(this,yo,null),A(this,Fl,!1),this._uiManager.endDragSession()||_(this,St,NA).call(this,f),n&&this._onStopDragging()};e&&(A(this,lh,t.clientX),A(this,ch,t.clientY),A(this,yo,t.pointerId),A(this,fg,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:b,pointerId:v}=f;if(v!==o(this,yo)){Be(f);return}const[E,T]=this.screenToPageTranslation(m-o(this,lh),b-o(this,ch));A(this,lh,m),A(this,ch,b),this._uiManager.dragSelectedEditors(E,T)},u),window.addEventListener("touchmove",Be,u),window.addEventListener("pointerdown",f=>{f.pointerType===o(this,fg)&&(o(this,Pl)||f.isPrimary)&&h(f),Be(f)},u));const d=f=>{if(!o(this,yo)||o(this,yo)===f.pointerId){h(f);return}Be(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})},LA=function(){if(o(this,bo)||!this.div)return;A(this,bo,new AbortController);const t=this._uiManager.combinedSignal(o(this,bo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},KT=function(t){xt._resizerKeyboardManager.exec(this,t)},$T=function(t){var e;o(this,$a)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Ai)&&_(this,St,Sf).call(this)},QT=function(t){A(this,gg,o(this,$a)?t:"")},kA=function(t){if(o(this,Cs))for(const e of o(this,Cs))e.tabIndex=t},Sf=function(){A(this,$a,!1),_(this,St,kA).call(this,-1),_(this,St,E0).call(this)},w(xt,yg),et(xt,"_l10n",null),et(xt,"_l10nResizer",null),et(xt,"_borderLineWidth",-1),et(xt,"_colorManager",new EA),et(xt,"_zIndex",1),et(xt,"_telemetryTimeout",1e3);let me=xt;class cO extends me{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const PC=3285377520,ts=4294901760,js=65535;class WT{constructor(t){this.h1=t?t&4294967295:PC,this.h2=t?t&4294967295:PC}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,R=t.length;C<R;C++){const M=t.charCodeAt(C);M<=255?e[n++]=M:(e[n++]=M>>>8,e[n++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,l=n-a*4,u=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,m=this.h2;const b=3432918353,v=461845907,E=b&js,T=v&js;for(let C=0;C<a;C++)C&1?(h=u[C],h=h*b&ts|h*E&js,h=h<<15|h>>>17,h=h*v&ts|h*T&js,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=u[C],d=d*b&ts|d*E&js,d=d<<15|d>>>17,d=d*v&ts|d*T&js,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*b&ts|h*E&js,h=h<<15|h>>>17,h=h*v&ts|h*T&js,a&1?f^=h:m^=h}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ts|t*36045&js,e=e*4283543511&ts|((e<<16|t>>>16)*2950163797&ts)>>>16,t^=e>>>1,t=t*444984403&ts|t*60499&js,e=e*3301882366&ts|((e<<16|t>>>16)*3120437893&ts)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const BA=Object.freeze({map:null,hash:"",transfer:void 0});var Hl,jl,Qa,Si,py,ZT;class VS{constructor(){w(this,py);w(this,Hl,!1);w(this,jl,null);w(this,Qa,null);w(this,Si,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=o(this,Si).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return o(this,Si).get(t)}remove(t){const e=o(this,Si).get(t);if(e!==void 0&&(e instanceof me&&o(this,Qa).delete(e.annotationElementId),o(this,Si).delete(t),o(this,Si).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of o(this,Si).values())if(n instanceof me)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=o(this,Si).get(t);let a=!1;if(n!==void 0)for(const[l,u]of Object.entries(e))n[l]!==u&&(a=!0,n[l]=u);else a=!0,o(this,Si).set(t,e);a&&_(this,py,ZT).call(this),e instanceof me&&((o(this,Qa)||A(this,Qa,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return o(this,Si).has(t)}get size(){return o(this,Si).size}resetModified(){o(this,Hl)&&(A(this,Hl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new JT(this)}get serializable(){if(o(this,Si).size===0)return BA;const t=new Map,e=new WT,n=[],a=Object.create(null);let l=!1;for(const[u,h]of o(this,Si)){const d=h instanceof me?h.serialize(!1,a):h;d&&(t.set(u,d),e.update(`${u}:${JSON.stringify(d)}`),l||(l=!!d.bitmap))}if(l)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:BA}get editorStats(){let t=null;const e=new Map;let n=0,a=0;for(const l of o(this,Si).values()){if(!(l instanceof me)){l.popup&&(l.popup.deleted?a+=1:n+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(n+=1);const u=l.telemetryFinalData;if(!u)continue;const{type:h}=u;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||(t=Object.create(null));const d=t[h]||(t[h]=new Map);for(const[f,m]of Object.entries(u)){if(f==="type")continue;let b=d.get(f);b||(b=new Map,d.set(f,b));const v=b.get(m)??0;b.set(m,v+1)}}if((a>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:a,edited:n}),!t)return null;for(const[l,u]of e)t[l]=u.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){A(this,jl,null)}updateEditor(t,e){var a;const n=(a=o(this,Qa))==null?void 0:a.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=o(this,Qa))==null?void 0:e.get(t))||null}get modifiedIds(){if(o(this,jl))return o(this,jl);const t=[];if(o(this,Qa))for(const e of o(this,Qa).values())e.serialize()&&t.push(e.annotationElementId);return A(this,jl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return o(this,Si).entries()}}Hl=new WeakMap,jl=new WeakMap,Qa=new WeakMap,Si=new WeakMap,py=new WeakSet,ZT=function(){o(this,Hl)||(A(this,Hl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var bg;class JT extends VS{constructor(e){super();w(this,bg);const{map:n,hash:a,transfer:l}=e.serializable,u=structuredClone(n,l?{transfer:l}:null);A(this,bg,{map:u,hash:a,transfer:l})}get print(){fe("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,bg)}get modifiedIds(){return Tt(this,"modifiedIds",{ids:new Set,hash:""})}}bg=new WeakMap;var uh;class uO{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,uh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,uh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||o(this,uh).has(t.loadedName))){if(jt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:u}=t,h=new FontFace(a,l,u);this.addNativeFontFace(h);try{await h.load(),o(this,uh).add(a),n==null||n(t)}catch{Ct(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Ct(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Tt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Tt(this,"isSyncFontLoadingSupported",ji||ii.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(jt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Tt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(L,k){return L.charCodeAt(k)<<24|L.charCodeAt(k+1)<<16|L.charCodeAt(k+2)<<8|L.charCodeAt(k+3)&255}function a(L,k,z,F){const W=L.substring(0,k),Y=L.substring(k+z);return W+F+Y}let l,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function m(L,k){if(++f>30){Ct("Load test font never loaded."),k();return}if(d.font="30px "+L,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(m.bind(null,L,k))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,b.length,b);const T=16,C=1482184792;let R=n(v,T);for(l=0,u=b.length-3;l<u;l+=4)R=R-C+n(b,l)|0;l<b.length&&(R=R-C+n(b+"XXX",l)|0),v=a(v,T,4,qD(R));const M=`url(data:font/opentype;base64,${btoa(v)});`,O=`@font-face {font-family:"${b}";src:${M}}`;this.insertRule(O);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const L of[t.loadedName,b]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=L,D.append(k)}this._document.body.append(D),m(b,()=>{D.remove(),e.complete()})}}uh=new WeakMap;var se;class hO{constructor(t,e=null,n,a){w(this,se);this.compiledGlyphs=Object.create(null),A(this,se,t),this._inspectFont=e,n&&Object.assign(this,n),a&&(this.charProcOperatorList=a)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${mT(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(u){Ct(`getPathGenerator - ignoring character: "${u}".`)}const l=vT(a==null?void 0:a.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=l}get black(){return o(this,se).black}get bold(){return o(this,se).bold}get disableFontFace(){return o(this,se).disableFontFace??!1}set disableFontFace(t){Tt(this,"disableFontFace",!!t)}get fontExtraProperties(){return o(this,se).fontExtraProperties??!1}get isInvalidPDFjsFont(){return o(this,se).isInvalidPDFjsFont}get isType3Font(){return o(this,se).isType3Font}get italic(){return o(this,se).italic}get missingFile(){return o(this,se).missingFile}get remeasure(){return o(this,se).remeasure}get vertical(){return o(this,se).vertical}get ascent(){return o(this,se).ascent}get defaultWidth(){return o(this,se).defaultWidth}get descent(){return o(this,se).descent}get bbox(){return o(this,se).bbox}set bbox(t){Tt(this,"bbox",t)}get fontMatrix(){return o(this,se).fontMatrix}get fallbackName(){return o(this,se).fallbackName}get loadedName(){return o(this,se).loadedName}get mimetype(){return o(this,se).mimetype}get name(){return o(this,se).name}get data(){return o(this,se).data}clearData(){o(this,se).clearData()}get cssFontInfo(){return o(this,se).cssFontInfo}get systemFontInfo(){return o(this,se).systemFontInfo}get defaultVMetrics(){return o(this,se).defaultVMetrics}}se=new WeakMap;var hh,dh,vg,fh,w0;const Uu=class Uu{constructor(t){w(this,fh);w(this,hh);w(this,dh);w(this,vg);A(this,hh,t),A(this,dh,new DataView(o(this,hh))),A(this,vg,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const f of Uu.strings){const m=e.encode(t[f]);n[f]=m,a+=4+m.length}const l=new ArrayBuffer(a),u=new Uint8Array(l),h=new DataView(l);let d=0;for(const f of Uu.strings){const m=n[f],b=m.length;h.setUint32(d,b),u.set(m,d+4),d+=4+b}return jt(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}get fontFamily(){return _(this,fh,w0).call(this,0)}get fontWeight(){return _(this,fh,w0).call(this,1)}get italicAngle(){return _(this,fh,w0).call(this,2)}};hh=new WeakMap,dh=new WeakMap,vg=new WeakMap,fh=new WeakSet,w0=function(t){jt(t<Uu.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=o(this,dh).getUint32(e)+4;const n=o(this,dh).getUint32(e);return o(this,vg).decode(new Uint8Array(o(this,hh),e+4,n))},et(Uu,"strings",["fontFamily","fontWeight","italicAngle"]);let ty=Uu;var vo,ta,Gl,ql,Ef;const Pu=class Pu{constructor(t){w(this,ql);w(this,vo);w(this,ta);w(this,Gl);A(this,vo,t),A(this,ta,new DataView(o(this,vo))),A(this,Gl,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const v of Pu.strings){const E=e.encode(t[v]);n[v]=E,a+=4+E.length}a+=4;let l,u,h=1+a;t.style&&(l=e.encode(t.style.style),u=e.encode(t.style.weight),h+=4+l.length+4+u.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let b=0;m.setUint8(b++,t.guessFallback?1:0),m.setUint32(b,0),b+=4,a=0;for(const v of Pu.strings){const E=n[v],T=E.length;a+=4+T,m.setUint32(b,T),f.set(E,b+4),b+=4+T}return m.setUint32(b-a-4,a),t.style&&(m.setUint32(b,l.length),f.set(l,b+4),b+=4+l.length,m.setUint32(b,u.length),f.set(u,b+4),b+=4+u.length),jt(b<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(b)}get guessFallback(){return o(this,ta).getUint8(0)!==0}get css(){return _(this,ql,Ef).call(this,0)}get loadedName(){return _(this,ql,Ef).call(this,1)}get baseFontName(){return _(this,ql,Ef).call(this,2)}get src(){return _(this,ql,Ef).call(this,3)}get style(){let t=1;t+=4+o(this,ta).getUint32(t);const e=o(this,ta).getUint32(t),n=o(this,Gl).decode(new Uint8Array(o(this,vo),t+4,e));t+=4+e;const a=o(this,ta).getUint32(t),l=o(this,Gl).decode(new Uint8Array(o(this,vo),t+4,a));return{style:n,weight:l}}};vo=new WeakMap,ta=new WeakMap,Gl=new WeakMap,ql=new WeakSet,Ef=function(t){jt(t<Pu.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=o(this,ta).getUint32(e)+4;const n=o(this,ta).getUint32(e);return o(this,Gl).decode(new Uint8Array(o(this,vo),e+4,n))},et(Pu,"strings",["css","loadedName","baseFontName","src"]);let ey=Pu;var gh,ph,mh,yh,wn,ea,Ag,ae,ke,Ss,_0,wf;const Dt=class Dt{constructor({data:t,extra:e}){w(this,ke);w(this,ea);w(this,Ag);w(this,ae);A(this,ea,t),A(this,Ag,new TextDecoder),A(this,ae,new DataView(o(this,ea))),e&&Object.assign(this,e)}get black(){return _(this,ke,Ss).call(this,0)}get bold(){return _(this,ke,Ss).call(this,1)}get disableFontFace(){return _(this,ke,Ss).call(this,2)}get fontExtraProperties(){return _(this,ke,Ss).call(this,3)}get isInvalidPDFjsFont(){return _(this,ke,Ss).call(this,4)}get isType3Font(){return _(this,ke,Ss).call(this,5)}get italic(){return _(this,ke,Ss).call(this,6)}get missingFile(){return _(this,ke,Ss).call(this,7)}get remeasure(){return _(this,ke,Ss).call(this,8)}get vertical(){return _(this,ke,Ss).call(this,9)}get ascent(){return _(this,ke,_0).call(this,0)}get defaultWidth(){return _(this,ke,_0).call(this,1)}get descent(){return _(this,ke,_0).call(this,2)}get bbox(){let t=o(Dt,ph);if(o(this,ae).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<4;a++)n.push(o(this,ae).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=o(Dt,mh);if(o(this,ae).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<6;a++)n.push(o(this,ae).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=o(Dt,yh);if(o(this,ae).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<3;a++)n.push(o(this,ae).getInt16(t,!0)),t+=2;return n}get fallbackName(){return _(this,ke,wf).call(this,0)}get loadedName(){return _(this,ke,wf).call(this,1)}get mimetype(){return _(this,ke,wf).call(this,2)}get name(){return _(this,ke,wf).call(this,3)}get data(){let t=o(Dt,wn);const e=o(this,ae).getUint32(t);t+=4+e;const n=o(this,ae).getUint32(t);t+=4+n;const a=o(this,ae).getUint32(t);t+=4+a;const l=o(this,ae).getUint32(t);if(l!==0)return new Uint8Array(o(this,ea),t+4,l)}clearData(){let t=o(Dt,wn);const e=o(this,ae).getUint32(t);t+=4+e;const n=o(this,ae).getUint32(t);t+=4+n;const a=o(this,ae).getUint32(t);t+=4+a;const l=o(this,ae).getUint32(t);new Uint8Array(o(this,ea),t+4,l).fill(0),o(this,ae).setUint32(t,0)}get cssFontInfo(){let t=o(Dt,wn);const e=o(this,ae).getUint32(t);t+=4+e;const n=o(this,ae).getUint32(t);t+=4+n;const a=o(this,ae).getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(o(this,ea),t+4,a)),new ty(l.buffer)}get systemFontInfo(){let t=o(Dt,wn);const e=o(this,ae).getUint32(t);t+=4+e;const n=o(this,ae).getUint32(t);if(n===0)return null;const a=new Uint8Array(n);return a.set(new Uint8Array(o(this,ea),t+4,n)),new ey(a.buffer)}static write(t){const e=t.systemFontInfo?ey.write(t.systemFontInfo):null,n=t.cssFontInfo?ty.write(t.cssFontInfo):null,a=new TextEncoder,l={};let u=0;for(const C of Dt.strings)l[C]=a.encode(t[C]),u+=4+l[C].length;const h=o(Dt,wn)+4+u+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let b=0;const v=Dt.bools.length;let E=0,T=0;for(let C=0;C<v;C++){const R=t[Dt.bools[C]];E|=(R===void 0?0:R?2:1)<<T,T+=2,(T===8||C===v-1)&&(m.setUint8(b++,E),E=0,T=0)}jt(b===o(Dt,gh),"FontInfo.write: Boolean properties offset mismatch");for(const C of Dt.numbers)m.setFloat64(b,t[C]),b+=8;if(jt(b===o(Dt,ph),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(b++,4);for(const C of t.bbox)m.setInt16(b,C,!0),b+=2}else m.setUint8(b++,0),b+=8;if(jt(b===o(Dt,mh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(b++,6);for(const C of t.fontMatrix)m.setFloat64(b,C,!0),b+=8}else m.setUint8(b++,0),b+=48;if(jt(b===o(Dt,yh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(b++,1);for(const C of t.defaultVMetrics)m.setInt16(b,C,!0),b+=2}else m.setUint8(b++,0),b+=6;jt(b===o(Dt,wn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(o(Dt,wn),0),b+=4;for(const C of Dt.strings){const R=l[C],M=R.length;m.setUint32(b,M),f.set(R,b+4),b+=4+M}if(m.setUint32(o(Dt,wn),b-o(Dt,wn)-4),!e)m.setUint32(b,0),b+=4;else{const C=e.byteLength;m.setUint32(b,C),jt(b+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),b+4),b+=4+C}if(!n)m.setUint32(b,0),b+=4;else{const C=n.byteLength;m.setUint32(b,C),jt(b+4+C<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),b+4),b+=4+C}return t.data===void 0?(m.setUint32(b,0),b+=4):(m.setUint32(b,t.data.length),f.set(t.data,b+4),b+=4+t.data.length),jt(b<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(b)}};gh=new WeakMap,ph=new WeakMap,mh=new WeakMap,yh=new WeakMap,wn=new WeakMap,ea=new WeakMap,Ag=new WeakMap,ae=new WeakMap,ke=new WeakSet,Ss=function(t){jt(t<Dt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,a=o(this,ae).getUint8(e)>>n&3;return a===0?void 0:a===2},_0=function(t){return jt(t<Dt.numbers.length,"Invalid number index"),o(this,ae).getFloat64(o(Dt,gh)+t*8)},wf=function(t){jt(t<Dt.strings.length,"Invalid string index");let e=o(Dt,wn)+4;for(let l=0;l<t;l++)e+=o(this,ae).getUint32(e)+4;const n=o(this,ae).getUint32(e),a=new Uint8Array(n);return a.set(new Uint8Array(o(this,ea),e+4,n)),o(this,Ag).decode(a)},et(Dt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),et(Dt,"numbers",["ascent","defaultWidth","descent"]),et(Dt,"strings",["fallbackName","loadedName","mimetype","name"]),w(Dt,gh,Math.ceil(Dt.bools.length*2/8)),w(Dt,ph,o(Dt,gh)+Dt.numbers.length*8),w(Dt,mh,o(Dt,ph)+1+8),w(Dt,yh,o(Dt,mh)+1+48),w(Dt,wn,o(Dt,yh)+1+6);let IA=Dt;var Sg,Eg,wg,_g,Cg,Tg,xg,Mg;const ge=class ge{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,a=[],l=[],u=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],u=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],l=t[3],h=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(a.length/2),b=Math.floor(l.length/3),v=u.length,E=h.length;let T=0;for(const k of h)T+=1,T=Math.ceil(T/4)*4,T+=4+k.coords.length*4,T+=4+k.colors.length*4,k.verticesPerRow!==void 0&&(T+=4);const C=20+m*8+b*3+v*8+(n?16:0)+(f?3:0)+T,R=new ArrayBuffer(C),M=new DataView(R),O=new Uint8Array(R);M.setUint8(o(ge,Sg),e),M.setUint8(o(ge,Eg),n?1:0),M.setUint8(o(ge,wg),f?1:0),M.setUint8(o(ge,_g),d),M.setUint32(o(ge,Cg),m,!0),M.setUint32(o(ge,Tg),b,!0),M.setUint32(o(ge,xg),v,!0),M.setUint32(o(ge,Mg),E,!0);let D=20;new Float32Array(R,D,m*2).set(a),D+=m*8,O.set(l,D),D+=b*3;for(const[k,z]of u)M.setFloat32(D,k,!0),D+=4,M.setUint32(D,parseInt(z.slice(1),16),!0),D+=4;if(n)for(const k of n)M.setFloat32(D,k,!0),D+=4;f&&(O.set(f,D),D+=3);for(let k=0;k<h.length;k++){const z=h[k];M.setUint8(D,z.type),D+=1,D=Math.ceil(D/4)*4,M.setUint32(D,z.coords.length,!0),D+=4,new Int32Array(R,D,z.coords.length).set(z.coords),D+=z.coords.length*4,M.setUint32(D,z.colors.length,!0),D+=4,new Int32Array(R,D,z.colors.length).set(z.colors),D+=z.colors.length*4,z.verticesPerRow!==void 0&&(M.setUint32(D,z.verticesPerRow,!0),D+=4)}return R}getIR(){const t=this.view,e=this.data[o(ge,Sg)],n=!!this.data[o(ge,Eg)],a=!!this.data[o(ge,wg)],l=t.getUint32(o(ge,Cg),!0),u=t.getUint32(o(ge,Tg),!0),h=t.getUint32(o(ge,xg),!0),d=t.getUint32(o(ge,Mg),!0);let f=20;const m=new Float32Array(this.buffer,f,l*2);f+=l*8;const b=new Uint8Array(this.buffer,f,u*3);f+=u*3;const v=[];for(let R=0;R<h;++R){const M=t.getFloat32(f,!0);f+=4;const O=t.getUint32(f,!0);f+=4,v.push([M,`#${O.toString(16).padStart(6,"0")}`])}let E=null;if(n){E=[];for(let R=0;R<4;++R)E.push(t.getFloat32(f,!0)),f+=4}let T=null;a&&(T=new Uint8Array(this.buffer,f,3),f+=3);const C=[];for(let R=0;R<d;++R){const M=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const O=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,O);f+=O*4;const L=t.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,L);f+=L*4;const z={type:M,coords:D,colors:k};M===gA.LATTICE&&(z.verticesPerRow=t.getUint32(f,!0),f+=4),C.push(z)}if(e===1)return["RadialAxial","axial",E,v,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",E,v,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const R=this.data[o(ge,_g)];let M=null;if(m.length>0){let O=m[0],D=m[0],L=m[1],k=m[1];for(let z=0;z<m.length;z+=2){const F=m[z],W=m[z+1];O=O>F?F:O,L=L>W?W:L,D=D<F?F:D,k=k<W?W:k}M=[O,L,D,k]}return["Mesh",R,m,b,C,M,E,T]}throw new Error(`Unsupported pattern kind: ${e}`)}};Sg=new WeakMap,Eg=new WeakMap,wg=new WeakMap,_g=new WeakMap,Cg=new WeakMap,Tg=new WeakMap,xg=new WeakMap,Mg=new WeakMap,w(ge,Sg,0),w(ge,Eg,1),w(ge,wg,2),w(ge,_g,3),w(ge,Cg,4),w(ge,Tg,8),w(ge,xg,12),w(ge,Mg,16);let zA=ge;var bh;class dO{constructor(t){w(this,bh);A(this,bh,t)}static write(t){let e,n;return ii.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return ii.isFloat16ArraySupported?new Float16Array(o(this,bh)):new Float32Array(o(this,bh))}}bh=new WeakMap;function fO(p){if(p instanceof URL)return p.href;if(typeof p=="string"){if(ji)return p;const t=URL.parse(p,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function gO(p){if(ji&&typeof Buffer<"u"&&p instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength)return p;if(typeof p=="string")return Ip(p);if(p instanceof ArrayBuffer||ArrayBuffer.isView(p)||typeof p=="object"&&!isNaN(p==null?void 0:p.length))return new Uint8Array(p);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function o0(p){if(typeof p!="string")return null;if(p.endsWith("/"))return p;throw new Error(`Invalid factory url: "${p}" must include trailing slash.`)}const FA=p=>typeof p=="object"&&Number.isInteger(p==null?void 0:p.num)&&p.num>=0&&Number.isInteger(p==null?void 0:p.gen)&&p.gen>=0,pO=p=>typeof p=="object"&&typeof(p==null?void 0:p.name)=="string",mO=$D.bind(null,FA,pO);var Wa,my;class yO{constructor(){w(this,Wa,new Map);w(this,my,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};o(this,my).then(()=>{for(const[a]of o(this,Wa))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){Ct("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}o(this,Wa).set(e,a)}removeEventListener(t,e){const n=o(this,Wa).get(e);n==null||n(),o(this,Wa).delete(e)}terminate(){for(const[,t]of o(this,Wa))t==null||t();o(this,Wa).clear()}}Wa=new WeakMap,my=new WeakMap;const l0={DATA:1,ERROR:2},qe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function HC(){}function Ji(p){if(p instanceof Yo||p instanceof pA||p instanceof LC||p instanceof Q0||p instanceof aA)return p;switch(p instanceof Error||typeof p=="object"&&p!==null||fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new Yo(p.message);case"InvalidPDFException":return new pA(p.message);case"PasswordException":return new LC(p.message,p.code);case"ResponseException":return new Q0(p.message,p.status,p.missing);case"UnknownErrorException":return new aA(p.message,p.details)}return new aA(p.message,p.toString())}var vh,ps,tx,ex,ix,C0;class _f{constructor(t,e,n){w(this,ps);w(this,vh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",_(this,ps,tx).bind(this),{signal:o(this,vh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(u){l.reject(u)}return l.promise}sendWithStream(t,e,n,a){const l=this.streamId++,u=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:h,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,d.postMessage({sourceName:u,targetName:h,stream:qe.PULL,streamId:l,desiredSize:f.desiredSize}),m.promise},cancel:f=>{jt(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:u,targetName:h,stream:qe.CANCEL,streamId:l,reason:Ji(f)}),m.promise}},n)}destroy(){var t;(t=o(this,vh))==null||t.abort(),A(this,vh,null)}}vh=new WeakMap,ps=new WeakSet,tx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){_(this,ps,ix).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===l0.DATA)a.resolve(t.data);else if(t.callback===l0.ERROR)a.reject(Ji(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(u){l.postMessage({sourceName:n,targetName:a,callback:l0.DATA,callbackId:t.callbackId,data:u})},function(u){l.postMessage({sourceName:n,targetName:a,callback:l0.ERROR,callbackId:t.callbackId,reason:Ji(u)})});return}if(t.streamId){_(this,ps,ex).call(this,t);return}e(t.data)},ex=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,u=this,h=this.actionHandler[t.action],d={enqueue(f,m=1,b){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:a,stream:qe.ENQUEUE,streamId:e,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:qe.CLOSE,streamId:e}),delete u.streamSinks[e])},error(f){jt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:qe.ERROR,streamId:e,reason:Ji(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:n,targetName:a,stream:qe.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:n,targetName:a,stream:qe.START_COMPLETE,streamId:e,reason:Ji(f)})})},ix=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,u=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case qe.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Ji(t.reason));break;case qe.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Ji(t.reason));break;case qe.PULL:if(!h){l.postMessage({sourceName:n,targetName:a,stream:qe.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||HC).then(function(){l.postMessage({sourceName:n,targetName:a,stream:qe.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:n,targetName:a,stream:qe.PULL_COMPLETE,streamId:e,reason:Ji(f)})});break;case qe.ENQUEUE:if(jt(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case qe.CLOSE:if(jt(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),_(this,ps,C0).call(this,u,e);break;case qe.ERROR:jt(u,"error should have stream controller"),u.controller.error(Ji(t.reason)),_(this,ps,C0).call(this,u,e);break;case qe.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Ji(t.reason)),_(this,ps,C0).call(this,u,e);break;case qe.CANCEL:if(!h)break;const d=Ji(t.reason);Promise.try(h.onCancel||HC,d).then(function(){l.postMessage({sourceName:n,targetName:a,stream:qe.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:n,targetName:a,stream:qe.CANCEL_COMPLETE,streamId:e,reason:Ji(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},C0=async function(t,e){var n,a,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var Rg;class nx{constructor({enableHWA:t=!1}){w(this,Rg,!1);A(this,Rg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!o(this,Rg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){fe("Abstract method `_createCanvas` called.")}}Rg=new WeakMap;class bO extends nx{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class sx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class jC extends sx{async _fetch(t){const e=await zp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Ip(e)}}class ax{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,l){return"none"}destroy(t=!1){}}var Vl,Ah,Za,Ja,Ni,Yl,Xl,ot,Mi,Cf,Du,T0,Ou,rx,UA,Nu,Tf,xf,PA,Mf;class vO extends ax{constructor({docId:e,ownerDocument:n=globalThis.document}){super();w(this,ot);w(this,Vl);w(this,Ah);w(this,Za);w(this,Ja);w(this,Ni);w(this,Yl);w(this,Xl,0);A(this,Ja,e),A(this,Ni,n)}addFilter(e){if(!e)return"none";let n=o(this,ot,Mi).get(e);if(n)return n;const[a,l,u]=_(this,ot,T0).call(this,e),h=e.length===1?a:`${a}${l}${u}`;if(n=o(this,ot,Mi).get(h),n)return o(this,ot,Mi).set(e,n),n;const d=`g_${o(this,Ja)}_transfer_map_${Qe(this,Xl)._++}`,f=_(this,ot,Ou).call(this,d);o(this,ot,Mi).set(e,f),o(this,ot,Mi).set(h,f);const m=_(this,ot,Nu).call(this,d);return _(this,ot,xf).call(this,a,l,u,m),f}addHCMFilter(e,n){var T;const a=`${e}-${n}`,l="base";let u=o(this,ot,Cf).get(l);if((u==null?void 0:u.key)===a||(u?((T=u.filter)==null||T.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},o(this,ot,Cf).set(l,u)),!e||!n))return u.url;const h=_(this,ot,Mf).call(this,e);e=rt.makeHexColor(...h);const d=_(this,ot,Mf).call(this,n);if(n=rt.makeHexColor(...d),o(this,ot,Du).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return u.url;const f=new Array(256);for(let C=0;C<=255;C++){const R=C/255;f[C]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const m=f.join(","),b=`g_${o(this,Ja)}_hcm_filter`,v=u.filter=_(this,ot,Nu).call(this,b);_(this,ot,xf).call(this,m,m,m,v),_(this,ot,UA).call(this,v);const E=(C,R)=>{const M=h[C]/255,O=d[C]/255,D=new Array(R+1);for(let L=0;L<=R;L++)D[L]=M+L/R*(O-M);return D.join(",")};return _(this,ot,xf).call(this,E(0,5),E(1,5),E(2,5),v),u.url=_(this,ot,Ou).call(this,b),u.url}addAlphaFilter(e){let n=o(this,ot,Mi).get(e);if(n)return n;const[a]=_(this,ot,T0).call(this,[e]),l=`alpha_${a}`;if(n=o(this,ot,Mi).get(l),n)return o(this,ot,Mi).set(e,n),n;const u=`g_${o(this,Ja)}_alpha_map_${Qe(this,Xl)._++}`,h=_(this,ot,Ou).call(this,u);o(this,ot,Mi).set(e,h),o(this,ot,Mi).set(l,h);const d=_(this,ot,Nu).call(this,u);return _(this,ot,PA).call(this,a,d),h}addLuminosityFilter(e){let n=o(this,ot,Mi).get(e||"luminosity");if(n)return n;let a,l;if(e?([a]=_(this,ot,T0).call(this,[e]),l=`luminosity_${a}`):l="luminosity",n=o(this,ot,Mi).get(l),n)return o(this,ot,Mi).set(e,n),n;const u=`g_${o(this,Ja)}_luminosity_map_${Qe(this,Xl)._++}`,h=_(this,ot,Ou).call(this,u);o(this,ot,Mi).set(e,h),o(this,ot,Mi).set(l,h);const d=_(this,ot,Nu).call(this,u);return _(this,ot,rx).call(this,d),e&&_(this,ot,PA).call(this,a,d),h}addHighlightHCMFilter(e,n,a,l,u){var O;const h=`${n}-${a}-${l}-${u}`;let d=o(this,ot,Cf).get(e);if((d==null?void 0:d.key)===h||(d?((O=d.filter)==null||O.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},o(this,ot,Cf).set(e,d)),!n||!a))return d.url;const[f,m]=[n,a].map(_(this,ot,Mf).bind(this));let b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[E,T]=[l,u].map(_(this,ot,Mf).bind(this));v<b&&([b,v,E,T]=[v,b,T,E]),o(this,ot,Du).style.color="";const C=(D,L,k)=>{const z=new Array(256),F=(v-b)/k,W=D/255,Y=(L-D)/(255*k);let it=0;for(let J=0;J<=k;J++){const ht=Math.round(b+J*F),gt=W+J*Y;for(let mt=it;mt<=ht;mt++)z[mt]=gt;it=ht+1}for(let J=it;J<256;J++)z[J]=z[it-1];return z.join(",")},R=`g_${o(this,Ja)}_hcm_${e}_filter`,M=d.filter=_(this,ot,Nu).call(this,R);return _(this,ot,UA).call(this,M),_(this,ot,xf).call(this,C(E[0],T[0],5),C(E[1],T[1],5),C(E[2],T[2],5),M),d.url=_(this,ot,Ou).call(this,R),d.url}destroy(e=!1){var n,a,l,u;e&&((n=o(this,Yl))!=null&&n.size)||((a=o(this,Za))==null||a.parentNode.parentNode.remove(),A(this,Za,null),(l=o(this,Ah))==null||l.clear(),A(this,Ah,null),(u=o(this,Yl))==null||u.clear(),A(this,Yl,null),A(this,Xl,0))}}Vl=new WeakMap,Ah=new WeakMap,Za=new WeakMap,Ja=new WeakMap,Ni=new WeakMap,Yl=new WeakMap,Xl=new WeakMap,ot=new WeakSet,Mi=function(){return o(this,Ah)||A(this,Ah,new Map)},Cf=function(){return o(this,Yl)||A(this,Yl,new Map)},Du=function(){if(!o(this,Za)){const e=o(this,Ni).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=o(this,Ni).createElementNS(Ba,"svg");a.setAttribute("width",0),a.setAttribute("height",0),A(this,Za,o(this,Ni).createElementNS(Ba,"defs")),e.append(a),a.append(o(this,Za)),o(this,Ni).body.append(e)}return o(this,Za)},T0=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const b=m.join(",");return[b,b,b]}const[n,a,l]=e,u=new Array(256),h=new Array(256),d=new Array(256);for(let f=0;f<256;f++)u[f]=n[f]/255,h[f]=a[f]/255,d[f]=l[f]/255;return[u.join(","),h.join(","),d.join(",")]},Ou=function(e){if(o(this,Vl)===void 0){A(this,Vl,"");const n=o(this,Ni).URL;n!==o(this,Ni).baseURI&&(Oy(n)?Ct('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Vl,fT(n,"")))}return`url(${o(this,Vl)}#${e})`},rx=function(e){const n=o(this,Ni).createElementNS(Ba,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},UA=function(e){const n=o(this,Ni).createElementNS(Ba,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Nu=function(e){const n=o(this,Ni).createElementNS(Ba,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),o(this,ot,Du).append(n),n},Tf=function(e,n,a){const l=o(this,Ni).createElementNS(Ba,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",a),e.append(l)},xf=function(e,n,a,l){const u=o(this,Ni).createElementNS(Ba,"feComponentTransfer");l.append(u),_(this,ot,Tf).call(this,u,"feFuncR",e),_(this,ot,Tf).call(this,u,"feFuncG",n),_(this,ot,Tf).call(this,u,"feFuncB",a)},PA=function(e,n){const a=o(this,Ni).createElementNS(Ba,"feComponentTransfer");n.append(a),_(this,ot,Tf).call(this,a,"feFuncA",e)},Mf=function(e){return o(this,ot,Du).style.color=e,Up(getComputedStyle(o(this,ot,Du)).getPropertyValue("color"))};class ox{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class GC extends ox{async _fetch(t){const e=await zp(t,"arraybuffer");return new Uint8Array(e)}}class lx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class qC extends lx{async _fetch(t){const e=await zp(t,"arraybuffer");return new Uint8Array(e)}}ji&&Ct("Please use the `legacy` build in Node.js environments.");async function YS(p){const e=await process.getBuiltinModule("fs").promises.readFile(p);return new Uint8Array(e)}class AO extends ax{}class SO extends nx{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class EO extends sx{async _fetch(t){return YS(t)}}class wO extends ox{async _fetch(t){return YS(t)}}class _O extends lx{async _fetch(t){return YS(t)}}const xu="__forcedDependency",{floor:VC,ceil:YC}=Math;function c0(p,t,e,n,a,l){p[t*4+0]=Math.min(p[t*4+0],e),p[t*4+1]=Math.min(p[t*4+1],n),p[t*4+2]=Math.max(p[t*4+2],a),p[t*4+3]=Math.max(p[t*4+3],l)}const HA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Sh,Ao;class CO{constructor(t,e){w(this,Sh);w(this,Ao);A(this,Sh,t),A(this,Ao,e)}get length(){return o(this,Sh).length}isEmpty(t){return o(this,Sh)[t]===HA}minX(t){return o(this,Ao)[t*4+0]/256}minY(t){return o(this,Ao)[t*4+1]/256}maxX(t){return(o(this,Ao)[t*4+2]+1)/256}maxY(t){return(o(this,Ao)[t*4+3]+1)/256}}Sh=new WeakMap,Ao=new WeakMap;const u0=(p,t)=>{if(!p)return;let e=p.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},p.set(t,e)),e};var nn,sn,Kl,Ts,$l,tr,Jt,re,er,an,Dg,Eh,Ql,Wl,ir,Li,ia,Og,jA;class TO{constructor(t,e,n=!1){w(this,Og);w(this,nn,{__proto__:null});w(this,sn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[xu]:[]});w(this,Kl,new Map);w(this,Ts,[]);w(this,$l,[]);w(this,tr,[[1,0,0,1,0,0]]);w(this,Jt,[-1/0,-1/0,1/0,1/0]);w(this,re,new Float64Array([1/0,1/0,-1/0,-1/0]));w(this,er,-1);w(this,an,new Set);w(this,Dg,new Map);w(this,Eh,new Map);w(this,Ql);w(this,Wl);w(this,ir);w(this,Li);w(this,ia);A(this,Ql,t.width),A(this,Wl,t.height),_(this,Og,jA).call(this,e),n&&A(this,ia,new Map)}growOperationsCount(t){t>=o(this,Li).length&&_(this,Og,jA).call(this,t,o(this,Li))}save(t){return A(this,nn,{__proto__:o(this,nn)}),A(this,sn,{__proto__:o(this,sn),transform:{__proto__:o(this,sn).transform},moveText:{__proto__:o(this,sn).moveText},sameLineText:{__proto__:o(this,sn).sameLineText},[xu]:{__proto__:o(this,sn)[xu]}}),A(this,Jt,{__proto__:o(this,Jt)}),o(this,Ts).push(t),this}restore(t){var a;const e=Object.getPrototypeOf(o(this,nn));if(e===null)return this;A(this,nn,e),A(this,sn,Object.getPrototypeOf(o(this,sn))),A(this,Jt,Object.getPrototypeOf(o(this,Jt)));const n=o(this,Ts).pop();return n!==void 0&&((a=u0(o(this,ia),t))==null||a.dependencies.add(n),o(this,Li)[t]=o(this,Li)[n]),this}recordOpenMarker(t){return o(this,Ts).push(t),this}getOpenMarker(){return o(this,Ts).length===0?null:o(this,Ts).at(-1)}recordCloseMarker(t){var n;const e=o(this,Ts).pop();return e!==void 0&&((n=u0(o(this,ia),t))==null||n.dependencies.add(e),o(this,Li)[t]=o(this,Li)[e]),this}beginMarkedContent(t){return o(this,$l).push(t),this}endMarkedContent(t){var n;const e=o(this,$l).pop();return e!==void 0&&((n=u0(o(this,ia),t))==null||n.dependencies.add(e),o(this,Li)[t]=o(this,Li)[e]),this}pushBaseTransform(t){return o(this,tr).push(rt.multiplyByDOMMatrix(o(this,tr).at(-1),t.getTransform())),this}popBaseTransform(){return o(this,tr).length>1&&o(this,tr).pop(),this}recordSimpleData(t,e){return o(this,nn)[t]=e,this}recordIncrementalData(t,e){return o(this,sn)[t].push(e),this}resetIncrementalData(t,e){return o(this,sn)[t].length=0,this}recordNamedData(t,e){return o(this,Kl).set(t,e),this}recordSimpleDataFromNamed(t,e,n){o(this,nn)[t]=o(this,Kl).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(xu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in o(this,nn)&&this.recordFutureForcedDependency(e,o(this,nn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of o(this,an))this.recordFutureForcedDependency(xu,t);return this}resetBBox(t){return o(this,er)!==t&&(A(this,er,t),o(this,re)[0]=1/0,o(this,re)[1]=1/0,o(this,re)[2]=-1/0,o(this,re)[3]=-1/0),this}recordClipBox(t,e,n,a,l,u){const h=rt.multiplyByDOMMatrix(o(this,tr).at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];rt.axialAlignedBoundingBox([n,l,a,u],h,d);const f=rt.intersect(o(this,Jt),d);return f?(o(this,Jt)[0]=f[0],o(this,Jt)[1]=f[1],o(this,Jt)[2]=f[2],o(this,Jt)[3]=f[3]):(o(this,Jt)[0]=o(this,Jt)[1]=1/0,o(this,Jt)[2]=o(this,Jt)[3]=-1/0),this}recordBBox(t,e,n,a,l,u){const h=o(this,Jt);if(h[0]===1/0)return this;const d=rt.multiplyByDOMMatrix(o(this,tr).at(-1),e.getTransform());if(h[0]===-1/0)return rt.axialAlignedBoundingBox([n,l,a,u],d,o(this,re)),this;const f=[1/0,1/0,-1/0,-1/0];return rt.axialAlignedBoundingBox([n,l,a,u],d,f),o(this,re)[0]=Math.min(o(this,re)[0],Math.max(f[0],h[0])),o(this,re)[1]=Math.min(o(this,re)[1],Math.max(f[1],h[1])),o(this,re)[2]=Math.max(o(this,re)[2],Math.min(f[2],h[2])),o(this,re)[3]=Math.max(o(this,re)[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,n,a=1,l=0,u=0,h){const d=n.bbox;let f,m;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&o(this,Eh).get(n),f!==!1&&(m=[0,0,0,0],rt.axialAlignedBoundingBox(d,n.fontMatrix,m),(a!==1||l!==0||u!==0)&&rt.scaleMinMax([a,0,0,-a,l,u],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const b=h();return d&&m&&f===void 0&&(f=m[0]<=l-b.actualBoundingBoxLeft&&m[2]>=l+b.actualBoundingBoxRight&&m[1]<=u-b.actualBoundingBoxAscent&&m[3]>=u+b.actualBoundingBoxDescent,o(this,Eh).set(n,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,l-b.actualBoundingBoxLeft,l+b.actualBoundingBoxRight,u-b.actualBoundingBoxAscent,u+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return o(this,re)[0]=Math.max(0,o(this,Jt)[0]),o(this,re)[1]=Math.max(0,o(this,Jt)[1]),o(this,re)[2]=Math.min(o(this,Ql),o(this,Jt)[2]),o(this,re)[3]=Math.min(o(this,Wl),o(this,Jt)[3]),this}getSimpleIndex(t){return o(this,nn)[t]}recordDependencies(t,e){const n=o(this,an),a=o(this,nn),l=o(this,sn);for(const u of e)u in o(this,nn)?n.add(a[u]):u in l&&l[u].forEach(n.add,n);return this}recordNamedDependency(t,e){return o(this,Kl).has(e)&&o(this,an).add(o(this,Kl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[xu]),o(this,ia)){const n=u0(o(this,ia),t),{dependencies:a}=n;o(this,an).forEach(a.add,a),o(this,Ts).forEach(a.add,a),o(this,$l).forEach(a.add,a),a.delete(t),n.isRenderingOperation=!0}if(o(this,er)===t){const n=VC(o(this,re)[0]*256/o(this,Ql)),a=VC(o(this,re)[1]*256/o(this,Wl)),l=YC(o(this,re)[2]*256/o(this,Ql)),u=YC(o(this,re)[3]*256/o(this,Wl));c0(o(this,ir),t,n,a,l,u);for(const h of o(this,an))h!==t&&c0(o(this,ir),h,n,a,l,u);for(const h of o(this,Ts))h!==t&&c0(o(this,ir),h,n,a,l,u);for(const h of o(this,$l))h!==t&&c0(o(this,ir),h,n,a,l,u);e||(o(this,an).clear(),A(this,er,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(o(this,an));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of n)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return o(this,er)===t&&(A(this,er,-1),o(this,Jt)[0]=Math.max(o(this,Jt)[0],o(this,re)[0]),o(this,Jt)[1]=Math.max(o(this,Jt)[1],o(this,re)[1]),o(this,Jt)[2]=Math.min(o(this,Jt)[2],o(this,re)[2]),o(this,Jt)[3]=Math.min(o(this,Jt)[3],o(this,re)[3]),e||o(this,an).clear()),this}_takePendingDependencies(){const t=o(this,an);return A(this,an,new Set),t}_extractOperation(t){const e=o(this,Dg).get(t);return o(this,Dg).delete(t),e}_pushPendingDependencies(t){for(const e of t)o(this,an).add(e)}take(){return o(this,Eh).clear(),new CO(o(this,Li),o(this,ir))}takeDebugMetadata(){return o(this,ia)}}nn=new WeakMap,sn=new WeakMap,Kl=new WeakMap,Ts=new WeakMap,$l=new WeakMap,tr=new WeakMap,Jt=new WeakMap,re=new WeakMap,er=new WeakMap,an=new WeakMap,Dg=new WeakMap,Eh=new WeakMap,Ql=new WeakMap,Wl=new WeakMap,ir=new WeakMap,Li=new WeakMap,ia=new WeakMap,Og=new WeakSet,jA=function(t,e){const n=new ArrayBuffer(t*4);A(this,ir,new Uint8ClampedArray(n)),A(this,Li,new Uint32Array(n)),e&&e.length>0?(o(this,Li).set(e),o(this,Li).fill(HA,e.length)):o(this,Li).fill(HA)};var he,Oe,xs,wh,_h;const t1=class t1{constructor(t,e,n){w(this,he);w(this,Oe);w(this,xs);w(this,wh,0);w(this,_h,0);if(t instanceof t1&&o(t,xs)===!!n)return t;A(this,he,t),A(this,Oe,e),A(this,xs,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Qe(this,_h)._++,o(this,he).save(o(this,Oe)),this}restore(t){return o(this,_h)>0&&(o(this,he).restore(o(this,Oe)),Qe(this,_h)._--),this}recordOpenMarker(t){return Qe(this,wh)._++,this}getOpenMarker(){return o(this,wh)>0?o(this,Oe):o(this,he).getOpenMarker()}recordCloseMarker(t){return Qe(this,wh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return o(this,he).pushBaseTransform(t),this}popBaseTransform(){return o(this,he).popBaseTransform(),this}recordSimpleData(t,e){return o(this,he).recordSimpleData(t,o(this,Oe)),this}recordIncrementalData(t,e){return o(this,he).recordIncrementalData(t,o(this,Oe)),this}resetIncrementalData(t,e){return o(this,he).resetIncrementalData(t,o(this,Oe)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return o(this,he).recordSimpleDataFromNamed(t,e,o(this,Oe)),this}recordFutureForcedDependency(t,e){return o(this,he).recordFutureForcedDependency(t,o(this,Oe)),this}inheritSimpleDataAsFutureForcedDependencies(t){return o(this,he).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return o(this,he).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return o(this,xs)||o(this,he).resetBBox(o(this,Oe)),this}recordClipBox(t,e,n,a,l,u){return o(this,xs)||o(this,he).recordClipBox(o(this,Oe),e,n,a,l,u),this}recordBBox(t,e,n,a,l,u){return o(this,xs)||o(this,he).recordBBox(o(this,Oe),e,n,a,l,u),this}recordCharacterBBox(t,e,n,a,l,u,h){return o(this,xs)||o(this,he).recordCharacterBBox(o(this,Oe),e,n,a,l,u,h),this}recordFullPageBBox(t){return o(this,xs)||o(this,he).recordFullPageBBox(o(this,Oe)),this}getSimpleIndex(t){return o(this,he).getSimpleIndex(t)}recordDependencies(t,e){return o(this,he).recordDependencies(o(this,Oe),e),this}recordNamedDependency(t,e){return o(this,he).recordNamedDependency(o(this,Oe),e),this}recordOperation(t){return o(this,he).recordOperation(o(this,Oe),!0),this}recordShowTextOperation(t){return o(this,he).recordShowTextOperation(o(this,Oe),!0),this}bboxToClipBoxDropOperation(t){return o(this,xs)||o(this,he).bboxToClipBoxDropOperation(o(this,Oe),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};he=new WeakMap,Oe=new WeakMap,xs=new WeakMap,wh=new WeakMap,_h=new WeakMap;let iy=t1;const es={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function GA(p,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),p.clip(a)}class XS{isModifyingCurrentTransform(){return!1}getPattern(){fe("Abstract method `getPattern` called.")}}class xO extends XS{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,a=this._p0,l=this._p1;if(e&&(a=a.slice(),l=l.slice(),rt.applyTransform(a,e),rt.applyTransform(l,e)),this._type==="axial")n=t.createLinearGradient(a[0],a[1],l[0],l[1]);else if(this._type==="radial"){let u=this._r0,h=this._r1;if(e){const d=new Float32Array(2);rt.singularValueDecompose2dScale(e,d),u*=d[0],h*=d[0]}n=t.createRadialGradient(a[0],a[1],u,l[0],l[1],h)}for(const u of this._colorStops)n.addColorStop(u[0],u[1]);return n}getPattern(t,e,n,a){let l;if(a===_i.STROKE||a===_i.FILL){if(this.isOriginBased()){let v=rt.transform(n,e.baseTransform);this.matrix&&(v=rt.transform(v,this.matrix));const E=.001,T=Math.hypot(v[0],v[1]),C=Math.hypot(v[2],v[3]),R=(v[0]*v[2]+v[1]*v[3])/(T*C);if(Math.abs(R)<E)if(this.isRadial()){if(Math.abs(T-C)<E)return this._createGradient(t,v)}else return this._createGradient(t,v)}const u=e.current.getClippedPathBoundingBox(a,Te(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),n=rt.transform(n,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),GA(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(n);l.setTransform(b)}else GA(t,this._bbox),l=this._createGradient(t);return l}}function lA(p,t,e,n,a,l,u,h){const d=t.coords,f=t.colors,m=p.data,b=p.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=l,l=u,u=v),d[n+1]>d[a+1]&&(v=n,n=a,a=v,v=u,u=h,h=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=l,l=u,u=v);const E=(d[e]+t.offsetX)*t.scaleX,T=(d[e+1]+t.offsetY)*t.scaleY,C=(d[n]+t.offsetX)*t.scaleX,R=(d[n+1]+t.offsetY)*t.scaleY,M=(d[a]+t.offsetX)*t.scaleX,O=(d[a+1]+t.offsetY)*t.scaleY;if(T>=O)return;const D=f[l],L=f[l+1],k=f[l+2],z=f[u],F=f[u+1],W=f[u+2],Y=f[h],it=f[h+1],J=f[h+2],ht=Math.round(T),gt=Math.round(O);let mt,vt,P,X,nt,Et,wt,B;for(let V=ht;V<=gt;V++){if(V<R){const bt=V<T?0:(T-V)/(T-R);mt=E-(E-C)*bt,vt=D-(D-z)*bt,P=L-(L-F)*bt,X=k-(k-W)*bt}else{let bt;V>O?bt=1:R===O?bt=0:bt=(R-V)/(R-O),mt=C-(C-M)*bt,vt=z-(z-Y)*bt,P=F-(F-it)*bt,X=W-(W-J)*bt}let Z;V<T?Z=0:V>O?Z=1:Z=(T-V)/(T-O),nt=E-(E-M)*Z,Et=D-(D-Y)*Z,wt=L-(L-it)*Z,B=k-(k-J)*Z;const at=Math.round(Math.min(mt,nt)),ct=Math.round(Math.max(mt,nt));let yt=b*V+at*4;for(let bt=at;bt<=ct;bt++)Z=(mt-bt)/(mt-nt),Z<0?Z=0:Z>1&&(Z=1),m[yt++]=vt-(vt-Et)*Z|0,m[yt++]=P-(P-wt)*Z|0,m[yt++]=X-(X-B)*Z|0,m[yt++]=255}}function MO(p,t,e){const n=t.coords,a=t.colors;let l,u;switch(t.type){case gA.LATTICE:const h=t.verticesPerRow,d=Math.floor(n.length/h)-1,f=h-1;for(l=0;l<d;l++){let m=l*h;for(let b=0;b<f;b++,m++)lA(p,e,n[m],n[m+1],n[m+h],a[m],a[m+1],a[m+h]),lA(p,e,n[m+h+1],n[m+1],n[m+h],a[m+h+1],a[m+1],a[m+h])}break;case gA.TRIANGLES:for(l=0,u=n.length;l<u;l+=3)lA(p,e,n[l],n[l+1],n[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class RO extends XS{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),E=f/b,T=m/v,C={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/E,scaleY:1/T},R=b+4,M=v+4,O=n.getCanvas("mesh",R,M),D=O.context,L=D.createImageData(b,v);if(e){const z=L.data;for(let F=0,W=z.length;F<W;F+=4)z[F]=e[0],z[F+1]=e[1],z[F+2]=e[2],z[F+3]=255}for(const z of this._figures)MO(L,z,C);return D.putImageData(L,2,2),{canvas:O.canvas,offsetX:h-2*E,offsetY:d-2*T,scaleX:E,scaleY:T}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){GA(t,this._bbox);const l=new Float32Array(2);if(a===_i.SHADING)rt.singularValueDecompose2dScale(Te(t),l);else if(this.matrix){rt.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;rt.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else rt.singularValueDecompose2dScale(e.baseTransform,l);const u=this._createMeshCanvas(l,a===_i.SHADING?null:this._background,e.cachedCanvases);return a!==_i.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class DO extends XS{getPattern(){return"hotpink"}}function OO(p){switch(p[0]){case"RadialAxial":return new xO(p);case"Mesh":return new RO(p);case"Dummy":return new DO}throw new Error(`Unknown IR type: ${p[0]}`)}const XC={COLORED:1,UNCOLORED:2},yy=class yy{constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t,e){var Et,wt;const{bbox:n,operatorList:a,paintType:l,tilingType:u,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),Dy("TilingType: "+u);const b=n[0],v=n[1],E=n[2],T=n[3],C=E-b,R=T-v,M=new Float32Array(2);rt.singularValueDecompose2dScale(this.matrix,M);const[O,D]=M;rt.singularValueDecompose2dScale(this.baseTransform,M);const L=O*M[0],k=D*M[1];let z=C,F=R,W=!1,Y=!1;const it=Math.ceil(f*L),J=Math.ceil(m*k),ht=Math.ceil(C*L),gt=Math.ceil(R*k);it>=ht?z=f:W=!0,J>=gt?F=m:Y=!0;const mt=this.getSizeAndScale(z,this.ctx.canvas.width,L),vt=this.getSizeAndScale(F,this.ctx.canvas.height,k),P=t.cachedCanvases.getCanvas("pattern",mt.size,vt.size),X=P.context,nt=d.createCanvasGraphics(X,e);if(nt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(nt,l,h),X.translate(-mt.scale*b,-vt.scale*v),nt.transform(0,mt.scale,0,0,vt.scale,0,0),X.save(),(Et=nt.dependencyTracker)==null||Et.save(),this.clipBbox(nt,b,v,E,T),nt.baseTransform=Te(nt.ctx),nt.executeOperatorList(a),nt.endDrawing(),(wt=nt.dependencyTracker)==null||wt.restore(),X.restore(),W||Y){const B=P.canvas;W&&(z=f),Y&&(F=m);const V=this.getSizeAndScale(z,this.ctx.canvas.width,L),Z=this.getSizeAndScale(F,this.ctx.canvas.height,k),at=V.size,ct=Z.size,yt=t.cachedCanvases.getCanvas("pattern-workaround",at,ct),bt=yt.context,Ke=W?Math.floor(C/f):0,ye=Y?Math.floor(R/m):0;for(let ys=0;ys<=Ke;ys++)for(let Gn=0;Gn<=ye;Gn++)bt.drawImage(B,at*ys,ct*Gn,at,ct,0,0,at,ct);return{canvas:yt.canvas,scaleX:V.scale,scaleY:Z.scale,offsetX:b,offsetY:v}}return{canvas:P.canvas,scaleX:mt.scale,scaleY:vt.scale,offsetX:b,offsetY:v}}getSizeAndScale(t,e,n){const a=Math.max(yy.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*n);return l>=a?l=a:n=l/t,{scale:n,size:l}}clipBbox(t,e,n,a,l){const u=a-e,h=l-n;t.ctx.rect(e,n,u,h),rt.axialAlignedBoundingBox([e,n,a,l],Te(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,l=t.current;switch(e){case XC.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=u,a.strokeStyle=l.strokeColor=h;break;case XC.UNCOLORED:a.fillStyle=a.strokeStyle=n,l.fillColor=l.strokeColor=n;break;default:throw new GD(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a,l){let u=n;a!==_i.SHADING&&(u=rt.transform(u,e.baseTransform),this.matrix&&(u=rt.transform(u,this.matrix)));const h=this.createPatternCanvas(e,l);let d=new DOMMatrix(u);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}};et(yy,"MAX_PATTERN_SIZE",3e3);let qA=yy;function NO({src:p,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const h=ii.isLittleEndian?4278190080:255,[d,f]=u?[l,h]:[h,l],m=n>>3,b=n&7,v=p.length;e=new Uint32Array(e.buffer);let E=0;for(let T=0;T<a;T++){for(const R=t+m;t<R;t++){const M=t<v?p[t]:255;e[E++]=M&128?f:d,e[E++]=M&64?f:d,e[E++]=M&32?f:d,e[E++]=M&16?f:d,e[E++]=M&8?f:d,e[E++]=M&4?f:d,e[E++]=M&2?f:d,e[E++]=M&1?f:d}if(b===0)continue;const C=t<v?p[t++]:255;for(let R=0;R<b;R++)e[E++]=C&1<<7-R?f:d}return{srcPos:t,destPos:E}}const KC=16,$C=100,LO=15,QC=10,ln=16,cA=new DOMMatrix,Pn=new Float32Array(2),zu=new Float32Array([1/0,1/0,-1/0,-1/0]);function kO(p,t){if(p._removeMirroring)throw new Error("Context is already forwarding operations.");p.__originalSave=p.save,p.__originalRestore=p.restore,p.__originalRotate=p.rotate,p.__originalScale=p.scale,p.__originalTranslate=p.translate,p.__originalTransform=p.transform,p.__originalSetTransform=p.setTransform,p.__originalResetTransform=p.resetTransform,p.__originalClip=p.clip,p.__originalMoveTo=p.moveTo,p.__originalLineTo=p.lineTo,p.__originalBezierCurveTo=p.bezierCurveTo,p.__originalRect=p.rect,p.__originalClosePath=p.closePath,p.__originalBeginPath=p.beginPath,p._removeMirroring=()=>{p.save=p.__originalSave,p.restore=p.__originalRestore,p.rotate=p.__originalRotate,p.scale=p.__originalScale,p.translate=p.__originalTranslate,p.transform=p.__originalTransform,p.setTransform=p.__originalSetTransform,p.resetTransform=p.__originalResetTransform,p.clip=p.__originalClip,p.moveTo=p.__originalMoveTo,p.lineTo=p.__originalLineTo,p.bezierCurveTo=p.__originalBezierCurveTo,p.rect=p.__originalRect,p.closePath=p.__originalClosePath,p.beginPath=p.__originalBeginPath,delete p._removeMirroring},p.save=function(){t.save(),this.__originalSave()},p.restore=function(){t.restore(),this.__originalRestore()},p.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},p.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},p.transform=function(e,n,a,l,u,h){t.transform(e,n,a,l,u,h),this.__originalTransform(e,n,a,l,u,h)},p.setTransform=function(e,n,a,l,u,h){t.setTransform(e,n,a,l,u,h),this.__originalSetTransform(e,n,a,l,u,h)},p.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},p.rotate=function(e){t.rotate(e),this.__originalRotate(e)},p.clip=function(e){t.clip(e),this.__originalClip(e)},p.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},p.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},p.bezierCurveTo=function(e,n,a,l,u,h){t.bezierCurveTo(e,n,a,l,u,h),this.__originalBezierCurveTo(e,n,a,l,u,h)},p.rect=function(e,n,a,l){t.rect(e,n,a,l),this.__originalRect(e,n,a,l)},p.closePath=function(){t.closePath(),this.__originalClosePath()},p.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class BO{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function h0(p,t,e,n,a,l,u,h,d,f){const[m,b,v,E,T,C]=Te(p);if(b===0&&v===0){const O=u*m+T,D=Math.round(O),L=h*E+C,k=Math.round(L),z=(u+d)*m+T,F=Math.abs(Math.round(z)-D)||1,W=(h+f)*E+C,Y=Math.abs(Math.round(W)-k)||1;return p.setTransform(Math.sign(m),0,0,Math.sign(E),D,k),p.drawImage(t,e,n,a,l,0,0,F,Y),p.setTransform(m,b,v,E,T,C),[F,Y]}if(m===0&&E===0){const O=h*v+T,D=Math.round(O),L=u*b+C,k=Math.round(L),z=(h+f)*v+T,F=Math.abs(Math.round(z)-D)||1,W=(u+d)*b+C,Y=Math.abs(Math.round(W)-k)||1;return p.setTransform(0,Math.sign(b),Math.sign(v),0,D,k),p.drawImage(t,e,n,a,l,0,0,Y,F),p.setTransform(m,b,v,E,T,C),[Y,F]}p.drawImage(t,e,n,a,l,u,h,d,f);const R=Math.hypot(m,b),M=Math.hypot(v,E);return[R*d,M*f]}class WC{constructor(t,e,n){et(this,"alphaIsShape",!1);et(this,"fontSize",0);et(this,"fontSizeScale",1);et(this,"textMatrix",null);et(this,"textMatrixScale",1);et(this,"fontMatrix",fA);et(this,"leading",0);et(this,"x",0);et(this,"y",0);et(this,"lineX",0);et(this,"lineY",0);et(this,"charSpacing",0);et(this,"wordSpacing",0);et(this,"textHScale",1);et(this,"textRenderingMode",We.FILL);et(this,"textRise",0);et(this,"fillColor","#000000");et(this,"strokeColor","#000000");et(this,"patternFill",!1);et(this,"patternStroke",!1);et(this,"fillAlpha",1);et(this,"strokeAlpha",1);et(this,"lineWidth",1);et(this,"activeSMask",null);et(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=zu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_i.FILL,e=null){const n=this.minMax.slice();if(t===_i.STROKE){e||fe("Stroke bounding box must include transform."),rt.singularValueDecompose2dScale(e,Pn);const a=Pn[0]*this.lineWidth/2,l=Pn[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(zu,0)}getClippedPathBoundingBox(t=_i.FILL,e=null){return rt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ZC(p,t){if(t instanceof ImageData){p.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%ln,l=(e-a)/ln,u=a===0?l:l+1,h=p.createImageData(n,ln);let d=0,f;const m=t.data,b=h.data;let v,E,T,C;if(t.kind===m0.GRAYSCALE_1BPP){const R=m.byteLength,M=new Uint32Array(b.buffer,0,b.byteLength>>2),O=M.length,D=n+7>>3,L=4294967295,k=ii.isLittleEndian?4278190080:255;for(v=0;v<u;v++){for(T=v<l?ln:a,f=0,E=0;E<T;E++){const z=R-d;let F=0;const W=z>D?n:z*8-7,Y=W&-8;let it=0,J=0;for(;F<Y;F+=8)J=m[d++],M[f++]=J&128?L:k,M[f++]=J&64?L:k,M[f++]=J&32?L:k,M[f++]=J&16?L:k,M[f++]=J&8?L:k,M[f++]=J&4?L:k,M[f++]=J&2?L:k,M[f++]=J&1?L:k;for(;F<W;F++)it===0&&(J=m[d++],it=128),M[f++]=J&it?L:k,it>>=1}for(;f<O;)M[f++]=0;p.putImageData(h,0,v*ln)}}else if(t.kind===m0.RGBA_32BPP){for(E=0,C=n*ln*4,v=0;v<l;v++)b.set(m.subarray(d,d+C)),d+=C,p.putImageData(h,0,E),E+=ln;v<u&&(C=n*a*4,b.set(m.subarray(d,d+C)),p.putImageData(h,0,E))}else if(t.kind===m0.RGB_24BPP)for(T=ln,C=n*T,v=0;v<u;v++){for(v>=l&&(T=a,C=n*T),f=0,E=C;E--;)b[f++]=m[d++],b[f++]=m[d++],b[f++]=m[d++],b[f++]=255;p.putImageData(h,0,v*ln)}else throw new Error(`bad image kind: ${t.kind}`)}function JC(p,t){if(t.bitmap){p.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%ln,l=(e-a)/ln,u=a===0?l:l+1,h=p.createImageData(n,ln);let d=0;const f=t.data,m=h.data;for(let b=0;b<u;b++){const v=b<l?ln:a;({srcPos:d}=NO({src:f,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),p.putImageData(h,0,b*ln)}}function df(p,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)p[n]!==void 0&&(t[n]=p[n]);p.setLineDash!==void 0&&(t.setLineDash(p.getLineDash()),t.lineDashOffset=p.lineDashOffset)}function d0(p){p.strokeStyle=p.fillStyle="#000000",p.fillRule="nonzero",p.globalAlpha=1,p.lineWidth=1,p.lineCap="butt",p.lineJoin="miter",p.miterLimit=10,p.globalCompositeOperation="source-over",p.font="10px sans-serif",p.setLineDash!==void 0&&(p.setLineDash([]),p.lineDashOffset=0);const{filter:t}=p;t!=="none"&&t!==""&&(p.filter="none")}function tT(p,t){if(t)return!0;rt.singularValueDecompose2dScale(p,Pn);const e=Math.fround(ga.pixelRatio*Xo.PDF_TO_CSS_UNITS);return Pn[0]<=e&&Pn[1]<=e}const IO=["butt","round","square"],zO=["miter","round","bevel"],FO={},eT={};var Is,VA,YA,XA;const e1=class e1{constructor(t,e,n,a,l,{optionalContentConfig:u,markedContentStack:h=null},d,f,m){w(this,Is);this.ctx=t,this.current=new WC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new BO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var a;return typeof e=="string"?((a=this.dependencyTracker)==null||a.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Te(this.compositeCtx))}this.ctx.save(),d0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Te(this.ctx)}executeOperatorList(t,e,n,a,l){var M;const u=t.argsArray,h=t.fnArray;let d=e||0;const f=u.length;if(f===d)return d;const m=f-d>QC&&typeof n=="function",b=m?Date.now()+LO:0;let v=0;const E=this.commonObjs,T=this.objs;let C,R;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(!l||l(d))if(C=h[d],R=u[d]??null,C!==Hf.dependency)R===null?this[C](d):this[C](d,...R);else for(const O of R){(M=this.dependencyTracker)==null||M.recordNamedData(O,d);const D=O.startsWith("g_")?E:T;if(!D.has(O))return D.get(O,n),d}if(d++,d===f)return d;if(m&&++v>QC){if(Date.now()>b)return n(),d;v=0}}}endDrawing(){_(this,Is,VA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),_(this,Is,YA).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),h=n,d=a,f="prescale1",m,b;for(;l>2&&h>1||u>2&&d>1;){let v=h,E=d;l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/v),u>2&&d>1&&(E=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/E),m=this.cachedCanvases.getCanvas(f,v,E),b=m.context,b.clearRect(0,0,v,E),b.drawImage(t,0,0,h,d,0,0,v,E),t=m.canvas,h=v,d=E,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){var it,J;const n=this.ctx,{width:a,height:l}=e,u=this.current.fillColor,h=this.current.patternFill,d=Te(n);let f,m,b,v;if((e.bitmap||e.data)&&e.count>1){const ht=e.bitmap||e.data.buffer;m=JSON.stringify(h?d:[d.slice(0,4),u]),f=this._cachedBitmapsMap.get(ht),f||(f=new Map,this._cachedBitmapsMap.set(ht,f));const gt=f.get(m);if(gt&&!h){const mt=Math.round(Math.min(d[0],d[2])+d[4]),vt=Math.round(Math.min(d[1],d[3])+d[5]);return(it=this.dependencyTracker)==null||it.recordDependencies(t,es.transformAndFill),{canvas:gt,offsetX:mt,offsetY:vt}}b=gt}b||(v=this.cachedCanvases.getCanvas("maskCanvas",a,l),JC(v.context,e));let E=rt.transform(d,[1/a,0,0,-1/l,0,0]);E=rt.transform(E,[1,0,0,1,0,-l]);const T=zu.slice();rt.axialAlignedBoundingBox([0,0,a,l],E,T);const[C,R,M,O]=T,D=Math.round(M-C)||1,L=Math.round(O-R)||1,k=this.cachedCanvases.getCanvas("fillCanvas",D,L),z=k.context,F=C,W=R;z.translate(-F,-W),z.transform(...E),b||(b=this._scaleImage(v.canvas,Hs(z)),b=b.img,f&&h&&f.set(m,b)),z.imageSmoothingEnabled=tT(Te(z),e.interpolate),h0(z,b,0,0,b.width,b.height,0,0,a,l),z.globalCompositeOperation="source-in";const Y=rt.transform(Hs(z),[1,0,0,1,-F,-W]);return z.fillStyle=h?u.getPattern(n,this,Y,_i.FILL,t):u,z.fillRect(0,0,a,l),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,k.canvas)),(J=this.dependencyTracker)==null||J.recordDependencies(t,es.transformAndFill),{canvas:k.canvas,offsetX:Math.round(F),offsetY:Math.round(W)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=IO[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=zO[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var l;(l=this.dependencyTracker)==null||l.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,a,l,u,h;for(const[d,f]of e)switch(d){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(a=this.dependencyTracker)==null||a.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(l=this.dependencyTracker)==null||l.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(u=this.dependencyTracker)==null||u.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,n);this.suspendedCtx=this.ctx;const u=this.ctx=l.context;u.setTransform(this.suspendedCtx.getTransform()),df(this.suspendedCtx,u),kO(u,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),df(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const l=a[0],u=a[1],h=a[2]-l,d=a[3]-u;h===0||d===0||(this.genericComposeSMask(e.context,n,h,d,e.subtype,e.backdrop,e.transferMap,l,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,l,u,h,d,f,m,b){let v=t.canvas,E=d-m,T=f-b;if(u)if(E<0||T<0||E+n>v.width||T+a>v.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,a),M=R.context;M.drawImage(v,-E,-T),M.globalCompositeOperation="destination-atop",M.fillStyle=u,M.fillRect(0,0,n,a),M.globalCompositeOperation="source-over",v=R.canvas,E=T=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(E,T,n,a),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(E,T,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const C=new Path2D;C.rect(d,f,n,a),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(v,E,T,n,a,d,f,n,a),e.restore()}save(t){var n;this.inSMaskMode&&df(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&df(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,l,u,h){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",t),this.ctx.transform(e,n,a,l,u,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,a){let[l]=n;if(!a){l||(l=n[0]=new Path2D),this[e](t,l);return}if(this.dependencyTracker!==null){const u=e===Hf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-u,a[2]+u,a[1]-u,a[3]+u).recordDependencies(t,["transform"])}l instanceof Path2D||(l=n[0]=vT(l)),rt.axialAlignedBoundingBox(a,Te(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var u;const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&(l!=null&&l.getPattern)){const h=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Hs(a),_i.STROKE,t),h){const d=new Path2D;d.addPath(e,a.getTransform().invertSelf().multiplySelf(h)),e=d}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);(u=this.dependencyTracker)==null||u.recordDependencies(t,es.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(_i.STROKE,Te(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,m,b;const a=this.ctx,l=this.current.fillColor,u=this.current.patternFill;let h=!1;if(u){const v=l.isModifyingCurrentTransform()?a.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Hs(a),_i.FILL,t),v){const E=new Path2D;E.addPath(e,a.getTransform().invertSelf().multiplySelf(v)),e=E}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,es.fill),h&&(a.restore(),(b=this.dependencyTracker)==null||b.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,es.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=FO}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=eT}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=n.getTransform().invertSelf();for(const{transform:u,x:h,y:d,fontSize:f,path:m}of e)m&&a.addPath(m,new DOMMatrix(u).preMultiplySelf(l).translate(h,d).scale(f,-f));n.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var b,v;(b=this.dependencyTracker)==null||b.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||fA,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&Ct("Invalid font matrix for font "+e),n<0?(n=-n,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const u=a.loadedName||"sans-serif",h=((v=a.systemFontInfo)==null?void 0:v.css)||`"${u}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let m=n;n<KC?m=KC:n>$C&&(m=$C),this.current.fontSizeScale=n/m,this.ctx.font=`${f} ${d} ${m}px ${h}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var a;(a=this.dependencyTracker)==null||a.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var a;(a=this.dependencyTracker)==null||a.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,a,l,u){var M,O,D,L;const h=this.ctx,d=this.current,f=d.font,m=d.textRenderingMode,b=d.fontSize/d.fontSizeScale,v=m&We.FILL_STROKE_MASK,E=!!(m&We.ADD_TO_PATH_FLAG),T=d.patternFill&&!f.missingFile,C=d.patternStroke&&!f.missingFile;let R;if((f.disableFontFace||E||T||C)&&!f.missingFile&&(R=f.getPathGenerator(this.commonObjs,e)),R&&(f.disableFontFace||T||C)){h.save(),h.translate(n,a),h.scale(b,-b),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,h,f);let k;if(v===We.FILL||v===We.FILL_STROKE)if(l){k=h.getTransform(),h.setTransform(...l);const z=_(this,Is,XA).call(this,R,k,l);h.fill(z)}else h.fill(R);if(v===We.STROKE||v===We.FILL_STROKE)if(u){k||(k=h.getTransform()),h.setTransform(...u);const{a:z,b:F,c:W,d:Y}=k,it=rt.inverseTransform(u),J=rt.transform([z,F,W,Y,0,0],it);rt.singularValueDecompose2dScale(J,Pn),h.lineWidth*=Math.max(Pn[0],Pn[1])/b,h.stroke(_(this,Is,XA).call(this,R,k,u))}else h.lineWidth/=b,h.stroke(R);h.restore()}else(v===We.FILL||v===We.FILL_STROKE)&&(h.fillText(e,n,a),(O=this.dependencyTracker)==null||O.recordCharacterBBox(t,h,f,b,n,a,()=>h.measureText(e))),(v===We.STROKE||v===We.FILL_STROKE)&&(this.dependencyTracker&&((D=this.dependencyTracker)==null||D.recordCharacterBBox(t,h,f,b,n,a,()=>h.measureText(e)).recordDependencies(t,es.stroke)),h.strokeText(e,n,a));E&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Te(h),x:n,y:a,fontSize:b,path:R}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,h,f,b,n,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Tt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var J,ht,gt,mt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,es.showText).resetBBox(t),this.current.textRenderingMode&We.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,a=n.font;if(a.isType3Font){this.showType3Text(t,e),(J=this.dependencyTracker)==null||J.recordShowTextOperation(t);return}const l=n.fontSize;if(l===0){(ht=this.dependencyTracker)==null||ht.recordOperation(t);return}const u=this.ctx,h=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,m=n.fontDirection,b=n.textHScale*m,v=e.length,E=a.vertical,T=E?1:-1,C=a.defaultVMetrics,R=l*n.fontMatrix[0],M=n.textRenderingMode===We.FILL&&!a.disableFontFace&&!n.patternFill;u.save(),n.textMatrix&&u.transform(...n.textMatrix),u.translate(n.x,n.y+n.textRise),m>0?u.scale(b,-1):u.scale(b,1);let O,D;const L=n.textRenderingMode&We.FILL_STROKE_MASK,k=L===We.FILL||L===We.FILL_STROKE,z=L===We.STROKE||L===We.FILL_STROKE;if(k&&n.patternFill){u.save();const vt=n.fillColor.getPattern(u,this,Hs(u),_i.FILL,t);O=Te(u),u.restore(),u.fillStyle=vt}if(z&&n.patternStroke){u.save();const vt=n.strokeColor.getPattern(u,this,Hs(u),_i.STROKE,t);D=Te(u),u.restore(),u.strokeStyle=vt}let F=n.lineWidth;const W=n.textMatrixScale;if(W===0||F===0?z&&(F=this.getSinglePixelWidth()):F/=W,h!==1&&(u.scale(h,h),F/=h),u.lineWidth=F,a.isInvalidPDFjsFont){const vt=[];let P=0;for(const nt of e)vt.push(nt.unicode),P+=nt.width;const X=vt.join("");if(u.fillText(X,0,0),this.dependencyTracker!==null){const nt=u.measureText(X);this.dependencyTracker.recordBBox(t,this.ctx,-nt.actualBoundingBoxLeft,nt.actualBoundingBoxRight,-nt.actualBoundingBoxAscent,nt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=P*R*b,u.restore(),this.compose();return}let Y=0,it;for(it=0;it<v;++it){const vt=e[it];if(typeof vt=="number"){Y+=T*vt*l/1e3;continue}let P=!1;const X=(vt.isSpace?f:0)+d,nt=vt.fontChar,Et=vt.accent;let wt,B,V=vt.width;if(E){const ct=vt.vmetric||C,yt=-(vt.vmetric?ct[1]:V*.5)*R,bt=ct[2]*R;V=ct?-ct[0]:V,wt=yt/h,B=(Y+bt)/h}else wt=Y/h,B=0;let Z;if(a.remeasure&&V>0){Z=u.measureText(nt);const ct=Z.width*1e3/l*h;if(V<ct&&this.isFontSubpixelAAEnabled){const yt=V/ct;P=!0,u.save(),u.scale(yt,1),wt/=yt}else V!==ct&&(wt+=(V-ct)/2e3*l/h)}if(this.contentVisible&&(vt.isInFont||a.missingFile)){if(M&&!Et)u.fillText(nt,wt,B),(gt=this.dependencyTracker)==null||gt.recordCharacterBBox(t,u,Z?{bbox:null}:a,l/h,wt,B,()=>Z??u.measureText(nt));else if(this.paintChar(t,nt,wt,B,O,D),Et){const ct=wt+l*Et.offset.x/h,yt=B-l*Et.offset.y/h;this.paintChar(t,Et.fontChar,ct,yt,O,D)}}const at=E?V*R-X*m:V*R+X*m;Y+=at,P&&u.restore()}E?n.y-=Y:n.x+=Y*b,u.restore(),this.compose(),(mt=this.dependencyTracker)==null||mt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,a=this.current,l=a.font,u=a.fontSize,h=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,m=a.wordSpacing,b=a.textHScale*h,v=a.fontMatrix||fA,E=e.length,T=a.textRenderingMode===We.INVISIBLE;let C,R,M,O;if(T||u===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),a.textMatrix&&n.transform(...a.textMatrix),n.translate(a.x,a.y+a.textRise),n.scale(b,h);const D=this.dependencyTracker;for(this.dependencyTracker=D?new iy(D,t):null,C=0;C<E;++C){if(R=e[C],typeof R=="number"){O=d*R*u/1e3,this.ctx.translate(O,0),a.x+=O*b;continue}const L=(R.isSpace?m:0)+f,k=l.charProcOperatorList[R.operatorListId];k?this.contentVisible&&(this.save(),n.scale(u,u),n.transform(...v),this.executeOperatorList(k),this.restore()):Ct(`Type3 character "${R.operatorListId}" is not available.`);const z=[R.width,0];rt.applyTransform(z,v),M=z[0]*u+L,n.translate(M,0),a.x+=M*b}n.restore(),D&&(this.dependencyTracker=D)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,a,l,u,h){var f;const d=new Path2D;d.rect(a,l,u-a,h-l),this.ctx.clip(d),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,a,u,l,h).recordClipBox(t,this.ctx,a,u,l,h),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const a=this.baseTransform||Te(this.ctx),l={createCanvasGraphics:(u,h)=>new e1(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new iy(this.dependencyTracker,h,!0):null)};n=new qA(e,this.ctx,l,a)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=OO(this.getObject(t,e)),this.cachedPatterns.set(e,a)),n&&(a.matrix=n),a}shadingFill(t,e){var u;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const a=this._getPattern(t,e);n.fillStyle=a.getPattern(n,this,Hs(n),_i.SHADING,t);const l=Hs(n);if(l){const{width:h,height:d}=n.canvas,f=zu.slice();rt.axialAlignedBoundingBox([0,0,h,d],l,f);const[m,b,v,E]=f;this.ctx.fillRect(m,b,v-m,E-b)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(u=this.dependencyTracker)==null||u.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,es.transform).recordDependencies(t,es.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){fe("Should not call beginInlineImage")}beginImageData(){fe("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var a;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Te(this.ctx),n)){rt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[l,u,h,d]=n,f=new Path2D;f.rect(l,u,h-l,d-u),this.ctx.clip(f),(a=this.dependencyTracker)==null||a.recordClipBox(t,this.ctx,l,h,u,d),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var D;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Dy("TODO: Support non-isolated groups."),e.knockout&&Ct("Knockout groups not supported.");const a=Te(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=zu.slice();rt.axialAlignedBoundingBox(e.bbox,Te(n),l);const u=[0,0,n.canvas.width,n.canvas.height];l=rt.intersect(l,u)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-h,1),m=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,m]);let b="groupAt"+this.groupLevel;e.smask&&(b+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(b,f,m),E=v.context;E.translate(-h,-d),E.transform(...a);let T=new Path2D;const[C,R,M,O]=e.bbox;if(T.rect(C,R,M-C,O-R),e.matrix){const L=new Path2D;L.addPath(T,new DOMMatrix(e.matrix)),T=L}E.clip(T),e.smask&&this.smaskStack.push({canvas:v.canvas,context:E,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(h,d),n.save()),df(n,E),this.ctx=E,(D=this.dependencyTracker)==null||D.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var l;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,(l=this.dependencyTracker)==null||l.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const u=Te(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...u);const h=zu.slice();rt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],u,h),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,n,a,l,u){if(_(this,Is,VA).call(this),d0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const h=n[2]-n[0],d=n[3]-n[1];if(u&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=h,n[3]=d,rt.singularValueDecompose2dScale(Te(this.ctx),Pn);const{viewportScale:f}=this,m=Math.ceil(h*this.outputScaleX*f),b=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,b);const{canvas:v,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(Pn[0],0,0,-Pn[1],0,d*Pn[1]),d0(this.ctx)}else{d0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],h,d),this.ctx.clip(f)}}this.current=new WC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),_(this,Is,YA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const a=this.ctx,l=this._createMaskCanvas(t,e),u=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(u,l.offsetX,l.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+u.width,l.offsetY,l.offsetY+u.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,a=0,l=0,u,h){var b,v,E;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=Te(d);d.transform(n,a,l,u,0,0);const m=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),(b=this.dependencyTracker)==null||b.resetBBox(t);for(let T=0,C=h.length;T<C;T+=2){const R=rt.transform(f,[n,a,l,u,h[T],h[T+1]]);d.drawImage(m.canvas,R[4],R[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,R[4],R[4]+m.canvas.width,R[5],R[5]+m.canvas.height)}d.restore(),this.compose(),(E=this.dependencyTracker)==null||E.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var u,h,d;if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,l=this.current.patternFill;(u=this.dependencyTracker)==null||u.resetBBox(t).recordDependencies(t,es.transformAndFill);for(const f of e){const{data:m,width:b,height:v,transform:E}=f,T=this.cachedCanvases.getCanvas("maskCanvas",b,v),C=T.context;C.save();const R=this.getObject(t,m,f);JC(C,R),C.globalCompositeOperation="source-in",C.fillStyle=l?a.getPattern(C,this,Hs(n),_i.FILL,t):a,C.fillRect(0,0,b,v),C.restore(),n.save(),n.transform(...E),n.scale(1,-1),h0(n,T.canvas,0,0,b,v,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,n,0,b,0,v),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,a,l){if(!this.contentVisible)return;const u=this.getObject(t,e);if(!u){Ct("Dependent image isn't ready yet");return}const h=u.width,d=u.height,f=[];for(let m=0,b=l.length;m<b;m+=2)f.push({transform:[n,0,0,a,l[m],l[m+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,u,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,a),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",l.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:u}=l;u!=="none"&&u!==""&&(l.filter="none"),l.scale(1/n,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const b=this.cachedCanvases.getCanvas("inlineImage",n,a).context;ZC(b,e),h=this.applyTransferMapsToCanvas(b)}const d=this._scaleImage(h,Hs(l));l.imageSmoothingEnabled=tT(Te(l),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,l,0,n,-a,0).recordDependencies(t,es.imageXObject).recordOperation(t),h0(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,n,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var u,h,d;if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const f=e.width,m=e.height,v=this.cachedCanvases.getCanvas("inlineImage",f,m).context;ZC(v,e),l=this.applyTransferMapsToCanvas(v)}(u=this.dependencyTracker)==null||u.resetBBox(t);for(const f of n)a.save(),a.transform(...f.transform),a.scale(1,-1),h0(a,l,f.x,f.y,f.w,f.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,a,0,1,-1,0),a.restore();(d=this.dependencyTracker)==null||d.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,es.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var a;(a=this.dependencyTracker)==null||a.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var u,h;const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===eT?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,(u=this.dependencyTracker)==null||u.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Te(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:l}=this.ctx.getTransform();let u,h;if(n===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)u=h=1/d;else{const m=d*t;u=h=m<1?1/m:1}else if(t===0)u=1/d,h=1/f;else{const m=d*t,b=f*t;u=m<1?1/m:1,h=b<1?1/b:1}}else{const d=Math.abs(e*l-n*a),f=Math.hypot(e,n),m=Math.hypot(a,l);if(t===0)u=m/d,h=f/d;else{const b=t*d;u=m>b?m/b:1,h=f>b?f/b:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[l,u]=this.getScaleForStroking();if(l===u){n.lineWidth=(a||1)*l,n.stroke(t);return}const h=n.getLineDash();e&&n.save(),n.scale(l,u),cA.a=1/l,cA.d=1/u;const d=new Path2D;if(d.addPath(t,cA),h.length>0){const f=Math.max(l,u);n.setLineDash(h.map(m=>m/f)),n.lineDashOffset/=f}n.lineWidth=a||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Is=new WeakSet,VA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},YA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},XA=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let ju=e1;for(const p in Hf)ju.prototype[p]!==void 0&&(ju.prototype[Hf[p]]=ju.prototype[p]);var Ng,Lg;class fa{static get workerPort(){return o(this,Ng)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,Ng,t)}static get workerSrc(){return o(this,Lg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,Lg,t)}}Ng=new WeakMap,Lg=new WeakMap,w(fa,Ng,null),w(fa,Lg,"");var Ch,kg;class UO{constructor({parsedData:t,rawData:e}){w(this,Ch);w(this,kg);A(this,Ch,t),A(this,kg,e)}getRaw(){return o(this,kg)}get(t){return o(this,Ch).get(t)??null}[Symbol.iterator](){return o(this,Ch).entries()}}Ch=new WeakMap,kg=new WeakMap;const Lu=Symbol("INTERNAL");var Bg,Ig,zg,Th;class PO{constructor(t,{name:e,intent:n,usage:a,rbGroups:l}){w(this,Bg,!1);w(this,Ig,!1);w(this,zg,!1);w(this,Th,!0);A(this,Bg,!!(t&Un.DISPLAY)),A(this,Ig,!!(t&Un.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=l}get visible(){if(o(this,zg))return o(this,Th);if(!o(this,Th))return!1;const{print:t,view:e}=this.usage;return o(this,Bg)?(e==null?void 0:e.viewState)!=="OFF":o(this,Ig)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Lu&&fe("Internal method `_setVisible` called."),A(this,zg,n),A(this,Th,e)}}Bg=new WeakMap,Ig=new WeakMap,zg=new WeakMap,Th=new WeakMap;var So,oe,xh,Mh,Fg,KA;class HO{constructor(t,e=Un.DISPLAY){w(this,Fg);w(this,So,null);w(this,oe,new Map);w(this,xh,null);w(this,Mh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Mh,t.order);for(const n of t.groups)o(this,oe).set(n.id,new PO(e,n));if(t.baseState==="OFF")for(const n of o(this,oe).values())n._setVisible(Lu,!1);for(const n of t.on)o(this,oe).get(n)._setVisible(Lu,!0);for(const n of t.off)o(this,oe).get(n)._setVisible(Lu,!1);A(this,xh,this.getHash())}}isVisible(t){if(o(this,oe).size===0)return!0;if(!t)return Dy("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,oe).has(t.id)?o(this,oe).get(t.id).visible:(Ct(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return _(this,Fg,KA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,oe).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(o(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,oe).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!o(this,oe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,oe).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(!o(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,oe).has(e))return Ct(`Optional content group not found: ${e}`),!0;if(o(this,oe).get(e).visible)return!1}return!0}return Ct(`Unknown optional content policy ${t.policy}.`),!0}return Ct(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var l;const a=o(this,oe).get(t);if(!a){Ct(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const u of a.rbGroups)for(const h of u)h!==t&&((l=o(this,oe).get(h))==null||l._setVisible(Lu,!1,!0));a._setVisible(Lu,!!e,!0),A(this,So,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const l=o(this,oe).get(a);if(l)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}A(this,So,null)}get hasInitialVisibility(){return o(this,xh)===null||this.getHash()===o(this,xh)}getOrder(){return o(this,oe).size?o(this,Mh)?o(this,Mh).slice():[...o(this,oe).keys()]:null}getGroup(t){return o(this,oe).get(t)||null}getHash(){if(o(this,So)!==null)return o(this,So);const t=new WT;for(const[e,n]of o(this,oe))t.update(`${e}:${n.visible}`);return A(this,So,t.hexdigest())}[Symbol.iterator](){return o(this,oe).entries()}}So=new WeakMap,oe=new WeakMap,xh=new WeakMap,Mh=new WeakMap,Fg=new WeakSet,KA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const l=t[a];let u;if(Array.isArray(l))u=_(this,Fg,KA).call(this,l);else if(o(this,oe).has(l))u=o(this,oe).get(l).visible;else return Ct(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};class jO{constructor(t,{disableRange:e=!1,disableStream:n=!1}){jt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:u,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(l==null?void 0:l.length)>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});jt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,l;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(l=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||l.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){jt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new GO(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new qO(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class GO{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=qS(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class qO{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function VO(p){let t=!0,e=n("filename\\*","i").exec(p);if(e){e=e[1];let m=h(e);return m=unescape(m),m=d(m),m=f(m),l(m)}if(e=u(p),e){const m=f(e);return l(m)}if(e=n("filename","i").exec(p),e){e=e[1];let m=h(e);return m=f(m),l(m)}function n(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(m,{fatal:!0}),E=Ip(b);b=v.decode(E),t=!1}catch{}}return b}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function u(m){const b=[];let v;const E=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=E.exec(m))!==null;){let[,C,R,M]=v;if(C=parseInt(C,10),C in b){if(C===0)break;continue}b[C]=[R,M]}const T=[];for(let C=0;C<b.length&&C in b;++C){let[R,M]=b[C];M=h(M),R&&(M=unescape(M),C===0&&(M=d(M))),T.push(M)}return T.join("")}function h(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let v=0;v<b.length;++v){const E=b[v].indexOf('"');E!==-1&&(b[v]=b[v].slice(0,E),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function d(m){const b=m.indexOf("'");if(b===-1)return m;const v=m.slice(0,b),T=m.slice(b+1).replace(/^[^']*'/,"");return a(v,T)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,E,T){if(E==="q"||E==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,R){return String.fromCharCode(parseInt(R,16))}),a(v,T);try{T=atob(T)}catch{}return a(v,T)})}return""}function cx(p,t){const e=new Headers;if(!p||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function Ny(p){var t;return((t=URL.parse(p))==null?void 0:t.origin)??null}function ux({responseHeaders:p,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(p.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||n||!t||p.get("Accept-Ranges")!=="bytes"||(p.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function hx(p){const t=p.get("Content-Disposition");if(t){let e=VO(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(qS(e))return e}return null}function Hp(p,t){return new Q0(`Unexpected server response (${p}) while retrieving PDF "${t}".`,p,p===404||p===0&&t.startsWith("file:"))}function dx(p){return p===200||p===206}function fx(p,t,e){return{method:"GET",headers:p,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gx(p){return p instanceof Uint8Array?p.buffer:p instanceof ArrayBuffer?p:(Ct(`getArrayBuffer - unexpected data format: ${p}`),new Uint8Array(p).buffer)}class YO{constructor(t){et(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=cx(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return jt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new XO(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new KO(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class XO{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,fx(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Ny(l.url),!dx(l.status))throw Hp(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:h,suggestedLength:d}=ux({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=hx(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class KO{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`);const u=a.url;fetch(u,fx(l,this._withCredentials,this._abortController)).then(h=>{const d=Ny(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!dx(h.status))throw Hp(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:gx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const uA=200,hA=206;function $O(p){const t=p.response;return typeof t!="string"?t:Ip(t).buffer}class QO{constructor({url:t,httpHeaders:e,withCredentials:n}){et(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=cx(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,u]of this.headers)e.setRequestHeader(l,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=hA):a.expectedStatus=uA,e.responseType="arraybuffer",jt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const l=a.status||uA;if(!(l===uA&&n.expectedStatus===hA)&&l!==n.expectedStatus){n.onError(a.status);return}const h=$O(a);if(l===hA){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:h}):(Ct('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class WO{constructor(t){this._source=t,this._manager=new QO(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return jt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ZO(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new JO(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class ZO{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ny(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=ux({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=hx(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Hp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class JO{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Ny((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Hp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const tN=/^[a-z][a-z0-9\-+.]+:/i;function eN(p){if(tN.test(p))return new URL(p);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(p))}class iN{constructor(t){this.source=t,this.url=eN(t.url),jt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return jt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new nN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new sN(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class nN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Hp(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Yo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sN{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ff=Symbol("INITIAL_DATA");var _n,Ug,$A;class px{constructor(){w(this,Ug);w(this,_n,Object.create(null))}get(t,e=null){if(e){const a=_(this,Ug,$A).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=o(this,_n)[t];if(!n||n.data===ff)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=o(this,_n)[t];return!!e&&e.data!==ff}delete(t){const e=o(this,_n)[t];return!e||e.data===ff?!1:(delete o(this,_n)[t],!0)}resolve(t,e=null){const n=_(this,Ug,$A).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in o(this,_n)){const{data:n}=o(this,_n)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}A(this,_n,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,_n)){const{data:e}=o(this,_n)[t];e!==ff&&(yield[t,e])}}}_n=new WeakMap,Ug=new WeakSet,$A=function(t){var e;return(e=o(this,_n))[t]||(e[t]={...Promise.withResolvers(),data:ff})};const aN=1e5,iT=30;var aT,Eo,Cn,Pg,Hg,Zl,nr,jg,Gg,Jl,qg,Rh,wo,Dh,Vg,Oh,tc,Yg,Xg,Nh,ec,Kg,Lh,kh,Cr,mx,yx,QA,jn,x0,WA,bx,vx;const bi=class bi{constructor({textContentSource:t,container:e,viewport:n}){w(this,Cr);w(this,Eo,Promise.withResolvers());w(this,Cn,null);w(this,Pg,!1);w(this,Hg,!!((aT=globalThis.FontInspector)!=null&&aT.enabled));w(this,Zl,null);w(this,nr,null);w(this,jg,0);w(this,Gg,0);w(this,Jl,null);w(this,qg,null);w(this,Rh,0);w(this,wo,0);w(this,Dh,Object.create(null));w(this,Vg,[]);w(this,Oh,null);w(this,tc,[]);w(this,Yg,new WeakMap);w(this,Xg,null);var d;if(t instanceof ReadableStream)A(this,Oh,t);else if(typeof t=="object")A(this,Oh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Cn,A(this,qg,e)),A(this,wo,n.scale*ga.pixelRatio),A(this,Rh,n.rotation),A(this,nr,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:l,pageX:u,pageY:h}=n.rawDims;A(this,Xg,[1,0,0,-1,-u,h+l]),A(this,Gg,a),A(this,jg,l),_(d=bi,jn,bx).call(d),e.style.setProperty("--min-font-size",o(bi,Lh)),zc(e,n),o(this,Eo).promise.finally(()=>{o(bi,kh).delete(this),A(this,nr,null),A(this,Dh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ii.platform;return Tt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,Jl).read().then(({value:e,done:n})=>{if(n){o(this,Eo).resolve();return}o(this,Zl)??A(this,Zl,e.lang),Object.assign(o(this,Dh),e.styles),_(this,Cr,mx).call(this,e.items),t()},o(this,Eo).reject)};return A(this,Jl,o(this,Oh).getReader()),o(bi,kh).add(this),t(),o(this,Eo).promise}update({viewport:t,onBefore:e=null}){var l;const n=t.scale*ga.pixelRatio,a=t.rotation;if(a!==o(this,Rh)&&(e==null||e(),A(this,Rh,a),zc(o(this,qg),{rotation:a})),n!==o(this,wo)){e==null||e(),A(this,wo,n);const u={div:null,properties:null,ctx:_(l=bi,jn,x0).call(l,o(this,Zl))};for(const h of o(this,tc))u.properties=o(this,Yg).get(h),u.div=h,_(this,Cr,QA).call(this,u)}}cancel(){var e;const t=new Yo("TextLayer task cancelled.");(e=o(this,Jl))==null||e.cancel(t).catch(()=>{}),A(this,Jl,null),o(this,Eo).reject(t)}get textDivs(){return o(this,tc)}get textContentItemsStr(){return o(this,Vg)}static cleanup(){if(!(o(this,kh).size>0)){o(this,Nh).clear();for(const{canvas:t}of o(this,ec).values())t.remove();o(this,ec).clear()}}};Eo=new WeakMap,Cn=new WeakMap,Pg=new WeakMap,Hg=new WeakMap,Zl=new WeakMap,nr=new WeakMap,jg=new WeakMap,Gg=new WeakMap,Jl=new WeakMap,qg=new WeakMap,Rh=new WeakMap,wo=new WeakMap,Dh=new WeakMap,Vg=new WeakMap,Oh=new WeakMap,tc=new WeakMap,Yg=new WeakMap,Xg=new WeakMap,Nh=new WeakMap,ec=new WeakMap,Kg=new WeakMap,Lh=new WeakMap,kh=new WeakMap,Cr=new WeakSet,mx=function(t){var a,l;if(o(this,Pg))return;(l=o(this,nr)).ctx??(l.ctx=_(a=bi,jn,x0).call(a,o(this,Zl)));const e=o(this,tc),n=o(this,Vg);for(const u of t){if(e.length>aN){Ct("Ignoring additional textDivs for performance reasons."),A(this,Pg,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=o(this,Cn);A(this,Cn,document.createElement("span")),o(this,Cn).classList.add("markedContent"),u.id&&o(this,Cn).setAttribute("id",`${u.id}`),h.append(o(this,Cn))}else u.type==="endMarkedContent"&&A(this,Cn,o(this,Cn).parentNode);continue}n.push(u.str),_(this,Cr,yx).call(this,u)}},yx=function(t){var T;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,tc).push(e);const a=rt.transform(o(this,Xg),t.transform);let l=Math.atan2(a[1],a[0]);const u=o(this,Dh)[t.fontName];u.vertical&&(l+=Math.PI/2);let h=o(this,Hg)&&u.fontSubstitution||u.fontFamily;h=bi.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*_(T=bi,jn,vx).call(T,h,u,o(this,Zl));let m,b;l===0?(m=a[4],b=a[5]-f):(m=a[4]+f*Math.sin(l),b=a[5]-f*Math.cos(l));const v=e.style;v.left=`${(100*m/o(this,Gg)).toFixed(2)}%`,v.top=`${(100*b/o(this,jg)).toFixed(2)}%`,v.setProperty("--font-height",`${d.toFixed(2)}px`),v.fontFamily=h,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,Hg)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);C!==R&&Math.max(C,R)/Math.min(C,R)>1.5&&(E=!0)}if(E&&(n.canvasWidth=u.vertical?t.height:t.width),o(this,Yg).set(e,n),o(this,nr).div=e,o(this,nr).properties=n,_(this,Cr,QA).call(this,o(this,nr)),n.hasText&&o(this,Cn).append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),o(this,Cn).append(C)}},QA=function(t){var u;const{div:e,properties:n,ctx:a}=t,{style:l}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=l,{canvasWidth:d,fontSize:f}=n;_(u=bi,jn,WA).call(u,a,f*o(this,wo),h);const{width:m}=a.measureText(e.textContent);m>0&&l.setProperty("--scale-x",d*o(this,wo)/m)}n.angle!==0&&l.setProperty("--rotate",`${n.angle}deg`)},jn=new WeakSet,x0=function(t=null){let e=o(this,ec).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,ec).set(t,e),o(this,Kg).set(e,{size:0,family:""})}return e},WA=function(t,e,n){const a=o(this,Kg).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},bx=function(){if(o(this,Lh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Lh,t.getBoundingClientRect().height),t.remove()},vx=function(t,e,n){const a=o(this,Nh).get(t);if(a)return a;const l=_(this,jn,x0).call(this,n);l.canvas.width=l.canvas.height=iT,_(this,jn,WA).call(this,l,iT,t);const u=l.measureText(""),h=u.fontBoundingBoxAscent,d=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return h?f=h/(h+d):(ii.platform.isFirefox&&Ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),o(this,Nh).set(t,f),f},w(bi,jn),w(bi,Nh,new Map),w(bi,ec,new Map),w(bi,Kg,new WeakMap),w(bi,Lh,null),w(bi,kh,new Set);let Gf=bi;const rN=100;function Ax(p={}){typeof p=="string"||p instanceof URL?p={url:p}:(p instanceof ArrayBuffer||ArrayBuffer.isView(p))&&(p={data:p});const t=new ZA,{docId:e}=t,n=p.url?fO(p.url):null,a=p.data?gO(p.data):null,l=p.httpHeaders||null,u=p.withCredentials===!0,h=p.password??null,d=p.range instanceof Sx?p.range:null,f=Number.isInteger(p.rangeChunkSize)&&p.rangeChunkSize>0?p.rangeChunkSize:2**16;let m=p.worker instanceof qf?p.worker:null;const b=p.verbosity,v=typeof p.docBaseUrl=="string"&&!Oy(p.docBaseUrl)?p.docBaseUrl:null,E=o0(p.cMapUrl),T=p.cMapPacked!==!1,C=p.CMapReaderFactory||(ji?EO:jC),R=o0(p.iccUrl),M=o0(p.standardFontDataUrl),O=p.StandardFontDataFactory||(ji?wO:GC),D=o0(p.wasmUrl),L=p.WasmFactory||(ji?_O:qC),k=p.stopAtErrors!==!0,z=Number.isInteger(p.maxImageSize)&&p.maxImageSize>-1?p.maxImageSize:-1,F=p.isEvalSupported!==!1,W=typeof p.isOffscreenCanvasSupported=="boolean"?p.isOffscreenCanvasSupported:!ji,Y=typeof p.isImageDecoderSupported=="boolean"?p.isImageDecoderSupported:!ji&&(ii.platform.isFirefox||!globalThis.chrome),it=Number.isInteger(p.canvasMaxAreaInBytes)?p.canvasMaxAreaInBytes:-1,J=typeof p.disableFontFace=="boolean"?p.disableFontFace:ji,ht=p.fontExtraProperties===!0,gt=p.enableXfa===!0,mt=p.ownerDocument||globalThis.document,vt=p.disableRange===!0,P=p.disableStream===!0,X=p.disableAutoFetch===!0,nt=p.pdfBug===!0,Et=p.CanvasFactory||(ji?SO:bO),wt=p.FilterFactory||(ji?AO:vO),B=p.enableHWA===!0,V=p.useWasm!==!1,Z=d?d.length:p.length??NaN,at=typeof p.useSystemFonts=="boolean"?p.useSystemFonts:!ji&&!J,ct=typeof p.useWorkerFetch=="boolean"?p.useWorkerFetch:!!(C===jC&&O===GC&&L===qC&&E&&M&&D&&mf(E,document.baseURI)&&mf(M,document.baseURI)&&mf(D,document.baseURI)),yt=null;PD(b);const bt={canvasFactory:new Et({ownerDocument:mt,enableHWA:B}),filterFactory:new wt({docId:e,ownerDocument:mt}),cMapReaderFactory:ct?null:new C({baseUrl:E,isCompressed:T}),standardFontDataFactory:ct?null:new O({baseUrl:M}),wasmFactory:ct?null:new L({baseUrl:D})};m||(m=qf.create({verbosity:b,port:fa.workerPort}),t._worker=m);const Ke={docId:e,apiVersion:"5.4.530",data:a,password:h,disableAutoFetch:X,rangeChunkSize:f,length:Z,docBaseUrl:v,enableXfa:gt,evaluatorOptions:{maxImageSize:z,disableFontFace:J,ignoreErrors:k,isEvalSupported:F,isOffscreenCanvasSupported:W,isImageDecoderSupported:Y,canvasMaxAreaInBytes:it,fontExtraProperties:ht,useSystemFonts:at,useWasm:V,useWorkerFetch:ct,cMapUrl:E,iccUrl:R,standardFontDataUrl:M,wasmUrl:D}},ye={ownerDocument:mt,pdfBug:nt,styleElement:yt,loadingParams:{disableAutoFetch:X,enableXfa:gt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ys=m.messageHandler.sendWithPromise("GetDocRequest",Ke,a?[a.buffer]:null);let Gn;if(d)Gn=new jO(d,{disableRange:vt,disableStream:P});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const $o=mf(n)?YO:ji?iN:WO;Gn=new $o({url:n,length:Z,httpHeaders:l,withCredentials:u,rangeChunkSize:f,disableRange:vt,disableStream:P})}return ys.then($o=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const pd=new _f(e,$o,m.port),ma=new cN(pd,t,Gn,ye,bt,B);t._transport=ma,pd.send("Ready",null)})}).catch(t._capability.reject),t}var by;const vy=class vy{constructor(){et(this,"_capability",Promise.withResolvers());et(this,"_transport",null);et(this,"_worker",null);et(this,"docId",`d${Qe(vy,by)._++}`);et(this,"destroyed",!1);et(this,"onPassword",null);et(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};by=new WeakMap,w(vy,by,0);let ZA=vy;var ic,$g,Qg,Wg,Zg;class Sx{constructor(t,e,n=!1,a=null){w(this,ic,Promise.withResolvers());w(this,$g,[]);w(this,Qg,[]);w(this,Wg,[]);w(this,Zg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){o(this,Zg).push(t)}addProgressListener(t){o(this,Wg).push(t)}addProgressiveReadListener(t){o(this,Qg).push(t)}addProgressiveDoneListener(t){o(this,$g).push(t)}onDataRange(t,e){for(const n of o(this,Zg))n(t,e)}onDataProgress(t,e){o(this,ic).promise.then(()=>{for(const n of o(this,Wg))n(t,e)})}onDataProgressiveRead(t){o(this,ic).promise.then(()=>{for(const e of o(this,Qg))e(t)})}onDataProgressiveDone(){o(this,ic).promise.then(()=>{for(const t of o(this,$g))t()})}transportReady(){o(this,ic).resolve()}requestDataRange(t,e){fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}ic=new WeakMap,$g=new WeakMap,Qg=new WeakMap,Wg=new WeakMap,Zg=new WeakMap;class oN{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var sr,nc,Rf;class lN{constructor(t,e,n,a=!1){w(this,nc);w(this,sr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new BC:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new px,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:l=!1}={}){return new Fp({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:a="display",annotationMode:l=Jr.ENABLE,transform:u=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:b=null,isEditing:v=!1,recordOperations:E=!1,operationsFilter:T=null}){var Y,it,J;(Y=this._stats)==null||Y.time("Overall");const C=this._transport.getRenderingIntent(a,l,b,v),{renderingIntent:R,cacheKey:M}=C;A(this,sr,!1),d||(d=this._transport.getOptionalContentConfig(R));let O=this._intentStates.get(M);O||(O=Object.create(null),this._intentStates.set(M,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const D=!!(R&Un.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(C));const L=!!(this._pdfBug&&((J=globalThis.StepperManager)!=null&&J.enabled)),k=!this.recordedBBoxes&&(E||L),z=ht=>{var gt,mt;if(O.renderTasks.delete(F),k){const vt=(gt=F.gfx)==null?void 0:gt.dependencyTracker.take();vt&&(F.stepper&&F.stepper.setOperatorBBoxes(vt,F.gfx.dependencyTracker.takeDebugMetadata()),E&&(this.recordedBBoxes=vt))}D&&A(this,sr,!0),_(this,nc,Rf).call(this),ht?(F.capability.reject(ht),this._abortOperatorList({intentState:O,reason:ht instanceof Error?ht:new Error(ht)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(mt=globalThis.Stats)!=null&&mt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new JA({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:k?new TO(e,O.operatorList.length,L):null,viewport:n,transform:u,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!D,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:T});(O.renderTasks||(O.renderTasks=new Set)).add(F);const W=F.task;return Promise.all([O.displayReadyCapability.promise,d]).then(([ht,gt])=>{var mt;if(this.destroyed){z();return}if((mt=this._stats)==null||mt.time("Rendering"),!(gt.renderingIntent&R))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:ht,optionalContentConfig:gt}),F.operatorListChanged()}).catch(z),W}getOperatorList({intent:t="display",annotationMode:e=Jr.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var f;function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(t,e,n,a,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>jf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function l(){u.read().then(function({value:d,done:f}){if(f){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},a)}const u=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),A(this,sr,!1),Promise.all(t)}cleanup(t=!1){A(this,sr,!0);const e=_(this,nc,Rf).call(this);return t&&e&&this._stats&&(this._stats=new BC),e}_startRenderPage(t,e){var a,l;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&_(this,nc,Rf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:l,transfer:u}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},u).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:b,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),m())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();_(this,nc,Rf).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof GS){let a=rN;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Yo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}sr=new WeakMap,nc=new WeakSet,Rf=function(){if(!o(this,sr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,sr,!1),!0};var _o,Ms,ar,sc,Ay,ac,rc,qi,M0,Ex,wx,Df,Bh,R0;const Ee=class Ee{constructor({name:t=null,port:e=null,verbosity:n=HD()}={}){w(this,qi);w(this,_o,Promise.withResolvers());w(this,Ms,null);w(this,ar,null);w(this,sc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(o(Ee,rc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");o(Ee,rc).set(e,this),_(this,qi,Ex).call(this,e)}else _(this,qi,wx).call(this)}get promise(){return o(this,_o).promise}get port(){return o(this,ar)}get messageHandler(){return o(this,Ms)}destroy(){var t,e;this.destroyed=!0,(t=o(this,sc))==null||t.terminate(),A(this,sc,null),o(Ee,rc).delete(o(this,ar)),A(this,ar,null),(e=o(this,Ms))==null||e.destroy(),A(this,Ms,null)}static create(t){const e=o(this,rc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ee(t)}static get workerSrc(){if(fa.workerSrc)return fa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Tt(this,"_setupFakeWorkerGlobal",(async()=>o(this,Bh,R0)?o(this,Bh,R0):(await import(this.workerSrc)).WorkerMessageHandler)())}};_o=new WeakMap,Ms=new WeakMap,ar=new WeakMap,sc=new WeakMap,Ay=new WeakMap,ac=new WeakMap,rc=new WeakMap,qi=new WeakSet,M0=function(){o(this,_o).resolve(),o(this,Ms).send("configure",{verbosity:this.verbosity})},Ex=function(t){A(this,ar,t),A(this,Ms,new _f("main","worker",t)),o(this,Ms).on("ready",()=>{}),_(this,qi,M0).call(this)},wx=function(){if(o(Ee,ac)||o(Ee,Bh,R0)){_(this,qi,Df).call(this);return}let{workerSrc:t}=Ee;try{Ee._isSameOrigin(window.location,t)||(t=Ee._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new _f("main","worker",e),a=()=>{l.abort(),n.destroy(),e.terminate(),this.destroyed?o(this,_o).reject(new Error("Worker was destroyed")):_(this,qi,Df).call(this)},l=new AbortController;e.addEventListener("error",()=>{o(this,sc)||a()},{signal:l.signal}),n.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}A(this,Ms,n),A(this,ar,e),A(this,sc,e),_(this,qi,M0).call(this)}),n.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{u()}catch{_(this,qi,Df).call(this)}});const u=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};u();return}catch{Dy("The worker has been disabled.")}_(this,qi,Df).call(this)},Df=function(){o(Ee,ac)||(Ct("Setting up fake worker."),A(Ee,ac,!0)),Ee._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){o(this,_o).reject(new Error("Worker was destroyed"));return}const e=new yO;A(this,ar,e);const n=`fake${Qe(Ee,Ay)._++}`,a=new _f(n+"_worker",n,e);t.setup(a,e),A(this,Ms,new _f(n,n+"_worker",e)),_(this,qi,M0).call(this)}).catch(t=>{o(this,_o).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Bh=new WeakSet,R0=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Ee,Bh),w(Ee,Ay,0),w(Ee,ac,!1),w(Ee,rc,new WeakMap),ji&&(A(Ee,ac,!0),fa.workerSrc||(fa.workerSrc="./pdf.worker.mjs")),Ee._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},Ee._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ee.fromPort=t=>{if(JD("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ee.create(t)};let qf=Ee;var rr,na,Ih,zh,or,oc,Of;class cN{constructor(t,e,n,a,l,u){w(this,oc);w(this,rr,new Map);w(this,na,new Map);w(this,Ih,new Map);w(this,zh,new Map);w(this,or,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new px,this.fontLoader=new uO({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=u,this.setupMessageHandler()}get annotationStorage(){return Tt(this,"annotationStorage",new VS)}getRenderingIntent(t,e=Jr.ENABLE,n=null,a=!1,l=!1){let u=Un.DISPLAY,h=BA;switch(t){case"any":u=Un.ANY;break;case"display":break;case"print":u=Un.PRINT;break;default:Ct(`getRenderingIntent - invalid intent: ${t}`)}const d=u&Un.PRINT&&n instanceof JT?n:this.annotationStorage;switch(e){case Jr.DISABLE:u+=Un.ANNOTATIONS_DISABLE;break;case Jr.ENABLE:break;case Jr.ENABLE_FORMS:u+=Un.ANNOTATIONS_FORMS;break;case Jr.ENABLE_STORAGE:u+=Un.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Ct(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(u+=Un.IS_EDITING),l&&(u+=Un.OPLIST);const{ids:f,hash:m}=d.modifiedIds,b=[u,h.hash,m];return{renderingIntent:u,cacheKey:b.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=o(this,or))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of o(this,na).values())t.push(a._destroy());o(this,na).clear(),o(this,Ih).clear(),o(this,zh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,l;this.commonObjs.clear(),this.fontLoader.clear(),o(this,rr).clear(),this.filterFactory.destroy(),Gf.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Yo("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{jt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){a.close();return}jt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:u}=this._fullReader;return(!a||!l)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:u}}),t.on("GetRangeReader",(n,a)=>{jt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:u,done:h}){if(h){a.close();return}jt(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{a.error(u)})},a.onCancel=u=>{l.cancel(u),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new oN(n,this))}),t.on("DocException",n=>{e._capability.reject(Ji(n))}),t.on("PasswordRequest",n=>{A(this,or,Promise.withResolvers());try{if(!e.onPassword)throw Ji(n);const a=l=>{l instanceof Error?o(this,or).reject(l):o(this,or).resolve({password:l})};e.onPassword(a,n.code)}catch(a){o(this,or).reject(a)}return o(this,or).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;o(this,na).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,l])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in l){const v=l.error;Ct(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const h=new IA(l),d=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(v,E)=>globalThis.FontInspector.fontAdded(v,E):null,f=new hO(h,d,l.extra,l.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:m}=l;jt(m,"The imageRef must be defined.");for(const v of o(this,na).values())for(const[,E]of v.objs)if((E==null?void 0:E.ref)===m)return E.dataLen?(this.commonObjs.resolve(n,structuredClone(E)),E.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new dO(l));break;case"Image":this.commonObjs.resolve(n,l);break;case"Pattern":const b=new zA(l);this.commonObjs.resolve(n,b.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,l,u])=>{var d;if(this.destroyed)return;const h=o(this,na).get(a);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=u==null?void 0:u.bitmap)==null||d.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=o(this,Ih).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&o(this,zh).set(l.refStr,t);const u=new lN(e,l,this,this._params.pdfBug);return o(this,na).set(e,u),u});return o(this,Ih).set(e,a),a}getPageIndex(t){return FA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return _(this,oc,Of).call(this,"GetFieldObjects")}hasJSActions(){return _(this,oc,Of).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return _(this,oc,Of).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return _(this,oc,Of).call(this,"GetOptionalContentConfig").then(e=>new HO(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,rr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var l,u;return{info:a[0],metadata:a[1]?new UO(a[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null,hasStructTree:a[2]}});return o(this,rr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,na).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,rr).clear(),this.filterFactory.destroy(!0),Gf.cleanup()}}cachedPageNumber(t){if(!FA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,zh).get(e)??null}}rr=new WeakMap,na=new WeakMap,Ih=new WeakMap,zh=new WeakMap,or=new WeakMap,oc=new WeakSet,Of=function(t,e=null){const n=o(this,rr).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return o(this,rr).set(t,a),a};var Co;class uN{constructor(t){w(this,Co,null);et(this,"onContinue",null);et(this,"onError",null);A(this,Co,t)}get promise(){return o(this,Co).capability.promise}cancel(t=0){o(this,Co).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,Co).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,Co);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Co=new WeakMap;var To,lc;const vl=class vl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:l,operatorList:u,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:b=!1,pageColors:v=null,enableHWA:E=!1,operationsFilter:T=null}){w(this,To,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=E,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=T}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(o(vl,lc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(vl,lc).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:a,background:l,dependencyTracker:u}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ju(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,u),this.gfx.beginDrawing({transform:a,viewport:n,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,a,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(this,To)&&(window.cancelAnimationFrame(o(this,To)),A(this,To,null)),o(vl,lc).delete(this._canvas),t||(t=new GS(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(a=this.task).onError)==null||l.call(a,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,To,window.requestAnimationFrame(()=>{A(this,To,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(vl,lc).delete(this._canvas),this.callback())))}};To=new WeakMap,lc=new WeakMap,w(vl,lc,new WeakSet);let JA=vl;const _x="5.4.530",hN="50cc4adac";var Tn,cc,Fh,ti,Jg,Uh,lr,tp,xo,Rs,ep,le,tS,eS,iS,pl,Cx,Wr;const tn=class tn{constructor({editor:t=null,uiManager:e=null}){w(this,le);w(this,Tn,null);w(this,cc,null);w(this,Fh);w(this,ti,null);w(this,Jg,!1);w(this,Uh,!1);w(this,lr,null);w(this,tp);w(this,xo,null);w(this,Rs,null);var n,a;t?(A(this,Uh,!1),A(this,lr,t)):A(this,Uh,!0),A(this,Rs,(t==null?void 0:t._uiManager)||e),A(this,tp,o(this,Rs)._eventBus),A(this,Fh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((a=o(this,Rs))==null?void 0:a.highlightColors.values().next().value)||"#FFFF98"),o(tn,ep)||A(tn,ep,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Tt(this,"_keyboardManager",new Pp([[["Escape","mac+Escape"],tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tn.prototype._moveToPrevious],[["Home","mac+Home"],tn.prototype._moveToBeginning],[["End","mac+End"],tn.prototype._moveToEnd]]))}renderButton(){const t=A(this,Tn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",o(this,lr)&&(t.ariaControls=`${o(this,lr).id}_colorpicker_dropdown`);const e=o(this,Rs)._signal;t.addEventListener("click",_(this,le,pl).bind(this),{signal:e}),t.addEventListener("keydown",_(this,le,iS).bind(this),{signal:e});const n=A(this,cc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=o(this,Fh),t.append(n),t}renderMainDropdown(){const t=A(this,ti,_(this,le,tS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===o(this,Tn)){_(this,le,pl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&_(this,le,eS).call(this,e,t)}_moveToNext(t){var e,n;if(!o(this,le,Wr)){_(this,le,pl).call(this,t);return}if(t.target===o(this,Tn)){(e=o(this,ti).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=o(this,ti))==null?void 0:e.firstElementChild)||t.target===o(this,Tn)){o(this,le,Wr)&&this._hideDropdownFromKeyboard();return}o(this,le,Wr)||_(this,le,pl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!o(this,le,Wr)){_(this,le,pl).call(this,t);return}(e=o(this,ti).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,le,Wr)){_(this,le,pl).call(this,t);return}(e=o(this,ti).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,ti))==null||t.classList.add("hidden"),o(this,Tn).ariaExpanded="false",(e=o(this,xo))==null||e.abort(),A(this,xo,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,Uh)){if(!o(this,le,Wr)){(t=o(this,lr))==null||t.unselect();return}this.hideDropdown(),o(this,Tn).focus({preventScroll:!0,focusVisible:o(this,Jg)})}}updateColor(t){if(o(this,cc)&&(o(this,cc).style.backgroundColor=t),!o(this,ti))return;const e=o(this,Rs).highlightColors.values();for(const n of o(this,ti).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=o(this,Tn))==null||t.remove(),A(this,Tn,null),A(this,cc,null),(e=o(this,ti))==null||e.remove(),A(this,ti,null)}};Tn=new WeakMap,cc=new WeakMap,Fh=new WeakMap,ti=new WeakMap,Jg=new WeakMap,Uh=new WeakMap,lr=new WeakMap,tp=new WeakMap,xo=new WeakMap,Rs=new WeakMap,ep=new WeakMap,le=new WeakSet,tS=function(){const t=document.createElement("div"),e=o(this,Rs)._signal;t.addEventListener("contextmenu",ms,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),o(this,lr)&&(t.id=`${o(this,lr).id}_colorpicker_dropdown`);for(const[n,a]of o(this,Rs).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=n,l.setAttribute("data-l10n-id",o(tn,ep)[n]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=a,l.ariaSelected=a===o(this,Fh),l.addEventListener("click",_(this,le,eS).bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",_(this,le,iS).bind(this),{signal:e}),t},eS=function(t,e){e.stopPropagation(),o(this,tp).dispatch("switchannotationeditorparams",{source:this,type:Ht.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},iS=function(t){tn._keyboardManager.exec(this,t)},pl=function(t){if(o(this,le,Wr)){this.hideDropdown();return}if(A(this,Jg,t.detail===0),o(this,xo)||(A(this,xo,new AbortController),window.addEventListener("pointerdown",_(this,le,Cx).bind(this),{signal:o(this,Rs).combinedSignal(o(this,xo))})),o(this,Tn).ariaExpanded="true",o(this,ti)){o(this,ti).classList.remove("hidden");return}const e=A(this,ti,_(this,le,tS).call(this));o(this,Tn).append(e)},Cx=function(t){var e;(e=o(this,ti))!=null&&e.contains(t.target)||this.hideDropdown()},Wr=function(){return o(this,ti)&&!o(this,ti).classList.contains("hidden")},w(tn,ep,null);let ny=tn;var sa,ip,Ph,np;const Al=class Al{constructor(t){w(this,sa,null);w(this,ip,null);w(this,Ph,null);A(this,ip,t),A(this,Ph,t._uiManager),o(Al,np)||A(Al,np,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(o(this,sa))return o(this,sa);const{editorType:t,colorType:e,color:n}=o(this,ip),a=A(this,sa,document.createElement("input"));return a.type="color",a.value=n||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",o(Al,np)[t]),a.addEventListener("input",()=>{o(this,Ph).updateParams(e,a.value)},{signal:o(this,Ph)._signal}),a}update(t){o(this,sa)&&(o(this,sa).value=t)}destroy(){var t;(t=o(this,sa))==null||t.remove(),A(this,sa,null)}hideDropdown(){}};sa=new WeakMap,ip=new WeakMap,Ph=new WeakMap,np=new WeakMap,w(Al,np,null);let sy=Al;function nT(p){return Math.floor(Math.max(0,Math.min(1,p))*255).toString(16).padStart(2,"0")}function gf(p){return Math.max(0,Math.min(255,255*p))}class sT{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=gf(t),[t,t,t]}static G_HTML([t]){const e=nT(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(gf)}static RGB_HTML(t){return`#${t.map(nT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[gf(1-Math.min(1,t+a)),gf(1-Math.min(1,n+a)),gf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,l=1-e,u=1-n,h=Math.min(a,l,u);return["CMYK",a,l,u,h]}}class dN{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){fe("Abstract method `_createSVG` called.")}}class ay extends dN{_createSVG(t){return document.createElementNS(Ba,t)}}const fN=9,Uc=new WeakSet,gN=new Date().getTimezoneOffset()*60*1e3;class dA{static create(t){switch(t.data.annotationType){case Ve.LINK:return new KS(t);case Ve.TEXT:return new mN(t);case Ve.WIDGET:switch(t.data.fieldType){case"Tx":return new yN(t);case"Btn":return t.data.radioButton?new Mx(t):t.data.checkBox?new vN(t):new AN(t);case"Ch":return new SN(t);case"Sig":return new bN(t)}return new Hc(t);case Ve.POPUP:return new sS(t);case Ve.FREETEXT:return new Lx(t);case Ve.LINE:return new wN(t);case Ve.SQUARE:return new _N(t);case Ve.CIRCLE:return new CN(t);case Ve.POLYLINE:return new kx(t);case Ve.CARET:return new xN(t);case Ve.INK:return new $S(t);case Ve.POLYGON:return new TN(t);case Ve.HIGHLIGHT:return new Bx(t);case Ve.UNDERLINE:return new MN(t);case Ve.SQUIGGLY:return new RN(t);case Ve.STRIKEOUT:return new DN(t);case Ve.STAMP:return new Ix(t);case Ve.FILEATTACHMENT:return new ON(t);default:return new xe(t)}}}var uc,Hh,hs,sp,nS;const i1=class i1{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){w(this,sp);w(this,uc,null);w(this,Hh,!1);w(this,hs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:a}=this.data;let l=-1/0,u=-1/0;if((e==null?void 0:e.length)>=8){for(let d=0;d<e.length;d+=8)e[d+1]>u?(u=e[d+1],l=e[d+2]):e[d+1]===u&&(l=Math.max(l,e[d+2]));return[l,u]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let f=0,m=d.length;f<m;f+=2)d[f+1]>u?(u=d[f+1],l=d[f]):d[f+1]===u&&(l=Math.max(l,d[f]));if(l!==1/0)return[l,u]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:l,pageY:u}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/n,t[1]=100*(t[1]-u)/a,t}get commentText(){var e,n,a;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Pf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((a=t.contentsObj)==null?void 0:a.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Pf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=o(this,hs))==null?void 0:t.popup)||this.popup)==null||e.remove(),A(this,hs,this.popup=null)}updateEdited(t){var l;if(!this.container)return;t.rect&&(o(this,uc)||A(this,uc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&_(this,sp,nS).call(this,e);let a=((l=o(this,hs))==null?void 0:l.popup)||this.popup;!a&&(n!=null&&n.text)&&(this._createPopup(n),a=o(this,hs).popup),a&&(a.updateEdited(t),n!=null&&n.deleted&&(a.remove(),A(this,hs,null),this.popup=null))}resetEdited(){var t;o(this,uc)&&(_(this,sp,nS).call(this,o(this,uc).rect),(t=o(this,hs))==null||t.popup.resetEdited(),A(this,uc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof Hc)&&!(this instanceof KS)&&(l.tabIndex=0);const{style:u}=l;if(u.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof sS){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,R=e.borderStyle.verticalCornerRadius;if(C>0||R>0){const O=`calc(${C}px * var(--total-scale-factor)) / calc(${R}px * var(--total-scale-factor))`;u.borderRadius=O}else if(this instanceof Mx){const O=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;u.borderRadius=O}switch(e.borderStyle.style){case Mu.SOLID:u.borderStyle="solid";break;case Mu.DASHED:u.borderStyle="dashed";break;case Mu.BEVELED:Ct("Unimplemented border style: beveled");break;case Mu.INSET:Ct("Unimplemented border style: inset");break;case Mu.UNDERLINE:u.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(A(this,Hh,!0),u.borderColor=rt.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):u.borderWidth=0}const f=rt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:b,pageX:v,pageY:E}=a.rawDims;u.left=`${100*(f[0]-v)/m}%`,u.top=`${100*(f[1]-E)/b}%`;const{rotation:T}=e;return e.hasOwnCanvas||T===0?(u.width=`${100*h/m}%`,u.height=`${100*d/b}%`):this.setRotation(T,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:u}=this;t%180!==0&&([l,u]=[u,l]),e.style.width=`${100*l/n}%`,e.style.height=`${100*u/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const l=a.detail[e],u=l[0],h=l.slice(1);a.target.style[n]=sT[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:sT[`${u}_rgb`](h)})};return Tt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const l=t[a]||n[a];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,l]of Object.entries(e)){const u=n[a];if(u){const h={detail:{[a]:l},target:t};u(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,l]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,R,M,O]=t.subarray(2,6);if(a===C&&l===R&&e===M&&n===O)return}const{style:u}=this.container;let h;if(o(this,Hh)){const{borderColor:C,borderWidth:R}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-n,{svgFactory:m}=this,b=m.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const v=m.createElement("defs");b.append(v);const E=m.createElement("clipPath"),T=`clippath_${this.data.id}`;E.setAttribute("id",T),E.setAttribute("clipPathUnits","objectBoundingBox"),v.append(E);for(let C=2,R=t.length;C<R;C+=8){const M=t[C],O=t[C+1],D=t[C+2],L=t[C+3],k=m.createElement("rect"),z=(D-e)/d,F=(l-O)/f,W=(M-D)/d,Y=(O-L)/f;k.setAttribute("x",z),k.setAttribute("y",F),k.setAttribute("width",W),k.setAttribute("height",Y),E.append(k),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${F}" width="${W}" height="${Y}"/>`)}o(this,Hh)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(b),this.container.style.clipPath=`url(#${T})`}_createPopup(t=null){const{data:e}=this;let n,a;t?(n={str:t.text},a=t.date):(n=e.contentsObj,a=e.modificationDate),A(this,hs,new sS({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(o(this,hs)||this.popup||this.data.popupRef)}get extraPopupElement(){return o(this,hs)}render(){fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:u,exportValues:h}of a){if(l===-1||u===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${u}"]`);if(f&&!Uc.has(f)){Ct(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:d,domElement:f})}return n}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,u=a.getAttribute("data-element-id");u!==e&&Uc.has(a)&&n.push({id:u,exportValue:l,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};uc=new WeakMap,Hh=new WeakMap,hs=new WeakMap,sp=new WeakSet,nS=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(u-t[3]+d)/u}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(a)};let xe=i1;class pN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Hn,ml,Tx,xx;class KS extends xe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});w(this,Hn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let l=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(a,e.action,e.overlaidText),l=!0):e.attachment?(_(this,Hn,Tx).call(this,a,e.attachment,e.overlaidText,e.attachmentDest),l=!0):e.setOCGState?(_(this,Hn,xx).call(this,a,e.setOCGState,e.overlaidText),l=!0):e.dest?(this._bindLink(a,e.dest,e.overlaidText),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),l=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(a,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&(this.contentElement=a,this.container.append(a)),this.container}_bindLink(e,n,a=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&_(this,Hn,ml).call(this),a&&(e.title=a)}_bindNamedAction(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),a&&(e.title=a),_(this,Hn,ml).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const u=a.get(l);u&&(e[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),_(this,Hn,ml).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),_(this,Hn,ml).call(this),!this._fieldObjects){Ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var b;a==null||a();const{fields:l,refs:u,include:h}=n,d=[];if(l.length!==0||u.length!==0){const v=new Set(u);for(const E of l){const T=this._fieldObjects[E]||[];for(const{id:C}of T)v.add(C)}for(const E of Object.values(this._fieldObjects))for(const T of E)v.has(T.id)===h&&d.push(T)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,m=[];for(const v of d){const{id:E}=v;switch(m.push(E),v.type){case"text":{const C=v.defaultValue||"";f.setValue(E,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;f.setValue(E,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";f.setValue(E,{value:C});break}default:continue}const T=document.querySelector(`[data-element-id="${E}"]`);if(T){if(!Uc.has(T)){Ct(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;T.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Hn=new WeakSet,ml=function(){this.container.setAttribute("data-internal-link","")},Tx=function(e,n,a="",l=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:a&&(e.title=a),e.onclick=()=>{var u;return(u=this.downloadManager)==null||u.openOrDownloadData(n.content,n.filename,l),!1},_(this,Hn,ml).call(this)},xx=function(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),a&&(e.title=a),_(this,Hn,ml).call(this)};class mN extends xe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Hc extends xe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ii.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,l){n.includes("mouse")?t.addEventListener(n,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{var h;if(n==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}l&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(u)}}))})}_setEventListeners(t,e,n,a){var l,u,h;for(const[d,f]of n)(f==="Action"||(l=this.data.actions)!=null&&l[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,a),f==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":rt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||fN,l=t.style;let u;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(f/(sA*a))||1,b=f/m;u=Math.min(a,d(b/sA))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(a,d(f/sA))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=rt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class yN extends Hc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const l=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=n),l.setValue(u.id,{[a]:n})}render(){var a,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let h=u.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let f=u.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Uc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:b,datetimeType:v,timeStep:E}=this.data,T=!!v&&this.enableScripting;b&&(n.title=b),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",R=>{t.setValue(e,{value:R.target.value}),this.setPropertyOnSiblings(n,"value",R.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",R=>{const M=this.data.defaultFieldValue??"";n.value=m.userValue=M,m.formattedValue=null});let C=R=>{const{formattedValue:M}=m;M!=null&&(R.target.value=M),R.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",M=>{var D;if(m.focused)return;const{target:O}=M;if(T&&(O.type=v,E&&(O.step=E)),m.userValue){const L=m.userValue;if(T)if(v==="time"){const k=new Date(L),z=[k.getHours(),k.getMinutes(),k.getSeconds()];O.value=z.map(F=>F.toString().padStart(2,"0")).join(":")}else O.value=new Date(L-gN).toISOString().split(v==="date"?"T":".",1)[0];else O.value=L}m.lastCommittedValue=O.value,m.commitKey=1,(D=this.data.actions)!=null&&D.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",M=>{this.showElementAndHideCanvas(M.target);const O={value(D){m.userValue=D.detail.value??"",T||t.setValue(e,{value:m.userValue.toString()}),D.target.value=m.userValue},formattedValue(D){const{formattedValue:L}=D.detail;m.formattedValue=L,L!=null&&D.target!==document.activeElement&&(D.target.value=L);const k={formattedValue:L};T&&(k.value=L),t.setValue(e,k)},selRange(D){D.target.setSelectionRange(...D.detail.selRange)},charLimit:D=>{var F;const{charLimit:L}=D.detail,{target:k}=D;if(L===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",L);let z=m.userValue;!z||z.length<=L||(z=z.slice(0,L),k.value=m.userValue=z,t.setValue(e,{value:z}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:z,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(O,M)}),n.addEventListener("keydown",M=>{var L;m.commitKey=1;let O=-1;if(M.key==="Escape"?O=0:M.key==="Enter"&&!this.data.multiLine?O=2:M.key==="Tab"&&(m.commitKey=3),O===-1)return;const{value:D}=M.target;m.lastCommittedValue!==D&&(m.lastCommittedValue=D,m.userValue=D,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:O,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}}))});const R=C;C=null,n.addEventListener("blur",M=>{var L,k;if(!m.focused||!M.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(m.focused=!1);const{target:O}=M;let{value:D}=O;if(T){if(D&&v==="time"){const z=D.split(":").map(F=>parseInt(F,10));D=new Date(2e3,0,1,z[0],z[1],z[2]||0).valueOf(),O.step=""}else D.includes("T")||(D=`${D}T00:00`),D=new Date(D).valueOf();O.type="text"}m.userValue=D,m.lastCommittedValue!==D&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:m.commitKey,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}})),R(M)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",M=>{var Y;m.lastCommittedValue=null;const{data:O,target:D}=M,{value:L,selectionStart:k,selectionEnd:z}=D;let F=k,W=z;switch(M.inputType){case"deleteWordBackward":{const it=L.substring(0,k).match(/\w*[^\w]*$/);it&&(F-=it[0].length);break}case"deleteWordForward":{const it=L.substring(k).match(/^[^\w]*\w*/);it&&(W+=it[0].length);break}case"deleteContentBackward":k===z&&(F-=1);break;case"deleteContentForward":k===z&&(W+=1);break}M.preventDefault(),(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,change:O||"",willCommit:!1,selStart:F,selEnd:W}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const M=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${M}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class bN extends Hc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class vN extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Uc.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const f of this._getElementsByName(h,n)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:d})}),l.addEventListener("resetform",u=>{const h=e.defaultFieldValue||"Off";u.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class Mx extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const u of this._getElementsByName(e.fieldName,n))t.setValue(u.id,{value:!1});const l=document.createElement("input");if(Uc.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const f of this._getElementsByName(h,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),l.addEventListener("resetform",u=>{const h=e.defaultFieldValue;u.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const m=u===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const v=m&&b.id===n;b.domElement&&(b.domElement.checked=v),t.setValue(b.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class AN extends KS{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class SN extends Hc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Uc.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===b});for(const m of this.data.options){const b=document.createElement("option");b.textContent=m.displayValue,b.value=m.exportValue,n.value.includes(m.exportValue)&&(b.setAttribute("selected",!0),l=!1),a.append(b)}let u=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),u=()=>{m.remove(),a.removeEventListener("input",u),u=null},a.addEventListener("input",u)}const h=m=>{const b=m?"value":"textContent",{options:v,multiple:E}=a;return E?Array.prototype.filter.call(v,T=>T.selected).map(T=>T[b]):v.selectedIndex===-1?null:v[v.selectedIndex][b]};let d=h(!1);const f=m=>{const b=m.target.options;return Array.prototype.map.call(b,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const b={value(v){u==null||u();const E=v.detail.value,T=new Set(Array.isArray(E)?E:[E]);for(const C of a.options)C.selected=T.has(C.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const E=a.options,T=v.detail.remove;E[T].selected=!1,a.remove(T),E.length>0&&Array.prototype.findIndex.call(E,R=>R.selected)===-1&&(E[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:E,displayValue:T,exportValue:C}=v.detail.insert,R=a.children[E],M=document.createElement("option");M.textContent=T,M.value=C,R?R.before(M):a.append(M),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},items(v){const{items:E}=v.detail;for(;a.length!==0;)a.remove(0);for(const T of E){const{displayValue:C,exportValue:R}=T,M=document.createElement("option");M.textContent=C,M.value=R,a.append(M)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},indices(v){const E=new Set(v.detail.indices);for(const T of v.target.options)T.selected=E.has(T.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(b,m)}),a.addEventListener("input",m=>{var E;const b=h(!0),v=h(!1);t.setValue(e,{value:b}),m.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}var ap,aS;class sS extends xe{constructor(e){const{data:n,elements:a,parent:l}=e,u=!!l._commentManager;super(e,{isRenderable:!u&&xe._hasPopupData(n)});w(this,ap);if(this.elements=a,u&&xe._hasPopupData(n)){const h=this.popup=_(this,ap,aS).call(this);for(const d of a)d.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=_(this,ap,aS).call(this),a=[];for(const l of this.elements)l.popup=n,l.container.ariaHasPopup="dialog",a.push(l.data.id),l.addHighlightArea();return this.container.setAttribute("aria-controls",a.map(l=>`${Iu}${l}`).join(",")),this.container}}ap=new WeakSet,aS=function(){return new EN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var xn,Mo,Sy,Ey,jh,Gh,Ne,aa,Ro,hc,qh,Vh,ra,Mn,cr,ur,Le,hr,Do,rp,dr,Yh,dc,Oo,oi,No,Lt,D0,rS,oS,lS,O0,cS,Rx,Dx,Ox,Nx,N0,L0,uS;class EN{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:l,contentsObj:u,richText:h,parent:d,rect:f,parentRect:m,open:b,commentManager:v=null}){w(this,Lt);w(this,xn,null);w(this,Mo,_(this,Lt,Ox).bind(this));w(this,Sy,_(this,Lt,uS).bind(this));w(this,Ey,_(this,Lt,L0).bind(this));w(this,jh,_(this,Lt,N0).bind(this));w(this,Gh,null);w(this,Ne,null);w(this,aa,null);w(this,Ro,null);w(this,hc,null);w(this,qh,null);w(this,Vh,null);w(this,ra,!1);w(this,Mn,null);w(this,cr,null);w(this,ur,null);w(this,Le,null);w(this,hr,null);w(this,Do,null);w(this,rp,null);w(this,dr,null);w(this,Yh,null);w(this,dc,null);w(this,Oo,!1);w(this,oi,null);w(this,No,null);A(this,Ne,t),A(this,Yh,a),A(this,aa,u),A(this,dr,h),A(this,qh,d),A(this,Gh,e),A(this,rp,f),A(this,Vh,m),A(this,hc,n),A(this,xn,v),A(this,oi,n[0]),A(this,Ro,W0.toDateObject(l)),this.trigger=n.flatMap(E=>E.getElementsToTriggerPopup()),v||(_(this,Lt,D0).call(this),o(this,Ne).hidden=!0,b&&_(this,Lt,N0).call(this))}renderCommentButton(){if(o(this,Le)){o(this,Le).parentNode||o(this,oi).container.after(o(this,Le));return}if(o(this,hr)||_(this,Lt,rS).call(this),!o(this,hr))return;const{signal:t}=A(this,cr,new AbortController),e=o(this,oi).hasOwnCommentButton,n=()=>{o(this,xn).toggleCommentPopup(this,!0,void 0,!e)},a=()=>{o(this,xn).toggleCommentPopup(this,!1,!0,!e)},l=()=>{o(this,xn).toggleCommentPopup(this,!1,!1)};if(e){A(this,Le,o(this,oi).container);for(const u of this.trigger)u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.addEventListener("keydown",o(this,Mo),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",a,{signal:t}),u.addEventListener("pointerleave",l,{signal:t}),u.classList.add("popupTriggerArea")}else{const u=A(this,Le,document.createElement("button"));u.className="annotationCommentButton";const h=o(this,oi).container;u.style.zIndex=h.style.zIndex+1,u.tabIndex=0,u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.setAttribute("data-l10n-id","pdfjs-show-comment-button"),_(this,Lt,lS).call(this),_(this,Lt,oS).call(this),u.addEventListener("keydown",o(this,Mo),{signal:t}),u.addEventListener("click",n,{signal:t}),u.addEventListener("pointerenter",a,{signal:t}),u.addEventListener("pointerleave",l,{signal:t}),h.after(u)}}get commentButtonColor(){const{color:t,opacity:e}=o(this,oi).commentData;return t?o(this,qh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=o(this,Le))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:a,modificationDate:l}=o(this,oi).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:a,modificationDate:l}}get elementBeforePopup(){return o(this,Le)}get comment(){return o(this,No)||A(this,No,o(this,oi).commentText),o(this,No)}set comment(t){t!==this.comment&&(o(this,oi).commentText=A(this,No,t))}focus(){var t;(t=o(this,oi).container)==null||t.focus()}get parentBoundingClientRect(){return o(this,oi).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){o(this,Le)&&(o(this,Le).classList.toggle("selected",t),o(this,Le).ariaExpanded=e)}setSelectedCommentButton(t){o(this,Le).classList.toggle("selected",t)}get commentPopupPosition(){if(o(this,Do))return o(this,Do);const{x:t,y:e,height:n}=o(this,Le).getBoundingClientRect(),{x:a,y:l,width:u,height:h}=o(this,oi).layer.getBoundingClientRect();return[(t-a)/u,(e+n-l)/h]}set commentPopupPosition(t){A(this,Do,t)}hasDefaultPopupPosition(){return o(this,Do)===null}get commentButtonPosition(){return o(this,hr)}get commentButtonWidth(){return o(this,Le).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=o(this,Do)||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:l,y:u,width:h,height:d}=a;o(this,xn).showDialog(null,this,l+e*h,u+n*d,{...t,parentDimensions:a})}render(){var n,a;if(o(this,Mn))return;const t=A(this,Mn,document.createElement("div"));if(t.className="popup",o(this,Gh)){const l=t.style.outlineColor=rt.makeHexColor(...o(this,Gh));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=o(this,Yh))!=null&&n.str){const l=document.createElement("span");l.className="title",e.append(l),{dir:l.dir,str:l.textContent}=o(this,Yh)}if(t.append(e),o(this,Ro)){const l=document.createElement("time");l.className="popupDate",l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Ro).valueOf()})),l.dateTime=o(this,Ro).toISOString(),e.append(l)}bT({html:o(this,Lt,O0)||o(this,aa).str,dir:(a=o(this,aa))==null?void 0:a.dir,className:"popupContent"},t),o(this,Ne).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var a;if(o(this,xn)){n?(this.remove(),A(this,No,null)):e&&(e.deleted?this.remove():(_(this,Lt,lS).call(this),A(this,No,e.text))),t&&(A(this,hr,null),_(this,Lt,rS).call(this),_(this,Lt,oS).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}_(this,Lt,D0).call(this),o(this,dc)||A(this,dc,{contentsObj:o(this,aa),richText:o(this,dr)}),t&&A(this,ur,null),e&&e.text&&(A(this,dr,_(this,Lt,Dx).call(this,e.text)),A(this,Ro,W0.toDateObject(e.date)),A(this,aa,null)),(a=o(this,Mn))==null||a.remove(),A(this,Mn,null)}resetEdited(){var t;o(this,dc)&&({contentsObj:Qe(this,aa)._,richText:Qe(this,dr)._}=o(this,dc),A(this,dc,null),(t=o(this,Mn))==null||t.remove(),A(this,Mn,null),A(this,ur,null))}remove(){var t,e,n;if((t=o(this,cr))==null||t.abort(),A(this,cr,null),(e=o(this,Mn))==null||e.remove(),A(this,Mn,null),A(this,Oo,!1),A(this,ra,!1),(n=o(this,Le))==null||n.remove(),A(this,Le,null),this.trigger)for(const a of this.trigger)a.classList.remove("popupTriggerArea")}forceHide(){A(this,Oo,this.isVisible),o(this,Oo)&&(o(this,Ne).hidden=!0)}maybeShow(){o(this,xn)||(_(this,Lt,D0).call(this),o(this,Oo)&&(o(this,Mn)||_(this,Lt,L0).call(this),A(this,Oo,!1),o(this,Ne).hidden=!1))}get isVisible(){return o(this,xn)?!1:o(this,Ne).hidden===!1}}xn=new WeakMap,Mo=new WeakMap,Sy=new WeakMap,Ey=new WeakMap,jh=new WeakMap,Gh=new WeakMap,Ne=new WeakMap,aa=new WeakMap,Ro=new WeakMap,hc=new WeakMap,qh=new WeakMap,Vh=new WeakMap,ra=new WeakMap,Mn=new WeakMap,cr=new WeakMap,ur=new WeakMap,Le=new WeakMap,hr=new WeakMap,Do=new WeakMap,rp=new WeakMap,dr=new WeakMap,Yh=new WeakMap,dc=new WeakMap,Oo=new WeakMap,oi=new WeakMap,No=new WeakMap,Lt=new WeakSet,D0=function(){var e;if(o(this,cr))return;A(this,cr,new AbortController);const{signal:t}=o(this,cr);for(const n of this.trigger)n.addEventListener("click",o(this,jh),{signal:t}),n.addEventListener("pointerenter",o(this,Ey),{signal:t}),n.addEventListener("pointerleave",o(this,Sy),{signal:t}),n.classList.add("popupTriggerArea");for(const n of o(this,hc))(e=n.container)==null||e.addEventListener("keydown",o(this,Mo),{signal:t})},rS=function(){const t=o(this,hc).find(e=>e.hasCommentButton);t&&A(this,hr,t._normalizePoint(t.commentButtonPosition))},oS=function(){if(o(this,oi).extraPopupElement&&!o(this,oi).editor)return;o(this,Le)||this.renderCommentButton();const[t,e]=o(this,hr),{style:n}=o(this,Le);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},lS=function(){o(this,oi).extraPopupElement||(o(this,Le)||this.renderCommentButton(),o(this,Le).style.backgroundColor=this.commentButtonColor||"")},O0=function(){const t=o(this,dr),e=o(this,aa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,dr).html||null},cS=function(){var t,e,n;return((n=(e=(t=o(this,Lt,O0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},Rx=function(){var t,e,n;return((n=(e=(t=o(this,Lt,O0))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Dx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:o(this,Lt,Rx),fontSize:o(this,Lt,cS)?`calc(${o(this,Lt,cS)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return n},Ox=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,ra))&&_(this,Lt,N0).call(this)},Nx=function(){if(o(this,ur)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:l}}}=o(this,qh);let u=!!o(this,Vh),h=u?o(this,Vh):o(this,rp);for(const T of o(this,hc))if(!h||rt.intersect(T.data.rect,h)!==null){h=T.data.rect,u=!0;break}const d=rt.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=u?h[2]-h[0]+5:0,b=d[0]+m,v=d[1];A(this,ur,[100*(b-a)/e,100*(v-l)/n]);const{style:E}=o(this,Ne);E.left=`${o(this,ur)[0]}%`,E.top=`${o(this,ur)[1]}%`},N0=function(){if(o(this,xn)){o(this,xn).toggleCommentPopup(this,!1);return}A(this,ra,!o(this,ra)),o(this,ra)?(_(this,Lt,L0).call(this),o(this,Ne).addEventListener("click",o(this,jh)),o(this,Ne).addEventListener("keydown",o(this,Mo))):(_(this,Lt,uS).call(this),o(this,Ne).removeEventListener("click",o(this,jh)),o(this,Ne).removeEventListener("keydown",o(this,Mo)))},L0=function(){o(this,Mn)||this.render(),this.isVisible?o(this,ra)&&o(this,Ne).classList.add("focused"):(_(this,Lt,Nx).call(this),o(this,Ne).hidden=!1,o(this,Ne).style.zIndex=parseInt(o(this,Ne).style.zIndex)+1e3)},uS=function(){o(this,Ne).classList.remove("focused"),!(o(this,ra)||!this.isVisible)&&(o(this,Ne).hidden=!0,o(this,Ne).style.zIndex=parseInt(o(this,Ne).style.zIndex)-1e3)};class Lx extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var op;class wN extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,op,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),u=A(this,op,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,op)}addHighlightArea(){this.container.classList.add("highlightArea")}}op=new WeakMap;var lp;class _N extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,lp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),u=e.borderStyle.width,h=A(this,lp,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",n-u),h.setAttribute("height",a-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap;var cp;class CN extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,cp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),u=e.borderStyle.width,h=A(this,cp,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",a/2),h.setAttribute("rx",n/2-u/2),h.setAttribute("ry",a/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,cp)}addHighlightArea(){this.container.classList.add("highlightArea")}}cp=new WeakMap;var up;class kx extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,up,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:l},width:u,height:h}=this;if(!n)return this.container;const d=this.svgFactory.create(u,h,!0);let f=[];for(let b=0,v=n.length;b<v;b+=2){const E=n[b]-e[0],T=e[3]-n[b+1];f.push(`${E},${T}`)}f=f.join(" ");const m=A(this,up,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return o(this,up)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap;class TN extends kx{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class xN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var hp,fc,dp,hS;class $S extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,dp);w(this,hp,null);w(this,fc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Mt.HIGHLIGHT:Mt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:l,popupRef:u}}=this,{transform:h,width:d,height:f}=_(this,dp,hS).call(this,n,e),m=this.svgFactory.create(d,f,!0),b=A(this,hp,this.svgFactory.createElement("svg:g"));m.append(b),b.setAttribute("stroke-width",l.width||1),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-linejoin","round"),b.setAttribute("stroke-miterlimit",10),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),b.setAttribute("transform",h);for(let v=0,E=a.length;v<E;v++){const T=this.svgFactory.createElement(this.svgElementName);o(this,fc).push(T),T.setAttribute("points",a[v].join(",")),b.append(T)}return!u&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:l}=e,u=o(this,hp);if(n>=0&&u.setAttribute("stroke-width",n||1),a)for(let h=0,d=o(this,fc).length;h<d;h++)o(this,fc)[h].setAttribute("points",a[h].join(","));if(l){const{transform:h,width:d,height:f}=_(this,dp,hS).call(this,this.data.rotation,l);u.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return o(this,fc)}addHighlightArea(){this.container.classList.add("highlightArea")}}hp=new WeakMap,fc=new WeakMap,dp=new WeakSet,hS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Bx extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class MN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class RN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class DN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Ix extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var fp,gp,dS;class ON extends xe{constructor(e){var a;super(e,{isRenderable:!0});w(this,gp);w(this,fp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",_(this,gp,dS).bind(this)),A(this,fp,a);const{isMac:l}=ii.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(l?u.metaKey:u.ctrlKey)&&_(this,gp,dS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return o(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap,gp=new WeakSet,dS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var gc,pc,Xh,Lo,pp,mc,Rn,mp,Er,k0,gS;const n1=class n1{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:l,viewport:u,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:m}){w(this,Er);w(this,gc,null);w(this,pc,null);w(this,Xh,null);w(this,Lo,new Map);w(this,pp,null);w(this,mc,null);w(this,Rn,[]);w(this,mp,!1);this.div=t,A(this,gc,e),A(this,pc,n),A(this,pp,h||null),A(this,mc,f||null),A(this,Xh,m||new VS),this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return o(this,Lo).size>0}async render(t){var h;const{annotations:e}=t,n=this.div;zc(n,this.viewport);const a=new Map,l=[],u={data:null,layer:n,linkService:o(this,mc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ay,annotationStorage:o(this,Xh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===Ve.POPUP;if(f){const v=a.get(d.id);if(!v)continue;if(!this._commentManager){l.push(d);continue}u.elements=v}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;u.data=d;const m=dA.create(u);if(!m.isRenderable)continue;if(!f&&(o(this,Rn).push(m),d.popupRef)){const v=a.get(d.popupRef);v?v.push(m):a.set(d.popupRef,[m])}const b=m.render();d.hidden&&(b.style.visibility="hidden"),m._isEditable&&(o(this,Lo).set(m.data.id,m),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(m))}await _(this,Er,k0).call(this);for(const d of l){const f=u.elements=a.get(d.id);u.data=d;const m=dA.create(u);if(!m.isRenderable)continue;const b=m.render();m.contentElement.id=`${Iu}${d.id}`,d.hidden&&(b.style.visibility="hidden"),f.at(-1).container.after(b)}_(this,Er,gS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:o(this,mc),svgFactory:new ay,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=n1._defaultBorderStyle),e.data=n;const a=dA.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${Iu}${n.id}`,o(this,Rn).push(a))}await _(this,Er,k0).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,zc(e,{rotation:t.rotation}),_(this,Er,gS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Lo).values())}getEditableAnnotation(t){return o(this,Lo).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:a}=t,l=new pN({data:{id:n,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:o(this,mc),annotationStorage:o(this,Xh)});return l.render(),l.contentElement.id=`${Iu}${n}`,l.createOrUpdatePopup(),o(this,Rn).push(l),l}removeAnnotation(t){var a;const e=o(this,Rn).findIndex(l=>l.data.id===t);if(e<0)return;const[n]=o(this,Rn).splice(e,1);(a=o(this,gc))==null||a.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);_(this,Er,k0).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Mu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};gc=new WeakMap,pc=new WeakMap,Xh=new WeakMap,Lo=new WeakMap,pp=new WeakMap,mc=new WeakMap,Rn=new WeakMap,mp=new WeakMap,Er=new WeakSet,k0=async function(){var n,a,l;if(o(this,Rn).length===0)return;this.div.replaceChildren();const t=[];if(!o(this,mp)){A(this,mp,!0);for(const{contentElement:u,data:{id:h}}of o(this,Rn)){const d=u.id=`${Iu}${h}`;t.push((n=o(this,pp))==null?void 0:n.getAriaAttributes(d).then(f=>{if(f)for(const[m,b]of f)u.setAttribute(m,b)}))}}o(this,Rn).sort(({data:{rect:[u,h,d,f]}},{data:{rect:[m,b,v,E]}})=>{if(u===d&&h===f)return 1;if(m===v&&b===E)return-1;const T=f,C=h,R=(h+f)/2,M=E,O=b,D=(b+E)/2;if(R>=M&&D<=C)return-1;if(D>=T&&R<=O)return 1;const L=(u+d)/2,k=(m+v)/2;return L-k});const e=document.createDocumentFragment();for(const u of o(this,Rn))e.append(u.container),this._commentManager?(l=((a=u.extraPopupElement)==null?void 0:a.popup)||u.popup)==null||l.renderCommentButton():u.extraPopupElement&&e.append(u.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),o(this,gc))for(const u of o(this,Rn))o(this,gc).addPointerInTextLayer(u.contentElement,!1)},gS=function(){var e;if(!o(this,pc))return;const t=this.div;for(const[n,a]of o(this,pc)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;a.className="annotationContent";const{firstChild:u}=l;u?u.nodeName==="CANVAS"?u.replaceWith(a):u.classList.contains("annotationContent")?u.after(a):u.before(a):l.append(a);const h=o(this,Lo).get(n);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,l.id,a),h._hasNoCanvas=!1):h.canvas=a)}o(this,pc).clear()};let fS=n1;const f0=/\r\n?|\n/g;var Dn,yp,yc,On,Xe,zx,Fx,Ux,B0,wr,I0,z0,Px,mS,Hx;const Ae=class Ae extends me{constructor(e){super({...e,name:"freeTextEditor"});w(this,Xe);w(this,Dn,"");w(this,yp,`${this.id}-editor`);w(this,yc,null);w(this,On);et(this,"_colorPicker",null);this.color=e.color||Ae._defaultColor||me._defaultLineColor,A(this,On,e.fontSize||Ae._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ae.prototype,n=u=>u.isEmpty(),a=Fc.TRANSLATE_SMALL,l=Fc.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new Pp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(e,n){me.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ht.FREETEXT_SIZE:Ae._defaultFontSize=n;break;case Ht.FREETEXT_COLOR:Ae._defaultColor=n;break}}updateParams(e,n){switch(e){case Ht.FREETEXT_SIZE:_(this,Xe,zx).call(this,n);break;case Ht.FREETEXT_COLOR:_(this,Xe,Fx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ht.FREETEXT_SIZE,Ae._defaultFontSize],[Ht.FREETEXT_COLOR,Ae._defaultColor||me._defaultLineColor]]}get propertiesToUpdate(){return[[Ht.FREETEXT_SIZE,o(this,On)],[Ht.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new sy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ht.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ae._internalPadding*e,-(Ae._internalPadding+o(this,On))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,yc,new AbortController);const e=this._uiManager.combinedSignal(o(this,yc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,yp)),this._isDraggable=!0,(e=o(this,yc))==null||e.abort(),A(this,yc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,Dn),n=A(this,Dn,_(this,Xe,Ux).call(this).trimEnd());if(e===n)return;const a=l=>{if(A(this,Dn,l),!l){this.remove();return}_(this,Xe,z0).call(this),this._uiManager.rebuild(this),_(this,Xe,B0).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),_(this,Xe,B0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ae._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,yp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${o(this,On)}px * var(--total-scale-factor))`,a.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[l,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[m,b]=this.pageDimensions,[v,E]=this.pageTranslation;let T,C;switch(this.rotation){case 0:T=e+(h[0]-v)/m,C=n+this.height-(h[1]-E)/b;break;case 90:T=e+(h[0]-v)/m,C=n-(h[1]-E)/b,[d,f]=[f,-d];break;case 180:T=e-this.width+(h[0]-v)/m,C=n-(h[1]-E)/b,[d,f]=[-d,-f];break;case 270:T=e+(h[0]-v-this.height*b)/m,C=n+(h[1]-E-this.width*m)/b,[d,f]=[-f,d];break}this.setAt(T*l,C*u,d,f)}else this._moveAfterPaste(e,n);_(this,Xe,z0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var T,C,R;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const l=_(T=Ae,wr,mS).call(T,n.getData("text")||"").replaceAll(f0,`
`);if(!l)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!l.includes(`
`)){h.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:d,startOffset:f}=h,m=[],b=[];if(d.nodeType===Node.TEXT_NODE){const M=d.parentElement;if(b.push(d.nodeValue.slice(f).replaceAll(f0,"")),M!==this.editorDiv){let O=m;for(const D of this.editorDiv.childNodes){if(D===M){O=b;continue}O.push(_(C=Ae,wr,I0).call(C,D))}}m.push(d.nodeValue.slice(0,f).replaceAll(f0,""))}else if(d===this.editorDiv){let M=m,O=0;for(const D of this.editorDiv.childNodes)O++===f&&(M=b),M.push(_(R=Ae,wr,I0).call(R,D))}A(this,Dn,`${m.join(`
`)}${l}${b.join(`
`)}`),_(this,Xe,z0).call(this);const v=new Range;let E=Math.sumPrecise(m.map(M=>M.length));for(const{firstChild:M}of this.editorDiv.childNodes)if(M.nodeType===Node.TEXT_NODE){const O=M.nodeValue.length;if(E<=O){v.setStart(M,E),v.setEnd(M,E);break}E-=O}u.removeAllRanges(),u.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ae._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,a){var h;let l=null;if(e instanceof Lx){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:m,rotation:b,id:v,popupRef:E,richText:T,contentsObj:C,creationDate:R,modificationDate:M},textContent:O,textPosition:D,parent:{page:{pageNumber:L}}}=e;if(!O||O.length===0)return null;l=e={annotationType:Mt.FREETEXT,color:Array.from(f),fontSize:d,value:O.join(`
`),position:D,pageIndex:L-1,rect:m.slice(0),rotation:b,annotationElementId:v,id:v,deleted:!1,popupRef:E,comment:(C==null?void 0:C.str)||null,richText:T,creationDate:R,modificationDate:M}}const u=await super.deserialize(e,n,a);return A(u,On,e.fontSize),u.color=rt.makeHexColor(...e.color),A(u,Dn,_(h=Ae,wr,mS).call(h,e.value)),u._initialData=l,e.comment&&u.setCommentData(e),u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),a=Object.assign(super.serialize(e),{color:n,fontSize:o(this,On),value:_(this,Xe,Px).call(this)});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!_(this,Xe,Hx).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:a}=n;a.fontSize=`calc(${o(this,On)}px * var(--total-scale-factor))`,a.color=this.color,n.replaceChildren();for(const l of o(this,Dn).split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:o(this,Dn)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Dn=new WeakMap,yp=new WeakMap,yc=new WeakMap,On=new WeakMap,Xe=new WeakSet,zx=function(e){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-o(this,On))*this.parentScale),A(this,On,l),_(this,Xe,B0).call(this)},a=o(this,On);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Fx=function(e){const n=l=>{this.color=l,this.onUpdatedColor()},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ux=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(_(a=Ae,wr,I0).call(a,l)),n=l);return e.join(`
`)},B0=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:l,div:u}=this,h=u.style.display,d=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",l.div.append(this.div),a=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},wr=new WeakSet,I0=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(f0,"")},z0=function(){if(this.editorDiv.replaceChildren(),!!o(this,Dn))for(const e of o(this,Dn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},Px=function(){return o(this,Dn).replaceAll(""," ")},mS=function(e){return e.replaceAll(" ","")},Hx=function(e){const{value:n,fontSize:a,color:l,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((h,d)=>h!==l[d])||e.pageIndex!==u},w(Ae,wr),et(Ae,"_freeTextDefaultContent",""),et(Ae,"_internalPadding",0),et(Ae,"_defaultColor",null),et(Ae,"_defaultFontSize",10),et(Ae,"_type","freetext"),et(Ae,"_editorType",Mt.FREETEXT);let pS=Ae;class lt{toSVGPath(){fe("Abstract method `toSVGPath` must be implemented.")}get box(){fe("Abstract getter `box` must be implemented.")}serialize(t,e){fe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,l,u){u||(u=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)u[h]=e+t[h]*a,u[h+1]=n+t[h+1]*l;return u}static _rescaleAndSwap(t,e,n,a,l,u){u||(u=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)u[h]=e+t[h+1]*a,u[h+1]=n+t[h]*l;return u}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let l=0,u=t.length;l<u;l+=2)a[l]=e+t[l],a[l+1]=n+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,l){switch(l){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,l,u){return[(t+5*n)/6,(e+5*a)/6,(5*n+l)/6,(5*a+u)/6,(n+l)/2,(a+u)/2]}}et(lt,"PRECISION",1e-4);var Nn,Ds,Kh,$h,oa,kt,bc,vc,bp,vp,Qh,Wh,ko,Ap,wy,_y,ei,Nf,jx,Gx,qx,Vx,Yx,Xx;const Ua=class Ua{constructor({x:t,y:e},n,a,l,u,h=0){w(this,ei);w(this,Nn);w(this,Ds,[]);w(this,Kh);w(this,$h);w(this,oa,[]);w(this,kt,new Float32Array(18));w(this,bc);w(this,vc);w(this,bp);w(this,vp);w(this,Qh);w(this,Wh);w(this,ko,[]);A(this,Nn,n),A(this,Wh,l*a),A(this,$h,u),o(this,kt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,Kh,h),A(this,vp,o(Ua,Ap)*a),A(this,bp,o(Ua,_y)*a),A(this,Qh,a),o(this,ko).push(t,e)}isEmpty(){return isNaN(o(this,kt)[8])}add({x:t,y:e}){var Y;A(this,bc,t),A(this,vc,e);const[n,a,l,u]=o(this,Nn);let[h,d,f,m]=o(this,kt).subarray(8,12);const b=t-f,v=e-m,E=Math.hypot(b,v);if(E<o(this,bp))return!1;const T=E-o(this,vp),C=T/E,R=C*b,M=C*v;let O=h,D=d;h=f,d=m,f+=R,m+=M,(Y=o(this,ko))==null||Y.push(t,e);const L=-M/T,k=R/T,z=L*o(this,Wh),F=k*o(this,Wh);return o(this,kt).set(o(this,kt).subarray(2,8),0),o(this,kt).set([f+z,m+F],4),o(this,kt).set(o(this,kt).subarray(14,18),12),o(this,kt).set([f-z,m-F],16),isNaN(o(this,kt)[6])?(o(this,oa).length===0&&(o(this,kt).set([h+z,d+F],2),o(this,oa).push(NaN,NaN,NaN,NaN,(h+z-n)/l,(d+F-a)/u),o(this,kt).set([h-z,d-F],14),o(this,Ds).push(NaN,NaN,NaN,NaN,(h-z-n)/l,(d-F-a)/u)),o(this,kt).set([O,D,h,d,f,m],6),!this.isEmpty()):(o(this,kt).set([O,D,h,d,f,m],6),Math.abs(Math.atan2(D-d,O-h)-Math.atan2(M,R))<Math.PI/2?([h,d,f,m]=o(this,kt).subarray(2,6),o(this,oa).push(NaN,NaN,NaN,NaN,((h+f)/2-n)/l,((d+m)/2-a)/u),[h,d,O,D]=o(this,kt).subarray(14,18),o(this,Ds).push(NaN,NaN,NaN,NaN,((O+h)/2-n)/l,((D+d)/2-a)/u),!0):([O,D,h,d,f,m]=o(this,kt).subarray(0,6),o(this,oa).push(((O+5*h)/6-n)/l,((D+5*d)/6-a)/u,((5*h+f)/6-n)/l,((5*d+m)/6-a)/u,((h+f)/2-n)/l,((d+m)/2-a)/u),[f,m,h,d,O,D]=o(this,kt).subarray(12,18),o(this,Ds).push(((O+5*h)/6-n)/l,((D+5*d)/6-a)/u,((5*h+f)/6-n)/l,((5*d+m)/6-a)/u,((h+f)/2-n)/l,((d+m)/2-a)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,oa),e=o(this,Ds);if(isNaN(o(this,kt)[6])&&!this.isEmpty())return _(this,ei,jx).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);_(this,ei,qx).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return _(this,ei,Gx).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,l,u){return new Kx(t,e,n,a,l,u)}getOutlines(){var b;const t=o(this,oa),e=o(this,Ds),n=o(this,kt),[a,l,u,h]=o(this,Nn),d=new Float32Array((((b=o(this,ko))==null?void 0:b.length)??0)+2);for(let v=0,E=d.length-2;v<E;v+=2)d[v]=(o(this,ko)[v]-a)/u,d[v+1]=(o(this,ko)[v+1]-l)/h;if(d[d.length-2]=(o(this,bc)-a)/u,d[d.length-1]=(o(this,vc)-l)/h,isNaN(n[6])&&!this.isEmpty())return _(this,ei,Vx).call(this,d);const f=new Float32Array(o(this,oa).length+24+o(this,Ds).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=_(this,ei,Xx).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let E=0;E<6;E+=2){if(isNaN(e[v+E])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+E],f[m+1]=e[v+E+1],m+=2}return _(this,ei,Yx).call(this,f,m),this.newFreeDrawOutline(f,d,o(this,Nn),o(this,Qh),o(this,Kh),o(this,$h))}};Nn=new WeakMap,Ds=new WeakMap,Kh=new WeakMap,$h=new WeakMap,oa=new WeakMap,kt=new WeakMap,bc=new WeakMap,vc=new WeakMap,bp=new WeakMap,vp=new WeakMap,Qh=new WeakMap,Wh=new WeakMap,ko=new WeakMap,Ap=new WeakMap,wy=new WeakMap,_y=new WeakMap,ei=new WeakSet,Nf=function(){const t=o(this,kt).subarray(4,6),e=o(this,kt).subarray(16,18),[n,a,l,u]=o(this,Nn);return[(o(this,bc)+(t[0]-e[0])/2-n)/l,(o(this,vc)+(t[1]-e[1])/2-a)/u,(o(this,bc)+(e[0]-t[0])/2-n)/l,(o(this,vc)+(e[1]-t[1])/2-a)/u]},jx=function(){const[t,e,n,a]=o(this,Nn),[l,u,h,d]=_(this,ei,Nf).call(this);return`M${(o(this,kt)[2]-t)/n} ${(o(this,kt)[3]-e)/a} L${(o(this,kt)[4]-t)/n} ${(o(this,kt)[5]-e)/a} L${l} ${u} L${h} ${d} L${(o(this,kt)[16]-t)/n} ${(o(this,kt)[17]-e)/a} L${(o(this,kt)[14]-t)/n} ${(o(this,kt)[15]-e)/a} Z`},Gx=function(t){const e=o(this,Ds);t.push(`L${e[4]} ${e[5]} Z`)},qx=function(t){const[e,n,a,l]=o(this,Nn),u=o(this,kt).subarray(4,6),h=o(this,kt).subarray(16,18),[d,f,m,b]=_(this,ei,Nf).call(this);t.push(`L${(u[0]-e)/a} ${(u[1]-n)/l} L${d} ${f} L${m} ${b} L${(h[0]-e)/a} ${(h[1]-n)/l}`)},Vx=function(t){const e=o(this,kt),[n,a,l,u]=o(this,Nn),[h,d,f,m]=_(this,ei,Nf).call(this),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-n)/l,(e[3]-a)/u,NaN,NaN,NaN,NaN,(e[4]-n)/l,(e[5]-a)/u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/l,(e[17]-a)/u,NaN,NaN,NaN,NaN,(e[14]-n)/l,(e[15]-a)/u],0),this.newFreeDrawOutline(b,t,o(this,Nn),o(this,Qh),o(this,Kh),o(this,$h))},Yx=function(t,e){const n=o(this,Ds);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},Xx=function(t,e){const n=o(this,kt).subarray(4,6),a=o(this,kt).subarray(16,18),[l,u,h,d]=o(this,Nn),[f,m,b,v]=_(this,ei,Nf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/h,(n[1]-u)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-u)/d],e),e+=24},w(Ua,Ap,8),w(Ua,wy,2),w(Ua,_y,o(Ua,Ap)+o(Ua,wy));let ry=Ua;var Zh,Ac,fr,Sp,Ln,Ep,Ue,Cy,$x;class Kx extends lt{constructor(e,n,a,l,u,h){super();w(this,Cy);w(this,Zh);w(this,Ac,new Float32Array(4));w(this,fr);w(this,Sp);w(this,Ln);w(this,Ep);w(this,Ue);A(this,Ue,e),A(this,Ln,n),A(this,Zh,a),A(this,Ep,l),A(this,fr,u),A(this,Sp,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],_(this,Cy,$x).call(this,h);const[d,f,m,b]=o(this,Ac);for(let v=0,E=e.length;v<E;v+=2)e[v]=(e[v]-d)/m,e[v+1]=(e[v+1]-f)/b;for(let v=0,E=n.length;v<E;v+=2)n[v]=(n[v]-d)/m,n[v+1]=(n[v+1]-f)/b}toSVGPath(){const e=[`M${o(this,Ue)[4]} ${o(this,Ue)[5]}`];for(let n=6,a=o(this,Ue).length;n<a;n+=6){if(isNaN(o(this,Ue)[n])){e.push(`L${o(this,Ue)[n+4]} ${o(this,Ue)[n+5]}`);continue}e.push(`C${o(this,Ue)[n]} ${o(this,Ue)[n+1]} ${o(this,Ue)[n+2]} ${o(this,Ue)[n+3]} ${o(this,Ue)[n+4]} ${o(this,Ue)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,l],u){const h=a-e,d=l-n;let f,m;switch(u){case 0:f=lt._rescale(o(this,Ue),e,l,h,-d),m=lt._rescale(o(this,Ln),e,l,h,-d);break;case 90:f=lt._rescaleAndSwap(o(this,Ue),e,n,h,d),m=lt._rescaleAndSwap(o(this,Ln),e,n,h,d);break;case 180:f=lt._rescale(o(this,Ue),a,n,-h,d),m=lt._rescale(o(this,Ln),a,n,-h,d);break;case 270:f=lt._rescaleAndSwap(o(this,Ue),a,l,-h,-d),m=lt._rescaleAndSwap(o(this,Ln),a,l,-h,-d);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return o(this,Ac)}newOutliner(e,n,a,l,u,h=0){return new ry(e,n,a,l,u,h)}getNewOutline(e,n){const[a,l,u,h]=o(this,Ac),[d,f,m,b]=o(this,Zh),v=u*m,E=h*b,T=a*m+d,C=l*b+f,R=this.newOutliner({x:o(this,Ln)[0]*v+T,y:o(this,Ln)[1]*E+C},o(this,Zh),o(this,Ep),e,o(this,Sp),n??o(this,fr));for(let M=2;M<o(this,Ln).length;M+=2)R.add({x:o(this,Ln)[M]*v+T,y:o(this,Ln)[M+1]*E+C});return R.getOutlines()}}Zh=new WeakMap,Ac=new WeakMap,fr=new WeakMap,Sp=new WeakMap,Ln=new WeakMap,Ep=new WeakMap,Ue=new WeakMap,Cy=new WeakSet,$x=function(e){const n=o(this,Ue);let a=n[4],l=n[5];const u=[a,l,a,l];let h=a,d=l,f=a,m=l;const b=e?Math.max:Math.min,v=new Float32Array(4);for(let T=6,C=n.length;T<C;T+=6){const R=n[T+4],M=n[T+5];isNaN(n[T])?(rt.pointBoundingBox(R,M,u),d>M?(h=R,d=M):d===M&&(h=b(h,R)),m<M?(f=R,m=M):m===M&&(f=b(f,R))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,rt.bezierBoundingBox(a,l,...n.slice(T,T+6),v),rt.rectBoundingBox(v[0],v[1],v[2],v[3],u),d>v[1]?(h=v[0],d=v[1]):d===v[1]&&(h=b(h,v[0])),m<v[3]?(f=v[2],m=v[3]):m===v[3]&&(f=b(f,v[2]))),a=R,l=M}const E=o(this,Ac);E[0]=u[0]-o(this,fr),E[1]=u[1]-o(this,fr),E[2]=u[2]-u[0]+2*o(this,fr),E[3]=u[3]-u[1]+2*o(this,fr),this.firstPoint=[h,d],this.lastPoint=[f,m]};var wp,_p,Cp,Bo,Os,Vi,Qx,F0,Wx,Zx,bS;class yS{constructor(t,e=0,n=0,a=!0){w(this,Vi);w(this,wp);w(this,_p);w(this,Cp);w(this,Bo,[]);w(this,Os,[]);const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:C,y:R,width:M,height:O}of t){const D=Math.floor((C-e)/u)*u,L=Math.ceil((C+M+e)/u)*u,k=Math.floor((R-e)/u)*u,z=Math.ceil((R+O+e)/u)*u,F=[D,k,z,!0],W=[L,k,z,!1];o(this,Bo).push(F,W),rt.rectBoundingBox(D,k,L,z,l)}const h=l[2]-l[0]+2*n,d=l[3]-l[1]+2*n,f=l[0]-n,m=l[1]-n;let b=a?-1/0:1/0,v=1/0;const E=o(this,Bo).at(a?-1:-2),T=[E[0],E[2]];for(const C of o(this,Bo)){const[R,M,O,D]=C;!D&&a?M<v?(v=M,b=R):M===v&&(b=Math.max(b,R)):D&&!a&&(M<v?(v=M,b=R):M===v&&(b=Math.min(b,R))),C[0]=(R-f)/h,C[1]=(M-m)/d,C[2]=(O-m)/d}A(this,wp,new Float32Array([f,m,h,d])),A(this,_p,[b,v]),A(this,Cp,T)}getOutlines(){o(this,Bo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of o(this,Bo))e[3]?(t.push(..._(this,Vi,bS).call(this,e)),_(this,Vi,Wx).call(this,e)):(_(this,Vi,Zx).call(this,e),t.push(..._(this,Vi,bS).call(this,e)));return _(this,Vi,Qx).call(this,t)}}wp=new WeakMap,_p=new WeakMap,Cp=new WeakMap,Bo=new WeakMap,Os=new WeakMap,Vi=new WeakSet,Qx=function(t){const e=[],n=new Set;for(const u of t){const[h,d,f]=u;e.push([h,d,u],[h,f,u])}e.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=e.length;u<h;u+=2){const d=e[u][2],f=e[u+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const a=[];let l;for(;n.size>0;){const u=n.values().next().value;let[h,d,f,m,b]=u;n.delete(u);let v=h,E=d;for(l=[h,f],a.push(l);;){let T;if(n.has(m))T=m;else if(n.has(b))T=b;else break;n.delete(T),[h,d,f,m,b]=T,v!==h&&(l.push(v,E,h,E===d?d:f),v=h),E=E===d?f:d}l.push(v,E)}return new NN(a,o(this,wp),o(this,_p),o(this,Cp))},F0=function(t){const e=o(this,Os);let n=0,a=e.length-1;for(;n<=a;){const l=n+a>>1,u=e[l][0];if(u===t)return l;u<t?n=l+1:a=l-1}return a+1},Wx=function([,t,e]){const n=_(this,Vi,F0).call(this,t);o(this,Os).splice(n,0,[t,e])},Zx=function([,t,e]){const n=_(this,Vi,F0).call(this,t);for(let a=n;a<o(this,Os).length;a++){const[l,u]=o(this,Os)[a];if(l!==t)break;if(l===t&&u===e){o(this,Os).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[l,u]=o(this,Os)[a];if(l!==t)break;if(l===t&&u===e){o(this,Os).splice(a,1);return}}},bS=function(t){const[e,n,a]=t,l=[[e,n,a]],u=_(this,Vi,F0).call(this,a);for(let h=0;h<u;h++){const[d,f]=o(this,Os)[h];for(let m=0,b=l.length;m<b;m++){const[,v,E]=l[m];if(!(f<=v||E<=d)){if(v>=d){if(E>f)l[m][1]=f;else{if(b===1)return[];l.splice(m,1),m--,b--}continue}l[m][2]=d,E>f&&l.push([e,f,E])}}}return l};var Tp,Jh;class NN extends lt{constructor(e,n,a,l){super();w(this,Tp);w(this,Jh);A(this,Jh,e),A(this,Tp,n),this.firstPoint=a,this.lastPoint=l}toSVGPath(){const e=[];for(const n of o(this,Jh)){let[a,l]=n;e.push(`M${a} ${l}`);for(let u=2;u<n.length;u+=2){const h=n[u],d=n[u+1];h===a?(e.push(`V${d}`),l=d):d===l&&(e.push(`H${h}`),a=h)}e.push("Z")}return e.join(" ")}serialize([e,n,a,l],u){const h=[],d=a-e,f=l-n;for(const m of o(this,Jh)){const b=new Array(m.length);for(let v=0;v<m.length;v+=2)b[v]=e+m[v]*d,b[v+1]=l-m[v+1]*f;h.push(b)}return h}get box(){return o(this,Tp)}get classNamesForOutlining(){return["highlightOutline"]}}Tp=new WeakMap,Jh=new WeakMap;class vS extends ry{newFreeDrawOutline(t,e,n,a,l,u){return new LN(t,e,n,a,l,u)}}class LN extends Kx{newOutliner(t,e,n,a,l,u=0){return new vS(t,e,n,a,l,u)}}var td,xp,gr,Sc,Mp,rn,Rp,Dp,Ec,kn,Bn,Ei,ed,id,ki,nd,ds,Op,Nt,AS,U0,Jx,t2,e2,SS,yl,gs,ku,i2,P0,H0,n2,s2,a2,r2,o2;const Kt=class Kt extends me{constructor(e){super({...e,name:"highlightEditor"});w(this,Nt);w(this,td,null);w(this,xp,0);w(this,gr);w(this,Sc,null);w(this,Mp,null);w(this,rn,null);w(this,Rp,null);w(this,Dp,0);w(this,Ec,null);w(this,kn,null);w(this,Bn,null);w(this,Ei,!1);w(this,ed,null);w(this,id,null);w(this,ki,null);w(this,nd,"");w(this,ds);w(this,Op,"");this.color=e.color||Kt._defaultColor,A(this,ds,e.thickness||Kt._defaultThickness),this.opacity=e.opacity||Kt._defaultOpacity,A(this,gr,e.boxes||null),A(this,Op,e.methodOfCreation||""),A(this,nd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(A(this,Ei,!0),_(this,Nt,U0).call(this,e),_(this,Nt,yl).call(this)):o(this,gr)&&(A(this,td,e.anchorNode),A(this,xp,e.anchorOffset),A(this,Rp,e.focusNode),A(this,Dp,e.focusOffset),_(this,Nt,AS).call(this),_(this,Nt,yl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Kt.prototype;return Tt(this,"_keyboardManager",new Pp([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Ei)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:o(this,ds),methodOfCreation:o(this,Op)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;me.initialize(e,n),Kt._defaultColor||(Kt._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ht.HIGHLIGHT_COLOR:Kt._defaultColor=n;break;case Ht.HIGHLIGHT_THICKNESS:Kt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return o(this,id)}get commentButtonPosition(){return o(this,ed)}updateParams(e,n){switch(e){case Ht.HIGHLIGHT_COLOR:_(this,Nt,Jx).call(this,n);break;case Ht.HIGHLIGHT_THICKNESS:_(this,Nt,t2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ht.HIGHLIGHT_COLOR,Kt._defaultColor],[Ht.HIGHLIGHT_THICKNESS,Kt._defaultThickness]]}get propertiesToUpdate(){return[[Ht.HIGHLIGHT_COLOR,this.color||Kt._defaultColor],[Ht.HIGHLIGHT_THICKNESS,o(this,ds)||Kt._defaultThickness],[Ht.HIGHLIGHT_FREE,o(this,Ei)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(o(this,Bn),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=o(this,Mp))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,Mp,new ny({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,Nt,H0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,_(this,Nt,H0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){_(this,Nt,SS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Nt,yl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?_(this,Nt,SS).call(this):e&&(_(this,Nt,yl).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var l,u,h;const{drawLayer:n}=this.parent;let a;o(this,Ei)?(e=(e-this.rotation+360)%360,a=_(l=Kt,gs,ku).call(l,o(this,kn).box,e)):a=_(u=Kt,gs,ku).call(u,[this.x,this.y,this.width,this.height],e),n.updateProperties(o(this,Bn),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(o(this,ki),{bbox:_(h=Kt,gs,ku).call(h,o(this,rn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,nd)&&(e.setAttribute("aria-label",o(this,nd)),e.setAttribute("role","mark")),o(this,Ei)?e.classList.add("free"):this.div.addEventListener("keydown",_(this,Nt,i2).bind(this),{signal:this._uiManager._signal});const n=A(this,Ec,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=o(this,Sc),this.setDims(),CT(this,o(this,Ec),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,ki),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,ki),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:_(this,Nt,P0).call(this,!0);break;case 1:case 3:_(this,Nt,P0).call(this,!1);break}}select(){var e;super.select(),o(this,ki)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,ki),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,ki)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,ki),{rootClass:{selected:!1}}),o(this,Ei)||_(this,Nt,P0).call(this,!1))}get _mustFixPosition(){return!o(this,Ei)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,Bn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,ki),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:l,y:u}){const{x:h,y:d,width:f,height:m}=a.getBoundingClientRect(),b=new AbortController,v=e.combinedSignal(b),E=T=>{b.abort(),_(this,gs,r2).call(this,e,T)};window.addEventListener("blur",E,{signal:v}),window.addEventListener("pointerup",E,{signal:v}),window.addEventListener("pointerdown",Be,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ms,{signal:v}),a.addEventListener("pointermove",_(this,gs,a2).bind(this,e),{signal:v}),this._freeHighlight=new vS({x:l,y:u},[h,d,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var C,R,M,O;let l=null;if(e instanceof Bx){const{data:{quadPoints:D,rect:L,rotation:k,id:z,color:F,opacity:W,popupRef:Y,richText:it,contentsObj:J,creationDate:ht,modificationDate:gt},parent:{page:{pageNumber:mt}}}=e;l=e={annotationType:Mt.HIGHLIGHT,color:Array.from(F),opacity:W,quadPoints:D,boxes:null,pageIndex:mt-1,rect:L.slice(0),rotation:k,annotationElementId:z,id:z,deleted:!1,popupRef:Y,richText:it,comment:(J==null?void 0:J.str)||null,creationDate:ht,modificationDate:gt}}else if(e instanceof $S){const{data:{inkLists:D,rect:L,rotation:k,id:z,color:F,borderStyle:{rawWidth:W},popupRef:Y,richText:it,contentsObj:J,creationDate:ht,modificationDate:gt},parent:{page:{pageNumber:mt}}}=e;l=e={annotationType:Mt.HIGHLIGHT,color:Array.from(F),thickness:W,inkLists:D,boxes:null,pageIndex:mt-1,rect:L.slice(0),rotation:k,annotationElementId:z,id:z,deleted:!1,popupRef:Y,richText:it,comment:(J==null?void 0:J.str)||null,creationDate:ht,modificationDate:gt}}const{color:u,quadPoints:h,inkLists:d,opacity:f}=e,m=await super.deserialize(e,n,a);m.color=rt.makeHexColor(...u),m.opacity=f||1,d&&A(m,ds,e.thickness),m._initialData=l,e.comment&&m.setCommentData(e);const[b,v]=m.pageDimensions,[E,T]=m.pageTranslation;if(h){const D=A(m,gr,[]);for(let L=0;L<h.length;L+=8)D.push({x:(h[L]-E)/b,y:1-(h[L+1]-T)/v,width:(h[L+2]-h[L])/b,height:(h[L+1]-h[L+5])/v});_(C=m,Nt,AS).call(C),_(R=m,Nt,yl).call(R),m.rotate(m.rotation)}else if(d){A(m,Ei,!0);const D=d[0],L={x:D[0]-E,y:v-(D[1]-T)},k=new vS(L,[0,0,b,v],1,o(m,ds)/2,!0,.001);for(let W=0,Y=D.length;W<Y;W+=2)L.x=D[W]-E,L.y=v-(D[W+1]-T),k.add(L);const{id:z,clipPathId:F}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);_(M=m,Nt,U0).call(M,{highlightOutlines:k.getOutlines(),highlightId:z,clipPathId:F}),_(O=m,Nt,yl).call(O),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=me._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a=super.serialize(e);return Object.assign(a,{color:n,opacity:this.opacity,thickness:o(this,ds),quadPoints:_(this,Nt,n2).call(this),outlines:_(this,Nt,s2).call(this,a.rect)}),this.addComment(a),this.annotationElementId&&!_(this,Nt,o2).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};td=new WeakMap,xp=new WeakMap,gr=new WeakMap,Sc=new WeakMap,Mp=new WeakMap,rn=new WeakMap,Rp=new WeakMap,Dp=new WeakMap,Ec=new WeakMap,kn=new WeakMap,Bn=new WeakMap,Ei=new WeakMap,ed=new WeakMap,id=new WeakMap,ki=new WeakMap,nd=new WeakMap,ds=new WeakMap,Op=new WeakMap,Nt=new WeakSet,AS=function(){const e=new yS(o(this,gr),.001);A(this,kn,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,kn).box;const n=new yS(o(this,gr),.0025,.001,this._uiManager.direction==="ltr");A(this,rn,n.getOutlines());const{firstPoint:a}=o(this,kn);A(this,ed,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]);const{lastPoint:l}=o(this,rn);A(this,id,[(l[0]-this.x)/this.width,(l[1]-this.y)/this.height])},U0=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var v,E;if(A(this,kn,e),A(this,rn,e.getNewOutline(o(this,ds)/2+1.5,.0025)),n>=0)A(this,Bn,n),A(this,Sc,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,ki,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,rn).box,path:{d:o(this,rn).toSVGPath()}},!0));else if(this.parent){const T=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,Bn),{bbox:_(v=Kt,gs,ku).call(v,o(this,kn).box,(T-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,ki),{bbox:_(E=Kt,gs,ku).call(E,o(this,rn).box,T),path:{d:o(this,rn).toSVGPath()}})}const[u,h,d,f]=e.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=d,this.height=f;break;case 90:{const[T,C]=this.parentDimensions;this.x=h,this.y=1-u,this.width=d*C/T,this.height=f*T/C;break}case 180:this.x=1-u,this.y=1-h,this.width=d,this.height=f;break;case 270:{const[T,C]=this.parentDimensions;this.x=1-h,this.y=u,this.width=d*C/T,this.height=f*T/C;break}}const{firstPoint:m}=e;A(this,ed,[(m[0]-u)/d,(m[1]-h)/f]);const{lastPoint:b}=o(this,rn);A(this,id,[(b[0]-u)/d,(b[1]-h)/f])},Jx=function(e){const n=(u,h)=>{this.color=u,this.opacity=h,this.onUpdatedColor()},a=this.color,l=this.opacity;this.addCommands({cmd:n.bind(this,e,Kt._defaultOpacity),undo:n.bind(this,a,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},t2=function(e){const n=o(this,ds),a=l=>{A(this,ds,l),_(this,Nt,e2).call(this,l)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},e2=function(e){o(this,Ei)&&(_(this,Nt,U0).call(this,{highlightOutlines:o(this,kn).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},SS=function(){o(this,Bn)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Bn)),A(this,Bn,null),this.parent.drawLayer.remove(o(this,ki)),A(this,ki,null))},yl=function(e=this.parent){o(this,Bn)===null&&({id:Qe(this,Bn)._,clipPathId:Qe(this,Sc)._}=e.drawLayer.draw({bbox:o(this,kn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:o(this,Ei)},path:{d:o(this,kn).toSVGPath()}},!1,!0),A(this,ki,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Ei)},bbox:o(this,rn).box,path:{d:o(this,rn).toSVGPath()}},o(this,Ei))),o(this,Ec)&&(o(this,Ec).style.clipPath=o(this,Sc)))},gs=new WeakSet,ku=function([e,n,a,l],u){switch(u){case 90:return[1-n-l,e,l,a];case 180:return[1-e-a,1-n-l,a,l];case 270:return[n,1-e-a,l,a]}return[e,n,a,l]},i2=function(e){Kt._keyboardManager.exec(this,e)},P0=function(e){if(!o(this,td))return;const n=window.getSelection();e?n.setPosition(o(this,td),o(this,xp)):n.setPosition(o(this,Rp),o(this,Dp))},H0=function(){return o(this,Ei)?this.rotation:0},n2=function(){if(o(this,Ei))return null;const[e,n]=this.pageDimensions,[a,l]=this.pageTranslation,u=o(this,gr),h=new Float32Array(u.length*8);let d=0;for(const{x:f,y:m,width:b,height:v}of u){const E=f*e+a,T=(1-m)*n+l;h[d]=h[d+4]=E,h[d+1]=h[d+3]=T,h[d+2]=h[d+6]=E+b*e,h[d+5]=h[d+7]=T-v*n,d+=8}return h},s2=function(e){return o(this,kn).serialize(e,_(this,Nt,H0).call(this))},a2=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},r2=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},o2=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((a,l)=>a!==n[l])},w(Kt,gs),et(Kt,"_defaultColor",null),et(Kt,"_defaultOpacity",1),et(Kt,"_defaultThickness",12),et(Kt,"_type","highlight"),et(Kt,"_editorType",Mt.HIGHLIGHT),et(Kt,"_freeHighlightId",-1),et(Kt,"_freeHighlight",null),et(Kt,"_freeHighlightClipId","");let oy=Kt;var wc;class l2{constructor(){w(this,wc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){o(this,wc)[t]=e}toSVGProperties(){const t=o(this,wc);return A(this,wc,Object.create(null)),{root:t}}reset(){A(this,wc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){fe("Not implemented")}}wc=new WeakMap;var In,sd,li,_c,Cc,Gt,ES,wS,_S,Lf,c2,j0,kf,Bu;const Ut=class Ut extends me{constructor(e){super(e);w(this,Gt);w(this,In,null);w(this,sd);et(this,"_colorPicker",null);et(this,"_drawId",null);A(this,sd,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(_(this,Gt,ES).call(this,e),_(this,Gt,Lf).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[l,u]of Object.entries(n))a.has(l)?Object.assign(e[l],u):e[l]=u;return e}static getDefaultDrawingOptions(e){fe("Not implemented")}static get typesMap(){fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(o(Ut,li).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,l]of this.typesMap)e.push([a,n[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,l]of this.constructor.typesMap)e.push([a,n[l]]);return e}_updateProperty(e,n,a){const l=this._drawingOptions,u=l[n],h=d=>{var m;l.updateProperty(n,d);const f=o(this,In).updateProperty(n,d);f&&_(this,Gt,kf).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,l.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,a),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(o(this,In).getPathResizingSVGProperties(_(this,Gt,j0).call(this)),{bbox:_(this,Gt,Bu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(o(this,In).getPathResizedSVGProperties(_(this,Gt,j0).call(this)),{bbox:_(this,Gt,Bu).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:_(this,Gt,Bu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(o(this,In).getPathTranslatedSVGProperties(_(this,Gt,j0).call(this),this.parentDimensions),{bbox:_(this,Gt,Bu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,sd)&&(A(this,sd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){_(this,Gt,_S).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Gt,Lf).call(this),_(this,Gt,kf).call(this,o(this,In).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),_(this,Gt,_S).call(this)):e&&(this._uiManager.addShouldRescale(this),_(this,Gt,Lf).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties({bbox:_(this,Gt,Bu).call(this)},o(this,In).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&_(this,Gt,kf).call(this,o(this,In).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const a=super.render();a.classList.add("draw");const l=document.createElement("div");return a.append(l),l.setAttribute("aria-hidden","true"),l.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),a}static createDrawerInstance(e,n,a,l,u){fe("Not implemented")}static startDrawing(e,n,a,l){var R;const{target:u,offsetX:h,offsetY:d,pointerId:f,pointerType:m}=l;if(Ri.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:b}}=e,{width:v,height:E}=u.getBoundingClientRect(),T=A(Ut,_c,new AbortController),C=e.combinedSignal(T);if(Ri.setPointer(m,f),window.addEventListener("pointerup",M=>{Ri.isSamePointerIdOrRemove(M.pointerId)&&this._endDraw(M)},{signal:C}),window.addEventListener("pointercancel",M=>{Ri.isSamePointerIdOrRemove(M.pointerId)&&this._currentParent.endDrawingSession()},{signal:C}),window.addEventListener("pointerdown",M=>{Ri.isSamePointerType(M.pointerType)&&(Ri.initializeAndAddPointerId(M.pointerId),o(Ut,li).isCancellable()&&(o(Ut,li).removeLastElement(),o(Ut,li).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",ms,{signal:C}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),u.addEventListener("touchmove",M=>{Ri.isSameTimeStamp(M.timeStamp)&&Be(M)},{signal:C}),e.toggleDrawing(),(R=n._editorUndoBar)==null||R.hide(),o(Ut,li)){e.drawLayer.updateProperties(this._currentDrawId,o(Ut,li).startNew(h,d,v,E,b));return}n.updateUIForDefaultProperties(this),A(Ut,li,this.createDrawerInstance(h,d,v,E,b)),A(Ut,Cc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(Ut,Cc).toSVGProperties(),o(Ut,li).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ri.isSameTimeStamp(e.timeStamp),!o(Ut,li))return;const{offsetX:n,offsetY:a,pointerId:l}=e;if(Ri.isSamePointerId(l)){if(Ri.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(Ut,li).add(n,a)),Ri.setTimeStamp(e.timeStamp),Be(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(Ut,li,null),A(Ut,Cc,null),Ri.clearTimeStamp()),o(Ut,_c)&&(o(Ut,_c).abort(),A(Ut,_c,null),Ri.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,o(Ut,li).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=o(Ut,li),l=this._currentDrawId,u=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,a.setLastElement(u))},undo:()=>{n.drawLayer.updateProperties(l,a.removeLastElement())},mustExec:!1,type:Ht.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ht.DRAW_STEP),!o(Ut,li).isEmpty()){const{pageDimensions:[a,l],scale:u}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(Ut,li).getOutlines(a*u,l*u,u,this._INNER_MARGIN),drawingOptions:o(Ut,Cc),mustBeCommitted:!e});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,l,u,h){fe("Not implemented")}static async deserialize(e,n,a){var b,v;const{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:d}}=n.viewport,f=this.deserializeDraw(h,d,l,u,this._INNER_MARGIN,e),m=await super.deserialize(e,n,a);return m.createDrawingOptions(e),_(b=m,Gt,ES).call(b,{drawOutlines:f}),_(v=m,Gt,Lf).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,a]=this.pageTranslation,[l,u]=this.pageDimensions;return o(this,In).serialize([n,a,l,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};In=new WeakMap,sd=new WeakMap,li=new WeakMap,_c=new WeakMap,Cc=new WeakMap,Gt=new WeakSet,ES=function({drawOutlines:e,drawId:n,drawingOptions:a}){A(this,In,e),this._drawingOptions||(this._drawingOptions=a),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=_(this,Gt,wS).call(this,e,this.parent),_(this,Gt,kf).call(this,e.box)},wS=function(e,n){const{id:a}=n.drawLayer.draw(Ut._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},_S=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Lf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=_(this,Gt,wS).call(this,o(this,In),e)}},c2=function([e,n,a,l]){const{parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[n,1-e,a*(h/u),l*(u/h)];case 180:return[1-e,1-n,a,l];case 270:return[1-n,e,a*(h/u),l*(u/h)];default:return[e,n,a,l]}},j0=function(){const{x:e,y:n,width:a,height:l,parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[1-n,e,a*(u/h),l*(h/u)];case 180:return[1-e,1-n,a,l];case 270:return[n,1-e,a*(u/h),l*(h/u)];default:return[e,n,a,l]}},kf=function(e){[this.x,this.y,this.width,this.height]=_(this,Gt,c2).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Bu=function(){const{x:e,y:n,width:a,height:l,rotation:u,parentRotation:h,parentDimensions:[d,f]}=this;switch((u*4+h)/90){case 1:return[1-n-l,e,l,a];case 2:return[1-e-a,1-n-l,a,l];case 3:return[n,1-e-a,l,a];case 4:return[e,n-a*(d/f),l*(f/d),a*(d/f)];case 5:return[1-n,e,a*(d/f),l*(f/d)];case 6:return[1-e-l*(f/d),1-n,l*(f/d),a*(d/f)];case 7:return[n-a*(d/f),1-e-l*(f/d),a*(d/f),l*(f/d)];case 8:return[e-a,n-l,a,l];case 9:return[1-n,e-a,l,a];case 10:return[1-e,1-n,a,l];case 11:return[n-l,1-e,l,a];case 12:return[e-l*(f/d),n,l*(f/d),a*(d/f)];case 13:return[1-n-a*(d/f),e-l*(f/d),a*(d/f),l*(f/d)];case 14:return[1-e,1-n-a*(d/f),l*(f/d),a*(d/f)];case 15:return[n,1-e,a*(d/f),l*(f/d)];default:return[e,n,a,l]}},et(Ut,"_currentDrawId",-1),et(Ut,"_currentParent",null),w(Ut,li,null),w(Ut,_c,null),w(Ut,Cc,null),et(Ut,"_INNER_MARGIN",3);let ly=Ut;var la,ci,ui,Tc,ad,Ui,wi,fs,xc,Mc,Rc,rd,G0;class kN{constructor(t,e,n,a,l,u){w(this,rd);w(this,la,new Float64Array(6));w(this,ci);w(this,ui);w(this,Tc);w(this,ad);w(this,Ui);w(this,wi,"");w(this,fs,0);w(this,xc,new jp);w(this,Mc);w(this,Rc);A(this,Mc,n),A(this,Rc,a),A(this,Tc,l),A(this,ad,u),[t,e]=_(this,rd,G0).call(this,t,e);const h=A(this,ci,[NaN,NaN,NaN,NaN,t,e]);A(this,Ui,[t,e]),A(this,ui,[{line:h,points:o(this,Ui)}]),o(this,la).set(h,0)}updateProperty(t,e){t==="stroke-width"&&A(this,ad,e)}isEmpty(){return!o(this,ui)||o(this,ui).length===0}isCancellable(){return o(this,Ui).length<=10}add(t,e){[t,e]=_(this,rd,G0).call(this,t,e);const[n,a,l,u]=o(this,la).subarray(2,6),h=t-l,d=e-u;return Math.hypot(o(this,Mc)*h,o(this,Rc)*d)<=2?null:(o(this,Ui).push(t,e),isNaN(n)?(o(this,la).set([l,u,t,e],2),o(this,ci).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,la)[0])&&o(this,ci).splice(6,6),o(this,la).set([n,a,l,u,t,e],0),o(this,ci).push(...lt.createBezierPoints(n,a,l,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(o(this,Ui).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,l){A(this,Mc,n),A(this,Rc,a),A(this,Tc,l),[t,e]=_(this,rd,G0).call(this,t,e);const u=A(this,ci,[NaN,NaN,NaN,NaN,t,e]);A(this,Ui,[t,e]);const h=o(this,ui).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),o(this,ui).push({line:u,points:o(this,Ui)}),o(this,la).set(u,0),A(this,fs,0),this.toSVGPath(),null}getLastElement(){return o(this,ui).at(-1)}setLastElement(t){return o(this,ui)?(o(this,ui).push(t),A(this,ci,t.line),A(this,Ui,t.points),A(this,fs,0),{path:{d:this.toSVGPath()}}):o(this,xc).setLastElement(t)}removeLastElement(){if(!o(this,ui))return o(this,xc).removeLastElement();o(this,ui).pop(),A(this,wi,"");for(let t=0,e=o(this,ui).length;t<e;t++){const{line:n,points:a}=o(this,ui)[t];A(this,ci,n),A(this,Ui,a),A(this,fs,0),this.toSVGPath()}return{path:{d:o(this,wi)}}}toSVGPath(){const t=lt.svgRound(o(this,ci)[4]),e=lt.svgRound(o(this,ci)[5]);if(o(this,Ui).length===2)return A(this,wi,`${o(this,wi)} M ${t} ${e} Z`),o(this,wi);if(o(this,Ui).length<=6){const a=o(this,wi).lastIndexOf("M");A(this,wi,`${o(this,wi).slice(0,a)} M ${t} ${e}`),A(this,fs,6)}if(o(this,Ui).length===4){const a=lt.svgRound(o(this,ci)[10]),l=lt.svgRound(o(this,ci)[11]);return A(this,wi,`${o(this,wi)} L ${a} ${l}`),A(this,fs,12),o(this,wi)}const n=[];o(this,fs)===0&&(n.push(`M ${t} ${e}`),A(this,fs,6));for(let a=o(this,fs),l=o(this,ci).length;a<l;a+=6){const[u,h,d,f,m,b]=o(this,ci).slice(a,a+6).map(lt.svgRound);n.push(`C${u} ${h} ${d} ${f} ${m} ${b}`)}return A(this,wi,o(this,wi)+n.join(" ")),A(this,fs,o(this,ci).length),o(this,wi)}getOutlines(t,e,n,a){const l=o(this,ui).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),o(this,xc).build(o(this,ui),t,e,n,o(this,Tc),o(this,ad),a),A(this,la,null),A(this,ci,null),A(this,ui,null),A(this,wi,null),o(this,xc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}la=new WeakMap,ci=new WeakMap,ui=new WeakMap,Tc=new WeakMap,ad=new WeakMap,Ui=new WeakMap,wi=new WeakMap,fs=new WeakMap,xc=new WeakMap,Mc=new WeakMap,Rc=new WeakMap,rd=new WeakSet,G0=function(t,e){return lt._normalizePoint(t,e,o(this,Mc),o(this,Rc),o(this,Tc))};var Pi,Np,Lp,zn,ca,ua,od,ld,Dc,Ci,za,u2,h2,d2;class jp extends lt{constructor(){super(...arguments);w(this,Ci);w(this,Pi);w(this,Np,0);w(this,Lp);w(this,zn);w(this,ca);w(this,ua);w(this,od);w(this,ld);w(this,Dc)}build(e,n,a,l,u,h,d){A(this,ca,n),A(this,ua,a),A(this,od,l),A(this,ld,u),A(this,Dc,h),A(this,Lp,d??0),A(this,zn,e),_(this,Ci,h2).call(this)}get thickness(){return o(this,Dc)}setLastElement(e){return o(this,zn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,zn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of o(this,zn)){if(e.push(`M${lt.svgRound(n[4])} ${lt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${lt.svgRound(n[10])} ${lt.svgRound(n[11])}`);continue}for(let a=6,l=n.length;a<l;a+=6){const[u,h,d,f,m,b]=n.subarray(a,a+6).map(lt.svgRound);e.push(`C${u} ${h} ${d} ${f} ${m} ${b}`)}}return e.join("")}serialize([e,n,a,l],u){const h=[],d=[],[f,m,b,v]=_(this,Ci,u2).call(this);let E,T,C,R,M,O,D,L,k;switch(o(this,ld)){case 0:k=lt._rescale,E=e,T=n+l,C=a,R=-l,M=e+f*a,O=n+(1-m-v)*l,D=e+(f+b)*a,L=n+(1-m)*l;break;case 90:k=lt._rescaleAndSwap,E=e,T=n,C=a,R=l,M=e+m*a,O=n+f*l,D=e+(m+v)*a,L=n+(f+b)*l;break;case 180:k=lt._rescale,E=e+a,T=n,C=-a,R=l,M=e+(1-f-b)*a,O=n+m*l,D=e+(1-f)*a,L=n+(m+v)*l;break;case 270:k=lt._rescaleAndSwap,E=e+a,T=n+l,C=-a,R=-l,M=e+(1-m-v)*a,O=n+(1-f-b)*l,D=e+(1-m)*a,L=n+(1-f)*l;break}for(const{line:z,points:F}of o(this,zn))h.push(k(z,E,T,C,R,u?new Array(z.length):null)),d.push(k(F,E,T,C,R,u?new Array(F.length):null));return{lines:h,points:d,rect:[M,O,D,L]}}static deserialize(e,n,a,l,u,{paths:{lines:h,points:d},rotation:f,thickness:m}){const b=[];let v,E,T,C,R;switch(f){case 0:R=lt._rescale,v=-e/a,E=n/l+1,T=1/a,C=-1/l;break;case 90:R=lt._rescaleAndSwap,v=-n/l,E=-e/a,T=1/l,C=1/a;break;case 180:R=lt._rescale,v=e/a+1,E=-n/l,T=-1/a,C=1/l;break;case 270:R=lt._rescaleAndSwap,v=n/l+1,E=e/a+1,T=-1/l,C=-1/a;break}if(!h){h=[];for(const O of d){const D=O.length;if(D===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(D===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const L=new Float32Array(3*(D-2));h.push(L);let[k,z,F,W]=O.subarray(0,4);L.set([NaN,NaN,NaN,NaN,k,z],0);for(let Y=4;Y<D;Y+=2){const it=O[Y],J=O[Y+1];L.set(lt.createBezierPoints(k,z,F,W,it,J),(Y-2)*3),[k,z,F,W]=[F,W,it,J]}}}for(let O=0,D=h.length;O<D;O++)b.push({line:R(h[O].map(L=>L??NaN),v,E,T,C),points:R(d[O].map(L=>L??NaN),v,E,T,C)});const M=new this.prototype.constructor;return M.build(b,a,l,1,f,m,u),M}get box(){return o(this,Pi)}updateProperty(e,n){return e==="stroke-width"?_(this,Ci,d2).call(this,n):null}updateParentDimensions([e,n],a){const[l,u]=_(this,Ci,za).call(this);A(this,ca,e),A(this,ua,n),A(this,od,a);const[h,d]=_(this,Ci,za).call(this),f=h-l,m=d-u,b=o(this,Pi);return b[0]-=f,b[1]-=m,b[2]+=2*f,b[3]+=2*m,b}updateRotation(e){return A(this,Np,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,Pi).map(lt.svgRound).join(" ")}get defaultProperties(){const[e,n]=o(this,Pi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=o(this,Pi);let a=0,l=0,u=0,h=0,d=0,f=0;switch(o(this,Np)){case 90:l=n/e,u=-e/n,d=e;break;case 180:a=-1,h=-1,d=e,f=n;break;case 270:l=-n/e,u=e/n,f=n;break;default:return""}return`matrix(${a} ${l} ${u} ${h} ${lt.svgRound(d)} ${lt.svgRound(f)})`}getPathResizingSVGProperties([e,n,a,l]){const[u,h]=_(this,Ci,za).call(this),[d,f,m,b]=o(this,Pi);if(Math.abs(m-u)<=lt.PRECISION||Math.abs(b-h)<=lt.PRECISION){const R=e+a/2-(d+m/2),M=n+l/2-(f+b/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${R} ${M})`}}}const v=(a-2*u)/(m-2*u),E=(l-2*h)/(b-2*h),T=m/a,C=b/l;return{path:{"transform-origin":`${lt.svgRound(d)} ${lt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${T} ${C}) translate(${lt.svgRound(u)} ${lt.svgRound(h)}) scale(${v} ${E}) translate(${lt.svgRound(-u)} ${lt.svgRound(-h)})`}}}getPathResizedSVGProperties([e,n,a,l]){const[u,h]=_(this,Ci,za).call(this),d=o(this,Pi),[f,m,b,v]=d;if(d[0]=e,d[1]=n,d[2]=a,d[3]=l,Math.abs(b-u)<=lt.PRECISION||Math.abs(v-h)<=lt.PRECISION){const M=e+a/2-(f+b/2),O=n+l/2-(m+v/2);for(const{line:D,points:L}of o(this,zn))lt._translate(D,M,O,D),lt._translate(L,M,O,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(a-2*u)/(b-2*u),T=(l-2*h)/(v-2*h),C=-E*(f+u)+e+u,R=-T*(m+h)+n+h;if(E!==1||T!==1||C!==0||R!==0)for(const{line:M,points:O}of o(this,zn))lt._rescale(M,C,R,E,T,M),lt._rescale(O,C,R,E,T,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[l,u]=a,h=o(this,Pi),d=e-h[0],f=n-h[1];if(o(this,ca)===l&&o(this,ua)===u)for(const{line:m,points:b}of o(this,zn))lt._translate(m,d,f,m),lt._translate(b,d,f,b);else{const m=o(this,ca)/l,b=o(this,ua)/u;A(this,ca,l),A(this,ua,u);for(const{line:v,points:E}of o(this,zn))lt._rescale(v,d,f,m,b,v),lt._rescale(E,d,f,m,b,E);h[2]*=m,h[3]*=b}return h[0]=e,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get defaultSVGProperties(){const e=o(this,Pi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Pi=new WeakMap,Np=new WeakMap,Lp=new WeakMap,zn=new WeakMap,ca=new WeakMap,ua=new WeakMap,od=new WeakMap,ld=new WeakMap,Dc=new WeakMap,Ci=new WeakSet,za=function(e=o(this,Dc)){const n=o(this,Lp)+e/2*o(this,od);return o(this,ld)%180===0?[n/o(this,ca),n/o(this,ua)]:[n/o(this,ua),n/o(this,ca)]},u2=function(){const[e,n,a,l]=o(this,Pi),[u,h]=_(this,Ci,za).call(this,0);return[e+u,n+h,a-2*u,l-2*h]},h2=function(){const e=A(this,Pi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of o(this,zn)){if(l.length<=12){for(let d=4,f=l.length;d<f;d+=6)rt.pointBoundingBox(l[d],l[d+1],e);continue}let u=l[4],h=l[5];for(let d=6,f=l.length;d<f;d+=6){const[m,b,v,E,T,C]=l.subarray(d,d+6);rt.bezierBoundingBox(u,h,m,b,v,E,T,C,e),u=T,h=C}}const[n,a]=_(this,Ci,za).call(this);e[0]=Gi(e[0]-n,0,1),e[1]=Gi(e[1]-a,0,1),e[2]=Gi(e[2]+n,0,1),e[3]=Gi(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},d2=function(e){const[n,a]=_(this,Ci,za).call(this);A(this,Dc,e);const[l,u]=_(this,Ci,za).call(this),[h,d]=[l-n,u-a],f=o(this,Pi);return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f};class Ly extends l2{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Ly(this._viewParameters);return t.updateAll(this),t}}var Ty,f2;const Hu=class Hu extends ly{constructor(e){super({...e,name:"inkEditor"});w(this,Ty);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){me.initialize(e,n),this._defaultDrawingOptions=new Ly(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Tt(this,"typesMap",new Map([[Ht.INK_THICKNESS,"stroke-width"],[Ht.INK_COLOR,"stroke"],[Ht.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,l,u){return new kN(e,n,a,l,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,l,u,h){return jp.deserialize(e,n,a,l,u,h)}static async deserialize(e,n,a){let l=null;if(e instanceof $S){const{data:{inkLists:h,rect:d,rotation:f,id:m,color:b,opacity:v,borderStyle:{rawWidth:E},popupRef:T,richText:C,contentsObj:R,creationDate:M,modificationDate:O},parent:{page:{pageNumber:D}}}=e;l=e={annotationType:Mt.INK,color:Array.from(b),thickness:E,opacity:v,paths:{points:h},boxes:null,pageIndex:D-1,rect:d.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:T,richText:C,comment:(R==null?void 0:R.str)||null,creationDate:M,modificationDate:O}}const u=await super.deserialize(e,n,a);return u._initialData=l,e.comment&&u.setCommentData(e),u}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new sy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ht.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=Hu.getDefaultDrawingOptions({stroke:rt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":h}}=this,d=Object.assign(super.serialize(e),{color:me._colorManager.convert(l),opacity:u,thickness:h,paths:{lines:n,points:a}});return this.addComment(d),e?(d.isCopy=!0,d):this.annotationElementId&&!_(this,Ty,f2).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Ty=new WeakSet,f2=function(e){const{color:n,thickness:a,opacity:l,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,d)=>h!==n[d])||e.thickness!==a||e.opacity!==l||e.pageIndex!==u},et(Hu,"_type","ink"),et(Hu,"_editorType",Mt.INK),et(Hu,"_defaultDrawingOptions",null);let CS=Hu;class TS extends jp{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const g0=8,pf=3;var Oc,$t,xS,Ns,g2,p2,MS,q0,m2,y2,b2,RS,DS,v2;class Ar{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},l,u,h,d){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const b=200,v=m.font=`${n} ${a} ${b}px ${e}`,{actualBoundingBoxLeft:E,actualBoundingBoxRight:T,actualBoundingBoxAscent:C,actualBoundingBoxDescent:R,fontBoundingBoxAscent:M,fontBoundingBoxDescent:O,width:D}=m.measureText(t),L=1.5,k=Math.ceil(Math.max(Math.abs(E)+Math.abs(T)||0,D)*L),z=Math.ceil(Math.max(Math.abs(C)+Math.abs(R)||b,Math.abs(M)+Math.abs(O)||b)*L);f=new OffscreenCanvas(k,z),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,k,z),m.fillStyle="black",m.fillText(t,k*(L-1)/2,z*(3-L)/2);const F=_(this,$t,RS).call(this,m.getImageData(0,0,k,z).data),W=_(this,$t,b2).call(this,F),Y=_(this,$t,DS).call(this,W),it=_(this,$t,MS).call(this,F,k,z,Y);return this.processDrawnLines({lines:{curves:it,width:k,height:z},pageWidth:l,pageHeight:u,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,l){const[u,h,d]=_(this,$t,v2).call(this,t),[f,m]=_(this,$t,y2).call(this,u,h,d,Math.hypot(h,d)*o(this,Oc).sigmaSFactor,o(this,Oc).sigmaR,o(this,Oc).kernelSize),b=_(this,$t,DS).call(this,m),v=_(this,$t,MS).call(this,f,h,d,b);return this.processDrawnLines({lines:{curves:v,width:h,height:d},pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:u,areContours:h}){a%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:m}=t,b=t.thickness??0,v=[],E=Math.min(e/f,n/m),T=E/e,C=E/n,R=[];for(const{points:O}of d){const D=u?_(this,$t,m2).call(this,O):O;if(!D)continue;R.push(D);const L=D.length,k=new Float32Array(L),z=new Float32Array(3*(L===2?2:L-2));if(v.push({line:z,points:k}),L===2){k[0]=D[0]*T,k[1]=D[1]*C,z.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[F,W,Y,it]=D;F*=T,W*=C,Y*=T,it*=C,k.set([F,W,Y,it],0),z.set([NaN,NaN,NaN,NaN,F,W],0);for(let J=4;J<L;J+=2){const ht=k[J]=D[J]*T,gt=k[J+1]=D[J+1]*C;z.set(lt.createBezierPoints(F,W,Y,it,ht,gt),(J-2)*3),[F,W,Y,it]=[Y,it,ht,gt]}}if(v.length===0)return null;const M=h?new TS:new jp;return M.build(v,e,n,1,a,h?0:b,l),{outline:M,newCurves:R,areContours:h,thickness:b,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:l}){let u=1/0,h=-1/0,d=0;for(const D of t){d+=D.length;for(let L=2,k=D.length;L<k;L++){const z=D[L]-D[L-2];u=Math.min(u,z),h=Math.max(h,z)}}let f;u>=-128&&h<=127?f=Int8Array:u>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const m=t.length,b=g0+pf*m,v=new Uint32Array(b);let E=0;v[E++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*f.BYTES_PER_ELEMENT,v[E++]=0,v[E++]=a,v[E++]=l,v[E++]=e?0:1,v[E++]=Math.max(0,Math.floor(n??0)),v[E++]=m,v[E++]=f.BYTES_PER_ELEMENT;for(const D of t)v[E++]=D.length-2,v[E++]=D[0],v[E++]=D[1];const T=new CompressionStream("deflate-raw"),C=T.writable.getWriter();await C.ready,C.write(v);const R=f.prototype.constructor;for(const D of t){const L=new R(D.length-2);for(let k=2,z=D.length;k<z;k++)L[k-2]=D[k]-D[k-2];C.write(L)}C.close();const M=await new Response(T.readable).arrayBuffer(),O=new Uint8Array(M);return mT(O)}static async decompressSignature(t){try{const e=QD(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,h=0;for await(const D of n)u||(u=new Uint8Array(new Uint32Array(D.buffer,0,4)[0])),u.set(D,h),h+=D.length;const d=new Uint32Array(u.buffer,0,u.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=d[2],b=d[3],v=d[4]===0,E=d[5],T=d[6],C=d[7],R=[],M=(g0+pf*T)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(C){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(u.buffer,M);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(u.buffer,M);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(u.buffer,M);break}h=0;for(let D=0;D<T;D++){const L=d[pf*D+g0],k=new Float32Array(L+2);R.push(k);for(let z=0;z<pf-1;z++)k[z]=d[pf*D+g0+z+1];for(let z=0;z<L;z++)k[z+2]=k[z]+O[h++]}return{areContours:v,thickness:E,outlines:R,width:m,height:b}}catch(e){return Ct(`decompressSignature: ${e}`),null}}}Oc=new WeakMap,$t=new WeakSet,xS=function(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a},Ns=new WeakMap,g2=function(t,e,n,a,l,u,h){const d=_(this,$t,xS).call(this,n,a,l,u);for(let f=0;f<8;f++){const m=(-f+d-h+16)%8,b=o(this,Ns)[2*m],v=o(this,Ns)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},p2=function(t,e,n,a,l,u,h){const d=_(this,$t,xS).call(this,n,a,l,u);for(let f=0;f<8;f++){const m=(f+d+h+16)%8,b=o(this,Ns)[2*m],v=o(this,Ns)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},MS=function(t,e,n,a){const l=t.length,u=new Int32Array(l);for(let m=0;m<l;m++)u[m]=t[m]<=a?1:0;for(let m=1;m<n-1;m++)u[m*e]=u[m*e+e-1]=0;for(let m=0;m<e;m++)u[m]=u[e*n-1-m]=0;let h=1,d;const f=[];for(let m=1;m<n-1;m++){d=1;for(let b=1;b<e-1;b++){const v=m*e+b,E=u[v];if(E===0)continue;let T=m,C=b;if(E===1&&u[v-1]===0)h+=1,C-=1;else if(E>=1&&u[v+1]===0)h+=1,C+=1,E>1&&(d=E);else{E!==1&&(d=Math.abs(E));continue}const R=[b,m],M=C===b+1,O={isHole:M,points:R,id:h,parent:0};f.push(O);let D;for(const J of f)if(J.id===d){D=J;break}D?D.isHole?O.parent=M?D.parent:d:O.parent=M?d:D.parent:O.parent=M?d:0;const L=_(this,$t,g2).call(this,u,e,m,b,T,C,0);if(L===-1){u[v]=-h,u[v]!==1&&(d=Math.abs(u[v]));continue}let k=o(this,Ns)[2*L],z=o(this,Ns)[2*L+1];const F=m+k,W=b+z;T=F,C=W;let Y=m,it=b;for(;;){const J=_(this,$t,p2).call(this,u,e,Y,it,T,C,1);k=o(this,Ns)[2*J],z=o(this,Ns)[2*J+1];const ht=Y+k,gt=it+z;R.push(gt,ht);const mt=Y*e+it;if(u[mt+1]===0?u[mt]=-h:u[mt]===1&&(u[mt]=h),ht===m&&gt===b&&Y===F&&it===W){u[v]!==1&&(d=Math.abs(u[v]));break}else T=Y,C=it,Y=ht,it=gt}}}return f},q0=function(t,e,n,a){if(n-e<=4){for(let F=e;F<n-2;F+=2)a.push(t[F],t[F+1]);return}const l=t[e],u=t[e+1],h=t[n-4]-l,d=t[n-3]-u,f=Math.hypot(h,d),m=h/f,b=d/f,v=m*u-b*l,E=d/h,T=1/f,C=Math.atan(E),R=Math.cos(C),M=Math.sin(C),O=T*(Math.abs(R)+Math.abs(M)),D=T*(1-O+O**2),L=Math.max(Math.atan(Math.abs(M+R)*D),Math.atan(Math.abs(M-R)*D));let k=0,z=e;for(let F=e+2;F<n-2;F+=2){const W=Math.abs(v-m*t[F+1]+b*t[F]);W>k&&(z=F,k=W)}k>(f*L)**2?(_(this,$t,q0).call(this,t,e,z+2,a),_(this,$t,q0).call(this,t,z,n,a)):a.push(l,u)},m2=function(t){const e=[],n=t.length;return _(this,$t,q0).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},y2=function(t,e,n,a,l,u){const h=new Float32Array(u**2),d=-2*a**2,f=u>>1;for(let C=0;C<u;C++){const R=(C-f)**2;for(let M=0;M<u;M++)h[C*u+M]=Math.exp((R+(M-f)**2)/d)}const m=new Float32Array(256),b=-2*l**2;for(let C=0;C<256;C++)m[C]=Math.exp(C**2/b);const v=t.length,E=new Uint8Array(v),T=new Uint32Array(256);for(let C=0;C<n;C++)for(let R=0;R<e;R++){const M=C*e+R,O=t[M];let D=0,L=0;for(let z=0;z<u;z++){const F=C+z-f;if(!(F<0||F>=n))for(let W=0;W<u;W++){const Y=R+W-f;if(Y<0||Y>=e)continue;const it=t[F*e+Y],J=h[z*u+W]*m[Math.abs(it-O)];D+=it*J,L+=J}}const k=E[M]=Math.round(D/L);T[k]++}return[E,T]},b2=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},RS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,d=n.length;h<d;h++){const f=n[h]=t[h<<2];a=Math.max(a,f),l=Math.min(l,f)}const u=255/(a-l);for(let h=0,d=n.length;h<d;h++)n[h]=(n[h]-l)*u;return n},DS=function(t){let e,n=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let u=l,h=l;for(e=l;e<256;e++){const d=t[e];d>n&&(e-u>a&&(a=e-u,h=e-1),n=d,u=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},v2=function(t){const e=t,{width:n,height:a}=t,{maxDim:l}=o(this,Oc);let u=n,h=a;if(n>l||a>l){let v=n,E=a,T=Math.log2(Math.max(n,a)/l);const C=Math.floor(T);T=T===C?C-1:C;for(let M=0;M<T;M++){u=Math.ceil(v/2),h=Math.ceil(E/2);const O=new OffscreenCanvas(u,h);O.getContext("2d").drawImage(t,0,0,v,E,0,0,u,h),v=u,E=h,t!==e&&t.close(),t=O.transferToImageBitmap()}const R=Math.min(l/u,l/h);u=Math.round(u*R),h=Math.round(h*R)}const f=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,u,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,u,h);const m=f.getImageData(0,0,u,h).data;return[_(this,$t,RS).call(this,m),u,h]},w(Ar,$t),w(Ar,Oc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Ar,Ns,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class QS extends l2{constructor(){super(),super.updateProperties({fill:me._defaultLineColor,"stroke-width":0})}clone(){const t=new QS;return t.updateAll(this),t}}class WS extends Ly{constructor(t){super(t),super.updateProperties({stroke:me._defaultLineColor,"stroke-width":1})}clone(){const t=new WS(this._viewParameters);return t.updateAll(this),t}}var Io,ha,zo,Nc;const vn=class vn extends ly{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Io,!1);w(this,ha,null);w(this,zo,null);w(this,Nc,null);this._willKeepAspectRatio=!0,A(this,zo,e.signatureData||null),A(this,ha,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){me.initialize(e,n),this._defaultDrawingOptions=new QS,this._defaultDrawnSignatureOptions=new WS(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!o(this,ha)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(o(this,zo)){const{lines:l,mustSmooth:u,areContours:h,description:d,uuid:f,heightInPage:m}=o(this,zo),{rawDims:{pageWidth:b,pageHeight:v},rotation:E}=this.parent.viewport,T=Ar.processDrawnLines({lines:l,pageWidth:b,pageHeight:v,rotation:E,innerMargin:vn._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(T,m,d,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:o(this,ha)||""}));return a&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){A(this,Nc,e),this.addEditToolbar()}getUuid(){return o(this,Nc)}get description(){return o(this,ha)}set description(e){A(this,ha,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:a,width:l,height:u}=o(this,zo),h=Math.max(l,u),d=Ar.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:a,width:l,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,a,l){const{x:u,y:h}=this,{outline:d}=A(this,zo,e);A(this,Io,d instanceof TS),this.description=a;let f;o(this,Io)?f=vn.getDefaultDrawingOptions():(f=vn._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:f});const[,m]=this.pageDimensions;let b=n/m;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ar.process(e,n,a,l,vn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:a,pageHeight:l},rotation:u}=this.parent.viewport;return Ar.extractContoursFromText(e,n,a,l,u,vn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ar.processDrawnLines({lines:e,pageWidth:n,pageHeight:a,rotation:l,innerMargin:vn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=vn.getDefaultDrawingOptions():(this._drawingOptions=vn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":l}}=this,u=Object.assign(super.serialize(e),{isSignature:!0,areContours:o(this,Io),color:[0,0,0],thickness:o(this,Io)?0:l});return this.addComment(u),e?(u.paths={lines:n,points:a},u.uuid=o(this,Nc),u.isCopy=!0):u.lines=n,o(this,ha)&&(u.accessibilityData={type:"Figure",alt:o(this,ha)}),u}static deserializeDraw(e,n,a,l,u,h){return h.areContours?TS.deserialize(e,n,a,l,u,h):jp.deserialize(e,n,a,l,u,h)}static async deserialize(e,n,a){var u;const l=await super.deserialize(e,n,a);return A(l,Io,e.areContours),l.description=((u=e.accessibilityData)==null?void 0:u.alt)||"",A(l,Nc,e.uuid),l}};Io=new WeakMap,ha=new WeakMap,zo=new WeakMap,Nc=new WeakMap,et(vn,"_type","signature"),et(vn,"_editorType",Mt.SIGNATURE),et(vn,"_defaultDrawingOptions",null);let OS=vn;var _e,hi,Fo,pr,Uo,cd,mr,Lc,da,Fn,ud,qt,Bf,If,V0,Y0,X0,LS,K0,A2;class NS extends me{constructor(e){super({...e,name:"stampEditor"});w(this,qt);w(this,_e,null);w(this,hi,null);w(this,Fo,null);w(this,pr,null);w(this,Uo,null);w(this,cd,"");w(this,mr,null);w(this,Lc,!1);w(this,da,null);w(this,Fn,!1);w(this,ud,!1);A(this,pr,e.bitmapUrl),A(this,Uo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){me.initialize(e,n)}static isHandlingMimeForPasting(e){return yA.includes(e)}static paste(e,n){n.pasteEditor({mode:Mt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:u,height:h}=e||this.copyCanvas(null,null,!0).imageData,d=await a.guess({name:"altText",request:{data:l,width:u,height:h,channels:l.length/(u*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;o(this,hi)&&(A(this,_e,null),this._uiManager.imageManager.deleteId(o(this,hi)),(e=o(this,mr))==null||e.remove(),A(this,mr,null),o(this,da)&&(clearTimeout(o(this,da)),A(this,da,null))),super.remove()}rebuild(){if(!this.parent){o(this,hi)&&_(this,qt,V0).call(this);return}super.rebuild(),this.div!==null&&(o(this,hi)&&o(this,mr)===null&&_(this,qt,V0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,Fo)||o(this,_e)||o(this,pr)||o(this,Uo)||o(this,hi)||o(this,Lc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),o(this,Lc)||(o(this,_e)?_(this,qt,Y0).call(this):_(this,qt,V0).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:a,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(A(this,hi,a),l&&A(this,_e,l),A(this,Lc,!1),_(this,qt,Y0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,da)!==null&&clearTimeout(o(this,da)),A(this,da,setTimeout(()=>{A(this,da,null),_(this,qt,LS).call(this)},200))}copyCanvas(e,n,a=!1){e||(e=224);const{width:l,height:u}=o(this,_e),h=new ga;let d=o(this,_e),f=l,m=u,b=null;if(n){if(l>n||u>n){const F=Math.min(n/l,n/u);f=Math.floor(l*F),m=Math.floor(u*F)}b=document.createElement("canvas");const E=b.width=Math.ceil(f*h.sx),T=b.height=Math.ceil(m*h.sy);o(this,Fn)||(d=_(this,qt,X0).call(this,E,T));const C=b.getContext("2d");C.filter=this._uiManager.hcmFilter;let R="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":iO.isDarkMode&&(R="#8f8f9d",M="#42414d");const O=15,D=O*h.sx,L=O*h.sy,k=new OffscreenCanvas(D*2,L*2),z=k.getContext("2d");z.fillStyle=R,z.fillRect(0,0,D*2,L*2),z.fillStyle=M,z.fillRect(0,0,D,L),z.fillRect(D,L,D,L),C.fillStyle=C.createPattern(k,"repeat"),C.fillRect(0,0,E,T),C.drawImage(d,0,0,d.width,d.height,0,0,E,T)}let v=null;if(a){let E,T;if(h.symmetric&&d.width<e&&d.height<e)E=d.width,T=d.height;else if(d=o(this,_e),l>e||u>e){const M=Math.min(e/l,e/u);E=Math.floor(l*M),T=Math.floor(u*M),o(this,Fn)||(d=_(this,qt,X0).call(this,E,T))}const R=new OffscreenCanvas(E,T).getContext("2d",{willReadFrequently:!0});R.drawImage(d,0,0,d.width,d.height,0,0,E,T),v={width:E,height:T,data:R.getImageData(0,0,E,T).data}}return{canvas:b,width:f,height:m,imageData:v}}static async deserialize(e,n,a){var R;let l=null,u=!1;if(e instanceof Ix){const{data:{rect:M,rotation:O,id:D,structParent:L,popupRef:k,richText:z,contentsObj:F,creationDate:W,modificationDate:Y},container:it,parent:{page:{pageNumber:J}},canvas:ht}=e;let gt,mt;ht?(delete e.canvas,{id:gt,bitmap:mt}=a.imageManager.getFromCanvas(it.id,ht),ht.remove()):(u=!0,e._hasNoCanvas=!0);const vt=((R=await n._structTree.getAriaAttributes(`${Iu}${D}`))==null?void 0:R.get("aria-label"))||"";l=e={annotationType:Mt.STAMP,bitmapId:gt,bitmap:mt,pageIndex:J-1,rect:M.slice(0),rotation:O,annotationElementId:D,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:vt},isSvg:!1,structParent:L,popupRef:k,richText:z,comment:(F==null?void 0:F.str)||null,creationDate:W,modificationDate:Y}}const h=await super.deserialize(e,n,a),{rect:d,bitmap:f,bitmapUrl:m,bitmapId:b,isSvg:v,accessibilityData:E}=e;u?(a.addMissingCanvas(e.id,h),A(h,Lc,!0)):b&&a.imageManager.isValidId(b)?(A(h,hi,b),f&&A(h,_e,f)):A(h,pr,m),A(h,Fn,v);const[T,C]=h.pageDimensions;return h.width=(d[2]-d[0])/T,h.height=(d[3]-d[1])/C,E&&(h.altTextData=E),h._initialData=l,e.comment&&h.setCommentData(e),A(h,ud,!!l),h}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a=Object.assign(super.serialize(e),{bitmapId:o(this,hi),isSvg:o(this,Fn)});if(this.addComment(a),e)return a.bitmapUrl=_(this,qt,K0).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:l,altText:u}=this.serializeAltText(!1);if(!l&&u&&(a.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const d=_(this,qt,A2).call(this,a);return d.isSame?null:(d.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1,a.id=this.annotationElementId,delete a.bitmapId,a)}if(n===null)return a;n.stamps||(n.stamps=new Map);const h=o(this,Fn)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(o(this,hi)))n.stamps.set(o(this,hi),{area:h,serialized:a}),a.bitmap=_(this,qt,K0).call(this,!1);else if(o(this,Fn)){const d=n.stamps.get(o(this,hi));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,qt,K0).call(this,!1))}return a}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}_e=new WeakMap,hi=new WeakMap,Fo=new WeakMap,pr=new WeakMap,Uo=new WeakMap,cd=new WeakMap,mr=new WeakMap,Lc=new WeakMap,da=new WeakMap,Fn=new WeakMap,ud=new WeakMap,qt=new WeakSet,Bf=function(e,n=!1){if(!e){this.remove();return}A(this,_e,e.bitmap),n||(A(this,hi,e.id),A(this,Fn,e.isSvg)),e.file&&A(this,cd,e.file.name),_(this,qt,Y0).call(this)},If=function(){if(A(this,Fo,null),this._uiManager.enableWaiting(!1),!!o(this,mr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,_e)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,_e)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},V0=function(){if(o(this,hi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,hi)).then(a=>_(this,qt,Bf).call(this,a,!0)).finally(()=>_(this,qt,If).call(this));return}if(o(this,pr)){const a=o(this,pr);A(this,pr,null),this._uiManager.enableWaiting(!0),A(this,Fo,this._uiManager.imageManager.getFromUrl(a).then(l=>_(this,qt,Bf).call(this,l)).finally(()=>_(this,qt,If).call(this)));return}if(o(this,Uo)){const a=o(this,Uo);A(this,Uo,null),this._uiManager.enableWaiting(!0),A(this,Fo,this._uiManager.imageManager.getFromFile(a).then(l=>_(this,qt,Bf).call(this,l)).finally(()=>_(this,qt,If).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=yA.join(",");const n=this._uiManager._signal;A(this,Fo,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,qt,Bf).call(this,l)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>_(this,qt,If).call(this))),e.click()},Y0=function(){var f;const{div:e}=this;let{width:n,height:a}=o(this,_e);const[l,u]=this.pageDimensions,h=.75;if(this.width)n=this.width*l,a=this.height*u;else if(n>h*l||a>h*u){const m=Math.min(h*l/n,h*u/a);n*=m,a*=m}this._uiManager.enableWaiting(!1);const d=A(this,mr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/l,this.height=a/u,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),_(this,qt,LS).call(this),o(this,ud)||(this.parent.addUndoableEditor(this),A(this,ud,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,cd)&&this.div.setAttribute("aria-description",o(this,cd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},X0=function(e,n){const{width:a,height:l}=o(this,_e);let u=a,h=l,d=o(this,_e);for(;u>2*e||h>2*n;){const f=u,m=h;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const b=new OffscreenCanvas(u,h);b.getContext("2d").drawImage(d,0,0,f,m,0,0,u,h),d=b.transferToImageBitmap()}return d},LS=function(){const[e,n]=this.parentDimensions,{width:a,height:l}=this,u=new ga,h=Math.ceil(a*e*u.sx),d=Math.ceil(l*n*u.sy),f=o(this,mr);if(!f||f.width===h&&f.height===d)return;f.width=h,f.height=d;const m=o(this,Fn)?o(this,_e):_(this,qt,X0).call(this,h,d),b=f.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(m,0,0,m.width,m.height,0,0,h,d)},K0=function(e){if(e){if(o(this,Fn)){const l=this._uiManager.imageManager.getSvgUrl(o(this,hi));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=o(this,_e),n.getContext("2d").drawImage(o(this,_e),0,0),n.toDataURL()}if(o(this,Fn)){const[n,a]=this.pageDimensions,l=Math.round(this.width*n*Xo.PDF_TO_CSS_UNITS),u=Math.round(this.height*a*Xo.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(l,u);return h.getContext("2d").drawImage(o(this,_e),0,0,o(this,_e).width,o(this,_e).height,0,0,l,u),h.transferToImageBitmap()}return structuredClone(o(this,_e))},A2=function(e){var h;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,l=e.pageIndex===n,u=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===a;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&l&&u,isSameAltText:u}},et(NS,"_type","stamp"),et(NS,"_editorType",Mt.STAMP);var kc,hd,Po,Ho,yr,on,jo,dd,fd,Ls,br,di,vr,Go,gd,ft,qo,de,BS,S2,qs,IS,zS,$0;const Es=class Es{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:l,annotationLayer:u,drawLayer:h,textLayer:d,viewport:f,l10n:m}){w(this,de);w(this,kc);w(this,hd,!1);w(this,Po,null);w(this,Ho,null);w(this,yr,null);w(this,on,new Map);w(this,jo,!1);w(this,dd,!1);w(this,fd,!1);w(this,Ls,null);w(this,br,null);w(this,di,null);w(this,vr,null);w(this,Go,null);w(this,gd,-1);w(this,ft);const b=[...o(Es,qo).values()];if(!Es._initialized){Es._initialized=!0;for(const v of b)v.initialize(m,t)}t.registerEditorTypes(b),A(this,ft,t),this.pageIndex=e,this.div=n,A(this,kc,l),A(this,Po,u),this.viewport=f,A(this,di,d),this.drawLayer=h,this._structTree=a,o(this,ft).addLayer(this)}get isEmpty(){return o(this,on).size===0}get isInvisible(){return this.isEmpty&&o(this,ft).getMode()===Mt.NONE}updateToolbar(t){o(this,ft).updateToolbar(t)}updateMode(t=o(this,ft).getMode()){switch(_(this,de,$0).call(this),t){case Mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Mt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of o(Es,qo).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,di))==null?void 0:e.div)}setEditingState(t){o(this,ft).setEditingState(t)}addCommands(t){o(this,ft).addCommands(t)}cleanUndoStack(t){o(this,ft).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,Po))==null||e.togglePointerEvents(t)}async enable(){var n;A(this,fd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=o(this,Go))==null||n.abort(),A(this,Go,null);const t=new Set;for(const a of o(this,de,BS))a.enableEditing(),a.show(!0),a.annotationElementId&&(o(this,ft).removeChangedExistingAnnotation(a),t.add(a.annotationElementId));const e=o(this,Po);if(e)for(const a of e.getEditableAnnotations()){if(a.hide(),o(this,ft).isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;const l=await this.deserialize(a);l&&(this.addOrRebuild(l),l.enableEditing())}A(this,fd,!1),o(this,ft)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var a;if(A(this,dd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),o(this,di)&&!o(this,Go)){A(this,Go,new AbortController);const l=o(this,ft).combinedSignal(o(this,Go));o(this,di).div.addEventListener("pointerdown",u=>{const{clientX:d,clientY:f,timeStamp:m}=u,b=o(this,gd);if(m-b>500){A(this,gd,m);return}A(this,gd,-1);const{classList:v}=this.div;v.toggle("getElements",!0);const E=document.elementsFromPoint(d,f);if(v.toggle("getElements",!1),!this.div.contains(E[0]))return;let T;const C=new RegExp(`^${Pf}[0-9]+$`);for(const M of E)if(C.test(M.id)){T=M.id;break}if(!T)return;const R=o(this,on).get(T);(R==null?void 0:R.annotationElementId)===null&&(u.stopPropagation(),u.preventDefault(),R.dblclick(u))},{signal:l,capture:!0})}const t=o(this,Po),e=[];if(t){const l=new Map,u=new Map;for(const d of o(this,de,BS)){if(d.disableEditing(),!d.annotationElementId){e.push(d);continue}if(d.serialize()!==null){l.set(d.annotationElementId,d);continue}else u.set(d.annotationElementId,d);(a=this.getEditableAnnotation(d.annotationElementId))==null||a.show(),d.remove()}const h=t.getEditableAnnotations();for(const d of h){const{id:f}=d.data;if(o(this,ft).isDeletedAnnotationElement(f)){d.updateEdited({deleted:!0});continue}let m=u.get(f);if(m){m.resetAnnotationElement(d),m.show(!1),d.show();continue}m=l.get(f),m&&(o(this,ft).addChangedExistingAnnotation(m),m.renderAnnotationElement(d)&&m.show(!1)),d.show()}}_(this,de,$0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const l of o(Es,qo).values())n.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),A(this,dd,!1)}getEditableAnnotation(t){var e;return((e=o(this,Po))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,ft).getActive()!==t&&o(this,ft).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,di))!=null&&t.div&&!o(this,vr)){A(this,vr,new AbortController);const e=o(this,ft).combinedSignal(o(this,vr));o(this,di).div.addEventListener("pointerdown",_(this,de,S2).bind(this),{signal:e}),o(this,di).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,di))!=null&&t.div&&o(this,vr)&&(o(this,vr).abort(),A(this,vr,null),o(this,di).div.classList.remove("highlighting"))}enableClick(){if(o(this,Ho))return;A(this,Ho,new AbortController);const t=o(this,ft).combinedSignal(o(this,Ho));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,Ho))==null||t.abort(),A(this,Ho,null)}attach(t){o(this,on).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,ft).isDeletedAnnotationElement(e)&&o(this,ft).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,on).delete(t.id),(e=o(this,kc))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,dd)&&t.annotationElementId&&o(this,ft).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,ft).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,ft).addDeletedAnnotationElement(t),me.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,ft).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,fd)),o(this,ft).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,yr)&&(t._focusEventsAllowed=!1,A(this,yr,setTimeout(()=>{A(this,yr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,ft)._signal}),e.focus())},0))),t._structTreeParentId=(n=o(this,kc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of o(this,on).values())if(e.uid===t)return e;return null}getNextId(){return o(this,ft).getId()}combinedSignal(t){return o(this,ft).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,de,qs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await o(this,ft).updateMode(t.mode);const{offsetX:n,offsetY:a}=_(this,de,zS).call(this),l=this.getNextId(),u=_(this,de,IS).call(this,{parent:this,id:l,x:n,y:a,uiManager:o(this,ft),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=o(Es,qo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,ft)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),l=_(this,de,IS).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:o(this,ft),isCentered:e,...n});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(_(this,de,zS).call(this),!0,t)}setSelected(t){o(this,ft).setSelected(t)}toggleSelected(t){o(this,ft).toggleSelected(t)}unselect(t){o(this,ft).unselect(t)}pointerup(t){var a;const{isMac:e}=ii.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!o(this,jo)||(A(this,jo,!1),(a=o(this,de,qs))!=null&&a.isDrawer&&o(this,de,qs).supportMultipleDrawings))return;if(!o(this,hd)){A(this,hd,!0);return}const n=o(this,ft).getMode();if(n===Mt.STAMP||n===Mt.SIGNATURE){o(this,ft).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(o(this,ft).getMode()===Mt.HIGHLIGHT&&this.enableTextSelection(),o(this,jo)){A(this,jo,!1);return}const{isMac:e}=ii.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,jo,!0),(a=o(this,de,qs))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=o(this,ft).getActive();A(this,hd,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),o(this,Ls)){o(this,de,qs).startDrawing(this,o(this,ft),!1,t);return}o(this,ft).setCurrentDrawingSession(this),A(this,Ls,new AbortController);const e=o(this,ft).combinedSignal(o(this,Ls));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,br,null),this.commitOrRemove())},{signal:e}),o(this,de,qs).startDrawing(this,o(this,ft),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,br,e);return}o(this,br)&&setTimeout(()=>{var e;(e=o(this,br))==null||e.focus(),A(this,br,null)},0)}endDrawingSession(t=!1){return o(this,Ls)?(o(this,ft).setCurrentDrawingSession(null),o(this,Ls).abort(),A(this,Ls,null),A(this,br,null),o(this,de,qs).endDrawing(t)):null}findNewParent(t,e,n){const a=o(this,ft).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return o(this,Ls)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,Ls)&&o(this,de,qs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,ft).getActive())==null?void 0:t.parent)===this&&(o(this,ft).commitOrRemove(),o(this,ft).setActiveEditor(null)),o(this,yr)&&(clearTimeout(o(this,yr)),A(this,yr,null));for(const n of o(this,on).values())(e=o(this,kc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,on).clear(),o(this,ft).removeLayer(this)}render({viewport:t}){this.viewport=t,zc(this.div,t);for(const e of o(this,ft).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,ft).commitOrRemove(),_(this,de,$0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,zc(this.div,{rotation:n}),e!==n)for(const a of o(this,on).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,ft).viewParameters.realScale}};kc=new WeakMap,hd=new WeakMap,Po=new WeakMap,Ho=new WeakMap,yr=new WeakMap,on=new WeakMap,jo=new WeakMap,dd=new WeakMap,fd=new WeakMap,Ls=new WeakMap,br=new WeakMap,di=new WeakMap,vr=new WeakMap,Go=new WeakMap,gd=new WeakMap,ft=new WeakMap,qo=new WeakMap,de=new WeakSet,BS=function(){return o(this,on).size!==0?o(this,on).values():o(this,ft).getEditors(this.pageIndex)},S2=function(t){o(this,ft).unselectAll();const{target:e}=t;if(e===o(this,di).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,di).div.contains(e)){const{isMac:n}=ii.platform;if(t.button!==0||t.ctrlKey&&n)return;o(this,ft).showAllEditors("highlight",!0,!0),o(this,di).div.classList.add("free"),this.toggleDrawing(),oy.startHighlighting(this,o(this,ft).direction==="ltr",{target:o(this,di).div,x:t.x,y:t.y}),o(this,di).div.addEventListener("pointerup",()=>{o(this,di).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,ft)._signal}),t.preventDefault()}},qs=function(){return o(Es,qo).get(o(this,ft).getMode())},IS=function(t){const e=o(this,de,qs);return e?new e.prototype.constructor(t):null},zS=function(){const{x:t,y:e,width:n,height:a}=this.boundingClientRect,l=Math.max(0,t),u=Math.max(0,e),h=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),f=(l+h)/2-t,m=(u+d)/2-e,[b,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:b,offsetY:v}},$0=function(){for(const t of o(this,on).values())t.isEmpty()&&t.remove()},et(Es,"_initialized",!1),w(Es,qo,new Map([pS,CS,NS,oy,OS].map(t=>[t._editorType,t])));let kS=Es;var ks,Hi,Bc,kp,xy,E2,pa,US,w2,PS;const Ze=class Ze{constructor({pageIndex:t}){w(this,pa);w(this,ks,null);w(this,Hi,new Map);w(this,Bc,new Map);this.pageIndex=t}setParent(t){if(!o(this,ks)){A(this,ks,t);return}if(o(this,ks)!==t){if(o(this,Hi).size>0)for(const e of o(this,Hi).values())e.remove(),t.append(e);A(this,ks,t)}}static get _svgFactory(){return Tt(this,"_svgFactory",new ay)}draw(t,e=!1,n=!1){const a=Qe(Ze,kp)._++,l=_(this,pa,US).call(this),u=Ze._svgFactory.createElement("defs");l.append(u);const h=Ze._svgFactory.createElement("path");u.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,Bc).set(a,h);const f=n?_(this,pa,w2).call(this,u,d):null,m=Ze._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(l,t),o(this,Hi).set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Qe(Ze,kp)._++,a=_(this,pa,US).call(this),l=Ze._svgFactory.createElement("defs");a.append(l);const u=Ze._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${n}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const b=Ze._svgFactory.createElement("mask");l.append(b),d=`mask_p${this.pageIndex}_${n}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const v=Ze._svgFactory.createElement("rect");b.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const E=Ze._svgFactory.createElement("use");b.append(E),E.setAttribute("href",`#${h}`),E.setAttribute("stroke","none"),E.setAttribute("fill","black"),E.setAttribute("fill-rule","nonzero"),E.classList.add("mask")}const f=Ze._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return a.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),o(this,Hi).set(n,a),n}finalizeDraw(t,e){o(this,Bc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:a,rootClass:l,path:u}=e,h=typeof t=="number"?o(this,Hi).get(t):t;if(h){if(n&&_(this,pa,PS).call(this,h,n),a&&_(d=Ze,xy,E2).call(d,h,a),l){const{classList:f}=h;for(const[m,b]of Object.entries(l))f.toggle(m,b)}if(u){const m=h.firstElementChild.firstElementChild;_(this,pa,PS).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const n=o(this,Hi).get(t);n&&(o(e,ks).append(n),o(this,Hi).delete(t),o(e,Hi).set(t,n))}remove(t){o(this,Bc).delete(t),o(this,ks)!==null&&(o(this,Hi).get(t).remove(),o(this,Hi).delete(t))}destroy(){A(this,ks,null);for(const t of o(this,Hi).values())t.remove();o(this,Hi).clear(),o(this,Bc).clear()}};ks=new WeakMap,Hi=new WeakMap,Bc=new WeakMap,kp=new WeakMap,xy=new WeakSet,E2=function(t,[e,n,a,l]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*e}%`,u.width=`${100*a}%`,u.height=`${100*l}%`},pa=new WeakSet,US=function(){const t=Ze._svgFactory.create(1,1,!0);return o(this,ks).append(t),t.setAttribute("aria-hidden",!0),t},w2=function(t,e){const n=Ze._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const l=Ze._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a},PS=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},w(Ze,xy),w(Ze,kp,0);let FS=Ze;globalThis._pdfjsTestingUtils={HighlightOutliner:yS};globalThis.pdfjsLib={AbortException:Yo,AnnotationEditorLayer:kS,AnnotationEditorParamsType:Ht,AnnotationEditorType:Mt,AnnotationEditorUIManager:Fc,AnnotationLayer:fS,AnnotationMode:Jr,AnnotationType:Ve,applyOpacity:sO,build:hN,ColorPicker:ny,createValidAbsoluteUrl:dT,CSSConstants:nO,DOMSVGFactory:ay,DrawLayer:FS,FeatureTest:ii,fetchData:zp,findContrastColor:aO,getDocument:Ax,getFilenameFromUrl:WD,getPdfFilenameFromUrl:ZD,getRGB:Up,getUuid:pT,getXfaPageViewport:tO,GlobalWorkerOptions:fa,ImageKind:m0,InvalidPDFException:pA,isDataScheme:Oy,isPdfFile:qS,isValidExplicitDest:mO,MathClamp:Gi,noContextMenu:ms,normalizeUnicode:KD,OPS:Hf,OutputScale:ga,PasswordResponses:UD,PDFDataRangeTransport:Sx,PDFDateString:W0,PDFWorker:qf,PermissionFlag:FD,PixelsPerInch:Xo,RenderingCancelledException:GS,renderRichText:bT,ResponseException:Q0,setLayerDimensions:zc,shadow:Tt,SignatureExtractor:Ar,stopEvent:Be,SupportedImageMimeTypes:yA,TextLayer:Gf,TouchManager:J0,updateUrlHash:fT,Util:rt,VerbosityLevel:My,version:_x,XfaLayer:yT};const BN="/PDF-Question-Extractor/assets/pdf.worker.min-LyOxJPrg.mjs";fa.workerSrc=BN;const IN=p=>{const t=p||"AIzaSyB3Qk5Kb0XaMCiHz6FoLt31igiORnvwH5M";return new zD(t)},zN=async p=>{const t=await p.arrayBuffer(),e=await Ax({data:t,cMapUrl:`https://unpkg.com/pdfjs-dist@${_x}/cmaps/`,cMapPacked:!0}).promise;let n="";for(let a=1;a<=e.numPages;a++){const h=(await(await e.getPage(a)).getTextContent()).items.map(d=>d.str).join(" ");n+=`
--- Page ${a} ---
${h}
`}return n},FN=async(p,t,e)=>{try{const a=(await Promise.all(p.map(zN))).join(`

=== NEXT FILE ===

`),l=`
            AI.
       PDF   ,      .
      
      **:   ,        .**
      **:      ,     .**

      [  -  ]
      1. ** **:      . (     .)
      2. ** **: 18 45(  )   .
      3. ** **:     '  '  .
      4. **/ **:     **(~) **     .
      5. ** **:   ****  .
      6. ** **: 1 17()     .

      [ :  ]
        **   ** .
          \`<h2>[ ]</h2>\`  .

      [  ]
      - **, , (~)**     .
      -        \`<p>\`    .
      - ** **:    \`<div class="source">...</div>\` (  ) .
      - **/**:   \`<div class="answer-box">\`  . (,      )

      [HTML  ]
      <h2>[ ]</h2>
      <div class="question-item">
        <div class="source">[Page 3]</div>
        <div class="question-title"><strong>18.</strong>      ?</div>
        <div class="passage">
          Dear members, ... ( ) ...
        </div>
        <ol class="choices">
          <li>  1</li>
          <li>  2</li>
          ...
        </ol>
        <!--     -->
        <div class="answer-box">
          <strong>[  ]</strong><br/>
          : <br/>
          : ...<br/>
          : ...
        </div>
      </div>
      <hr/>

      [    ]
      "${t}"
      (:  /     ,      '  '     .)

      [ PDF  ]
      ${a}
    `,u=IN(e),h=e||"AIzaSyB3Qk5Kb0XaMCiHz6FoLt31igiORnvwH5M",d=h.length>10?`${h.substring(0,10)}...`:" ",f=["gemini-1.5-flash","gemini-1.5-pro"];let m=null;const b=T=>new Promise(C=>setTimeout(C,T));for(const T of f)try{console.log(`Checking model: ${T} with key ${d}`);const C=u.getGenerativeModel({model:T});let R=0;const M=3;for(;R<=M;){try{return(await(await C.generateContent(l)).response).text()||"<p>    .</p>"}catch(O){const D=String(O);if(console.warn(`Attempt ${R+1} for ${T} failed: ${D}`),(D.includes("429")||D.includes("Quota")||D.includes("rate limit")||D.includes("503"))&&R<M){console.warn(`Model ${T} busy (Quota/Rate limit), retrying in ${1e4/1e3}s...`),await b(1e4),R++;continue}throw O}break}}catch(C){console.warn(`Model ${T} failed:`,C),m=C;const R=String(C);if(R.includes("404")||R.includes("not found")||R.includes("Quota")||R.includes("429"))continue;break}console.error("All models failed:",m);let v="  AI    .";const E=String(m);throw E.includes("Quota")||E.includes("429")||E.includes("503")?v=`
         <strong>[  ]</strong><br/>
           AI   (Quota)  .<br/>
         AI      .<br/><br/>
         <b> :</b><br/>
         1. <strong> 1~2  .</strong> (  )<br/>
         2.    '  ' .<br/>
         3.    (100 ),   .
         `:E.includes("404")||E.includes("not found")||E.includes("403")||E.includes("permission")?v+=`
        <br/><br/>
        <div class="text-left text-sm bg-white p-3 rounded border border-red-200 mt-2">
            <strong>[ ]</strong><br/>
            - <strong> API :</strong> ${d}<br/>
            - <strong> :</strong> ${m instanceof Error?m.message:String(m)}<br/><br/>
            
            <strong>[ ]</strong><br/>
            API  ,    .<br/>
               ,     .
        </div>
        `:v+=`  : ${m instanceof Error?m.message:String(m)}`,new Error(v)}catch(n){console.error("Gemini API Error:",n);let a=n instanceof Error?n.message:String(n);throw(a.includes("413")||a.includes("Too Large"))&&(a+=" (   .   .)"),a.includes("Setting up fake worker failed")&&(a="PDF    .   ."),a.includes("not found")&&(a+=" (AI    . API    .)"),new Error(`  : ${a}`)}};var ai=(p=>(p.IDLE="IDLE",p.UPLOADING="UPLOADING",p.PROCESSING="PROCESSING",p.COMPLETE="COMPLETE",p.ERROR="ERROR",p))(ai||{});const UN=({files:p,onFilesSelected:t,onRemoveFile:e,disabled:n})=>{const a=u=>{u.target.files&&u.target.files.length>0&&(t(Array.from(u.target.files)),u.target.value="")},l=u=>{if(u===0)return"0 Bytes";const h=1024,d=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(u)/Math.log(h));return parseFloat((u/Math.pow(h,f)).toFixed(2))+" "+d[f]};return tt.jsxs("div",{className:"w-full space-y-4",children:[tt.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${n?"bg-gray-100 border-gray-300":"border-indigo-300 hover:bg-indigo-50 hover:border-indigo-500"}`,children:[tt.jsx("input",{type:"file",accept:"application/pdf",multiple:!0,onChange:a,disabled:n,className:"hidden",id:"file-upload"}),tt.jsxs("label",{htmlFor:"file-upload",className:`cursor-pointer flex flex-col items-center justify-center ${n?"cursor-not-allowed":""}`,children:[tt.jsx("svg",{className:"w-12 h-12 text-indigo-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),tt.jsx("span",{className:"text-lg font-medium text-slate-700",children:"PDF    "}),tt.jsx("span",{className:"text-sm text-slate-500 mt-1",children:"      ."})]})]}),p.length>0&&tt.jsx("div",{className:"bg-white rounded-lg border border-slate-200 divide-y divide-slate-100",children:p.map(u=>tt.jsxs("div",{className:"p-3 flex items-center justify-between",children:[tt.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[tt.jsx("div",{className:"bg-red-100 p-2 rounded text-red-600",children:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),tt.jsxs("div",{className:"flex flex-col min-w-0",children:[tt.jsx("span",{className:"text-sm font-medium text-slate-800 truncate",children:u.file.name}),tt.jsx("span",{className:"text-xs text-slate-500",children:l(u.file.size)})]})]}),tt.jsx("button",{onClick:()=>e(u.id),disabled:n,className:"text-slate-400 hover:text-red-500 p-1 rounded-full hover:bg-red-50 transition-colors disabled:opacity-50",children:tt.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},u.id))})]})},PN=()=>tt.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[tt.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),tt.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),gl=[{id:"purpose",label:" ",keyword:"   "},{id:"mood",label:"/",keyword:" , , "},{id:"claim",label:" ",keyword:"  "},{id:"implication",label:" ",keyword:"    "},{id:"main_idea",label:" ",keyword:"   "},{id:"topic",label:" ",keyword:"   "},{id:"title",label:" ",keyword:"   "},{id:"grammar",label:"",keyword:"  ,   "},{id:"vocab",label:"",keyword:" ,   "},{id:"blank",label:" ",keyword:"  "},{id:"unrelated",label:"  ",keyword:"   "},{id:"order",label:" ",keyword:"  "},{id:"insertion",label:" ",keyword:"    "},{id:"summary",label:" ",keyword:" "},{id:"long_passage",label:" ",keyword:"  ()"}],HN=()=>{const[p,t]=Gs.useState([]),[e,n]=Gs.useState(new Set(gl.map(Y=>Y.id))),[a,l]=Gs.useState(ai.IDLE),[u,h]=Gs.useState(""),[d,f]=Gs.useState(null),m=Gs.useRef(null),[b,v]=Gs.useState(""),[E,T]=Gs.useState(!1);Gs.useEffect(()=>{const Y=localStorage.getItem("GEMINI_API_KEY");Y&&v(Y)},[]);const C=Y=>{v(Y),localStorage.setItem("GEMINI_API_KEY",Y),Y&&T(!1)},R=()=>{v(""),localStorage.removeItem("GEMINI_API_KEY")},M=Y=>{const it=Y.map(J=>({id:Math.random().toString(36).substring(7),file:J}));t(J=>[...J,...it]),f(null)},O=Y=>{t(it=>it.filter(J=>J.id!==Y))},D=Y=>{const it=new Set(e);it.has(Y)?it.delete(Y):it.add(Y),n(it)},L=()=>{e.size===gl.length?n(new Set):n(new Set(gl.map(Y=>Y.id)))},k=async()=>{if(p.length===0){f("  PDF  .");return}if(e.size===0){f("    .");return}if(!b){f("Gemini API Key ."),T(!0);return}l(ai.PROCESSING),f(null),h("");try{const it=`
           .
        
        [    ]
        ${gl.filter(gt=>e.has(gt.id)).map(gt=>`- ${gt.label} ( : ${gt.keyword})`).join(`
`)}

        [ ]
        - ** (1~17)   .**
        -     .
      `,J=p.map(gt=>gt.file),ht=await FN(J,it,b);h(ht),l(ai.COMPLETE)}catch(Y){l(ai.ERROR),f(Y instanceof Error?Y.message:"    .")}},z=()=>{if(!m.current)return;const it=`
      <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
      <head>
        <meta charset="utf-8">
        <title> </title>
        <style>
          body { font-family: 'Malgun Gothic', 'Noto Sans KR', sans-serif; line-height: 1.6; }
          .box { border: 1px solid #000; padding: 10px; margin: 10px 0; }
          .passage { background-color: #f9f9f9; padding: 15px; border-left: 4px solid #ccc; margin: 10px 0; }
          .source { color: #888; font-size: 0.9em; margin-bottom: 5px; }
          .question-title { font-weight: bold; font-size: 1.1em; margin-bottom: 10px; }
          .choices { list-style: none; padding-left: 0; }
          .choices li { margin-bottom: 5px; text-indent: -1.5em; padding-left: 1.5em; }
          .answer-box { margin-top: 15px; padding: 10px; background-color: #f0fdf4; border: 1px solid #86efac; color: #166534; }
        </style>
      </head>
      <body>
        ${m.current.innerHTML}
      </body>
      </html>
    `,J=new Blob(["\uFEFF",it],{type:"application/msword"}),ht=URL.createObjectURL(J),gt=document.createElement("a");gt.href=ht,gt.download="extracted_questions.doc",gt.click(),URL.revokeObjectURL(ht)},F=async()=>{if(m.current)try{const Y=m.current.innerHTML,it=new Blob([Y],{type:"text/html"}),J=new Blob([m.current.innerText],{type:"text/plain"}),ht=[new ClipboardItem({"text/html":it,"text/plain":J})];await navigator.clipboard.write(ht),alert(` !

 Google Docs(docs.new)  (Cmd+V) .`)}catch(Y){console.error("Failed to copy: ",Y),alert(" .   .")}},W=()=>{t([]),n(new Set(gl.map(Y=>Y.id))),h(""),l(ai.IDLE),f(null)};return tt.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[tt.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:[tt.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[tt.jsxs("div",{className:"flex items-center space-x-3",children:[tt.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-lg",children:tt.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),tt.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"PDF   (AI)"})]}),tt.jsxs("div",{className:"flex items-center space-x-4",children:[tt.jsxs("button",{onClick:()=>T(!E),className:`text-sm font-medium px-3 py-1.5 rounded-md transition-colors flex items-center
                 ${b?"text-green-600 bg-green-50 hover:bg-green-100":"text-slate-500 hover:text-indigo-600 bg-slate-100"}`,children:[tt.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),b?"API Key ":"API Key "]}),a===ai.COMPLETE&&tt.jsx("button",{onClick:W,className:"text-sm text-slate-500 hover:text-indigo-600 font-medium",children:" "})]})]}),E&&tt.jsx("div",{className:"bg-slate-50 border-b border-slate-200 p-4 animate-fade-in",children:tt.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center space-x-3",children:[tt.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Gemini API Key:"}),tt.jsx("input",{type:"password",value:b,onChange:Y=>v(Y.target.value),placeholder:"AIza...",className:"flex-grow max-w-md px-3 py-1.5 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),tt.jsx("button",{onClick:()=>C(b),className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700",children:""}),b&&tt.jsx("button",{onClick:R,className:"px-3 py-1.5 bg-white border border-slate-300 text-slate-600 text-sm font-medium rounded-md hover:bg-slate-50",children:""}),tt.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"*      ."})]})})]}),tt.jsx("main",{className:"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:tt.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[tt.jsxs("div",{className:"space-y-6",children:[tt.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[tt.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[tt.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full inline-flex items-center justify-center text-sm mr-2",children:"1"}),"PDF  "]}),tt.jsx(UN,{files:p,onFilesSelected:M,onRemoveFile:O,disabled:a===ai.PROCESSING})]}),tt.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[tt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[tt.jsxs("h2",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[tt.jsx("span",{className:"bg-indigo-100 text-indigo-700 w-6 h-6 rounded-full inline-flex items-center justify-center text-sm mr-2",children:"2"}),"   "]}),tt.jsx("button",{onClick:L,className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",disabled:a===ai.PROCESSING,children:e.size===gl.length?" ":" "})]}),tt.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:gl.map(Y=>tt.jsxs("label",{className:`
                      relative flex items-center p-3 rounded-lg border cursor-pointer transition-all
                      ${e.has(Y.id)?"bg-indigo-50 border-indigo-300 ring-1 ring-indigo-300":"bg-white border-slate-200 hover:bg-slate-50"}
                      ${a===ai.PROCESSING?"opacity-60 cursor-not-allowed":""}
                    `,children:[tt.jsx("input",{type:"checkbox",className:"hidden",checked:e.has(Y.id),onChange:()=>D(Y.id),disabled:a===ai.PROCESSING}),tt.jsx("div",{className:`
                      w-5 h-5 rounded border flex items-center justify-center mr-3 transition-colors
                      ${e.has(Y.id)?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}
                    `,children:e.has(Y.id)&&tt.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),tt.jsx("span",{className:"text-sm font-medium text-slate-700 select-none",children:Y.label})]},Y.id))})]}),d&&tt.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg border border-red-200 flex items-start",children:[tt.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),tt.jsx("span",{dangerouslySetInnerHTML:{__html:d}})]}),tt.jsx("button",{onClick:k,disabled:a===ai.PROCESSING||p.length===0||e.size===0,className:`w-full py-4 rounded-lg font-bold text-lg shadow-lg transition-all transform hover:-translate-y-0.5
                ${a===ai.PROCESSING||p.length===0||e.size===0?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white active:bg-indigo-800"} flex items-center justify-center`,children:a===ai.PROCESSING?tt.jsxs(tt.Fragment,{children:[tt.jsx(PN,{}),"AI  ..."]}):"  "})]}),tt.jsx("div",{className:"flex flex-col h-full min-h-[500px]",children:tt.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex-grow flex flex-col overflow-hidden h-full",children:[tt.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:[tt.jsxs("h2",{className:"font-semibold text-slate-700 flex items-center",children:[tt.jsxs("svg",{className:"w-5 h-5 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"  "]}),a===ai.COMPLETE&&tt.jsxs("div",{className:"flex space-x-2",children:[tt.jsxs("button",{onClick:z,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:[tt.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Word "]}),tt.jsxs("button",{onClick:F,className:"flex items-center px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:[tt.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m2 4h2a2 2 0 012 2v10a2 2 0 01-2 2h-2a2 2 0 01-2-2v-10a2 2 0 012-2z"})}),"Google Docs "]})]})]}),tt.jsxs("div",{className:"relative flex-grow bg-white overflow-hidden",children:[a===ai.IDLE&&tt.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 p-8 text-center",children:[tt.jsx("svg",{className:"w-16 h-16 mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),tt.jsxs("p",{className:"text-lg",children:["   ",tt.jsx("br",{}),"  ."]})]}),a===ai.PROCESSING&&tt.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white bg-opacity-90 z-10",children:[tt.jsx("div",{className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),tt.jsx("p",{className:"text-indigo-600 font-medium animate-pulse",children:"PDF     ..."}),tt.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"      ."})]}),tt.jsx("div",{className:"h-full overflow-auto p-8 bg-white",children:tt.jsx("div",{ref:m,className:"prose prose-indigo max-w-none outline-none min-h-full",contentEditable:a===ai.COMPLETE,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:u},style:{whiteSpace:"pre-wrap"}})})]})]})})]})})]})},_2=document.getElementById("root");if(!_2)throw new Error("Could not find root element to mount to");const jN=oD.createRoot(_2);jN.render(tt.jsx(JR.StrictMode,{children:tt.jsx(HN,{})}));
